[
  {
    "startTime": "00:00:08",
    "text": "okay uh so okay good morning good afternoon good evening everyone this is the security area advisory group sag we're going to get started i think some folks are going to start filtering in uh welcome my name is roman diniglio i am one of the security area directors and up in front of you in the room uh is our other new security area director welcome paul want to say hello hello well it's later in the week but i do want to remind everyone that the notewell still absolutely kind of applies and this reminds you of your responsibilities in participating in the ietf but really to put a finer point on it i would just like to emphasize to everyone we all have to live the itf code of conduct and the idea here is we really need to make sure that when we interact with each other we keep we keep things professional we're respectful to our colleagues we focus on the technology and overall we're you know remember we're all pushing to make sure that the internet is uh is a safe place this is the this is the security area kind of after all and we're working to connect everyone around the world agenda-wise we have a few administrative things as always to get a summary of"
  },
  {
    "startTime": "00:02:02",
    "text": "what's happening in the area in the in the working group reports continuing our tradition of deep diving into technology we've been developing for quite some time in the area to make sure everyone understands it given its pervasive deployment paul graciously has agreed to give an intro to ip ipsec and then we have quite a lot of time to talk about other business if folks want to come to to the open mic i'm going to pause here despite having a lot of coffee to uh to ask if anyone wants to bash the agenda okay i am not seeing anyone is that someone coming up to the mic i can't tell the box is too small no okay perfect uh so in that case let's keep going we have a number of working group summaries coming in we won't talk about the working groups that sent a report you can either go to sag to see the ones that were sent or we'll see kind of links if anyone wants to proactively start queuing up for work groups to to give a heads up please by all means kind of do it so ace sent a report acme sent a report cosi did not does anyone want to say something here i think mike's coming up to the mic mike jones microsoft we met on monday a number of drafts were presented with requests for working group reviews and we are very very close to taking the original koze specs from draft standard to standard as reported by evo and i'm a new chair where do i send the report please just send it to the sag list okay thank you very much much appreciated uh emu sent a report"
  },
  {
    "startTime": "00:04:01",
    "text": "lake is fine mls also does hannes rifad or anyone from the working group want to talk about the first oauth session that happened earlier in the week there's also one happening later today okay if you do you can queue up uh later and anything from ohi richard siobhan working group openpgp is good anything from privacy pass ben joe uh this is joe um we're gonna meet uh later this afternoon uh we have a couple agenda items most notably we've kind of reworked our uh architecture draft a bit uh to kind of accommodate different uh use cases thanks thanks joe uh that's an editorial mistake we should have given you a pass since you haven't met yet uh rats had a session i had two sessions already nancy ned kathleen anything okay sec dispatch center report so we we got a plan for four different things it's a suit center report we're good on teep anything about anything from tls sean hello so um yeah many of our crafts are on our way we we um are trying not to relegate the uh yech question but um we will continue to debate that as we can progress so thanks thanks sean uh okay so we have a number of working groups meeting later this week you can see them there some have already proactively sent a report if any of the chairs or someone from those working groups wants to come up to to have any words by all means kind of do that we'll also jump to the working groups that are not meeting"
  },
  {
    "startTime": "00:06:00",
    "text": "if anyone wants to make a comment about those and then lastly we'll just call anyone else that wants to comment on what's happening in related non-sec area working groups or outside the uh outside the security area but relevant to relevant to sec so pausing here for for commentary hi uh justin richer the http working group has made significant progress on both http signatures and http digests in recent months and i would encourage people in the sec area to go take a look at both of those two specs they are things that kind of bridge the apps and sec areas so even though they are hosted in http it's going to be adventurous to a lot of folks here too and we'd appreciate the eyes thank you thanks justin and this is barry lieber talking about dmarc we did not meet here uh we're we're gonna have an interim at some point soon uh we we're working on the uh proposed standard version of the former experimental spec and uh are um currently debating the what the text is to get rid of the public suffix list usage and use a tree walk instead and that's causing a bit of controversy in the working group but it's uh it's resolving so that's where we are thanks barry hey uh tim capalli microsoft and w3c just something to be aware of there is an effort going on to redefine how authentication works in the browser essentially bringing the browser into a more active role in things like oauth and openid connect it's a significant shift obviously so it's just something to be aware of there is a community group that i'm a co-chair of called the federated id community group where one of the proposals is kind of"
  },
  {
    "startTime": "00:08:01",
    "text": "sitting because it doesn't have a home and that is open to anyone to join because it's a community group so if you're interested it's a very contentious topic as you might imagine so thank you all right i'm not seeing anyone in the virtual queue my eyes might not be sharp enough to see the video paul are we clear on the back mic there in person okay yes i think so uh all right thank you uh so the other thing i would add to none to things happening outside the itf we've mentioned in a couple of working groups we had a talk on it uh at a previous itf the nist round three pqc decision is should be coming real soon now uh real soon now so we i think we are all impatiently waiting for the results and uh that that'll probably trigger quite a lot of work inside the the itf okay moving along uh so that was the that was the the commentary on the working groups agenda-wise we are now seamlessly moving into the a.d portion of this and um we have a lot of material here the the motivation is that over the course of over the course of time from the last meeting the ads get all sorts of questions about what's happening in the sec area we're just trying to be as transparent as possible so we summarized all the different inbound requests that we that we get on a i don't want to say on a regular basis but things we commonly get between meetings and want to put it out here put it out here to the community paul and ben uh then please kind of jump in here kind of heckle me or kind of make uh additional commentary as we as we get through all of this all right so uh there's uh in addition all the different working group documents we of course are sponsoring different uh we are also personally sponsoring kind of a few documents uh we we published the ers kind of update as"
  },
  {
    "startTime": "00:10:00",
    "text": "rfc 9169 and then we we have security.txt and the updated uh code points for xml sec in the rfc edq active still is is the is the numeric id sec considerations and from sec dispatch we identified that we're now sponsoring uh those registry changes for our ssh we have not you know paul and i have not yet talked about who's going to grab that one since that just came out on tuesday ben or paul do you want to have any any last words on uh i guess on the numeric considerations draft since that's the one that's still in flight so i i don't yet um i just inherited this document obviously from ben so uh maybe ben has some comments you want to make uh yeah uh audio is live now so for that one i believe though the waiting for write-up state means that it finished the itf last call but uh the comments maybe haven't been addressed and so the write-up of the waiting for write-up is the isg ballot and i believe that this one there was some controversy about whether or not changes were made or needed to the document uh and i was of the opinion that some changes were needed but it was not easy to precisely characterize what those changes were and so it's been sort of in a holding pattern while the author and i tried to get some agreement about what the changes that actually were needed were and so i don't know if there's a clear plan for getting that to happen but i may have some more cycles to think about it now that i'm not in the day-to-day grind of reading a bunch of documents every week wow you make the job sound so appealing then uh and by the way uh technically you"
  },
  {
    "startTime": "00:12:02",
    "text": "continue to stay a d until the end of sag so if you'd like you'd be happy to keep the video kind of on with us because you have as much commentary on all this material as as the rest of us do uh okay uh so moving along this is just a list of urls we wanted to just continually continue to kind of remind everyone uh in the in the course of uh of that that grind to review the documents because that is certainly how it feels sometimes in preparation for the telechat uh historically ben and i and paul will be adding kind of a zone we thought we find things honestly we see a lot we wish we did not see a lot and we just want to make sure kind of in advance folk folks understand what are common things that we will drop discusses on so if you have questions your colleagues are asking what should i do to make sure the security review goes okay or frankly you're pushing a document forward is how do i make sure that that things aren't discussed on please do consult that list and share that with your colleagues we also we often always get questions of well i see what's happening in the working group but you know what are the 80s doing if you want a real-time view into what our queue is and what everything kind of the disposition of all those things you can directly click those urls and get insight into all of that ben and i also use the history field of the data tracker uh and so if you know you can look at the states the states kind of describe where we are in the process but if you want additional information for example what does it mean to say revised id needed like what do i revise for very often you'll find those details in that in that history field and then lastly we're trying to keep that wiki page about the security area up to date especially to help guide new work inbounding into the ietf and to acknowledge when it's been caught but perhaps not in a working group yet so if folks from the outside are are looking we can provide them a summary of what's happening so that's a link if you get questions for your colleagues uh about what's going on there you yourself kind of want to know what what have the ads caught you can"
  },
  {
    "startTime": "00:14:00",
    "text": "find you can find a pointer there uh so working group changes since the last time we got together uh we in the we uh we in the itf had our in an interim buff something that we don't do very often on the topic of of sharing credentials which was called secret it was sponsored out of the art area for folks that attended it there was some back and forth about where would this will ultimately be housed the decision was this will this is going to be one of those just like skim which is it's going to stay in art but overseen by a sec a d probably me uh so in terms of kind of tracking sec area works this is in that post post buff phase where it looks like there's a lot of interest in a working group we have a charter but the mechanics of that have not started uh we uh we we spun up the ppm ppm working group out of the priv buff that happened last time in iatf 112 they're meeting tomorrow colonel closed and in active recharting right now is rats i'll kind of pause here better paul do you want to comment on any of those mechanics okay uh so the one thing i'd just like to say about kind of ppm i mean this really is a recurring kind of pointer it is possible to spin up a working group between you know in one meeting cycle where you do a buff and and you can have a working group before the next thing starts if there's a lot of different prep work so kudos to the to the ppm kind of proponents to having a lot of things kind of teed up in advance and for having a great community discussion to get us here wanted to acknowledge uh acknowledge some of the changes we've we've had amongst our working group kind of chairs so in dance of course paul is up in front of the room so he could not continue on as working group chair congratulations and thank you to joey for for stepping up there uh thank you robbie for your kind of service there in"
  },
  {
    "startTime": "00:16:00",
    "text": "kitten in ppm ben and sam thanks for getting us getting us kind of spun up and getting the work started and in skim aaron thank you for kind of stepping in to round out our team uh it was just nancy there alone and editorially we also kind of forgot uh mike uh mike jones thank you for kind of joining the kosai team overall we put out calls i think every time between between meeting cycles certainly at least kind of twice a year if you have interest in becoming a working group chair by all means gotta please send us an email we do keep a running list as there are opportunities we do consult that list uh between kind of interest skill set and what we think that working group needs uh and i'll also just have again kind of a shout out thank you joey and aaron you guys are new time chairs we really appreciate you stepping into this role for the first time uh we've gotten a couple kind of questions on this one uh with any ad turnover there's a reshuffling of working groups we want to make sure that you know the skill sets of the aeds are right the needs of the working groups are are kind of satisfied and there's there's appropriate kind of load balancing so this is the split between paul and me uh what you see in red is where it wasn't a straight swap so we started from paul taking all of ben's working groups i kept the working groups i had and then you know we did a little uh little exchange primarily i'm taking uh ip second me and open pgp because that's an area where paul is active uh paul had also been doing a bunch of work in dance and he got ebu honestly just for for a little load balancing we are not super great about sharing new working group lists that we create so we're going to be better about that so just wanted to call out that a couple weeks ago we made skit which is which is uh which is mainly focused on supply chain"
  },
  {
    "startTime": "00:18:00",
    "text": "integrity issues you can get more details about that from the proceedings we just talked about that at the dispatch session on tuesday the kind of the new the new item we want to talk a bit more about is we need community help on errata processing if you go to the errata site you'll see that there's about 250 reported errata for sec work so reported is a precise label which means that someone has filed that errata and nothing has been done with it so these are unadjudicated uh errata in the in the sec area uh you know if you crunch the numbers a little bit about 60 of those are actually from open working groups so the other 40 obviously is from work that no longer kind of has a home so it's a little harder to deal with so what we would do is we'd ask the those participating in those working groups and specifically those chairs to help us out a little bit and adjudicate those uh those those uh those 153 reports folks take the time from the community to let us know where we may have gotten it a little bit wrong and let's make sure we figure out whether that's right and maybe with document updates we can get those fixed in line or uh or with the new uh errata overlay tool the those changes will actually appear all right uh so so the we have a couple thank yous that we want to have so first this is uh this is a different kind of hybrid meeting we've previously had meetings where there are remote kind of participants but they are not uh they are not an overwhelming majority the the demographics uh were that almost two-thirds of sec was removed and only one-third was on site and this created a very odd situation where potentially there are all sorts of folks in the room but all the chairs are remote uh this was this was kind of a new thing for us so we really wanted to make sure that we had we had backups so a big thank you to the different sec working group working group chairs that pulled double duty in addition to having their own kind of working groups these chairs kind of"
  },
  {
    "startTime": "00:20:01",
    "text": "stepped in to be an extra set of hands for those chairs that and those working groups that were going to be all remote so thank you thank you for being our backup thank you for kind of pushing the buttons and really making sure that we had a seamless kind of experience as we roll into probably having a lot more folks on site in these exciting uh in-person meetings uh another really big thank you is to our sector reviewers and and tearow for running the sector for us these uh these the reviews done in in the working groups as early review in absolutely an ietf last call and as we prep for the telechat are are invaluable they catch so many issues before the documents are kind of published and kind of as an ad ben and i and i'm sure paul will rely you know really rely on this to help us kind of bootstrap bootstrap our reviews especially when things may need a lot of attention before it kind of gets to us so really thank you for your service this is a huge help for us so the last thank you uh i i wanted to we really wanted to make here is to thank uh is to thank ben uh you know ben has served two terms back to back uh so you know kind of for those that may not be familiar that's four years of his life where in addition to whatever else he has he has got going on he is focused on making the security area work for us uh one of the things that i've learned about the ad role is that you really turn it into what you want it to be it's what you invest in it and ben has been amazingly generous with his time and expertise and you know kind of personally here i probably learned as much about the protocol innards from the weekly sinks we have to talk about what's happening as i did from actually reading the documents so really thank you for that ben if you published a document in the last four years you probably also know that ben has redefined or really next leveled"
  },
  {
    "startTime": "00:22:01",
    "text": "what it means to get a detailed security review his diligence has you know prevented you know so many protocols from shipping with issues uh you know i i was kind of curious so what's a lot of protocols you know what what did ben really catch so i this isn't these aren't stats that are easy to kind of get there's no interface for that but then i don't know what what you think your key was but i got the numbers pulled so you balloted on 702 documents uh during the during the review and of those you dropped 299 discusses so in recognition of you really saving the internet that many times we want to help you decorate uh so yeah ben's video is back that's good so i don't know whether folks can see what's behind ben so for a long time during covert i was looking at a at a blank wall and then we had a meeting i'm like what is that blue box that you have behind your head so to clarify for folks that can't see it that's a really nice blueprint schematic of the millennium falcon so saving the internet is probably equivalent to han and luke saving the galaxy from the empire so it really feels like ben han and luke need equal recognition so uh as a result of that it seems like it should be fair place so what we have for you is hopefully you can kind of see that is a metal of yavin to hang next to your millennium falcon so they can be kind of side by side so your wall is a little less blank and there will be uh we'll get that kind of it would have been more dramatic to give you that kind of in person we could have maybe had a tall chewbacca kind of with you uh instead i'll make sure that that gets shipped to you there'll be a plaque inside it turns out you can't get things engraved with the latest stats from the telechat from the meeting anytime soon so that's two days away in shipping is what i'm told"
  },
  {
    "startTime": "00:24:00",
    "text": "uh but you know in all seriousness on behalf of the community ben thank you so much for your leadership you helped us get the work started you made sure we were on the right track and then you didn't let us ship without frankly checking our work so really much appreciated then thank you thank you and that's that's that's really a great uh choice of a gift with that metal there i you put a lot of thought into it so it'll be really fun to have on my wall yeah maybe when you come in person next time you can wear it for us yeah yeah maybe just to say all right and yeah thanks for pulling these numbers too that's a real eye-opening numbers i'll tell you one off from 300. maybe i should have tried a little harder i mean i think if you would have known you you could have hit it i am sure that if we pulled up the leaderboard you would be ahead of ahead of all of us thank you again really no thank you thank you for your service ben all right uh so in terms of our schedule that's uh that's the front matter that we had administratively prepared so i'm gonna turn it over to paul and i'm gonna get your slides up we're gonna talk a little bit about ipsec okay um thank you um i'd be sad it's always an interesting item a lot of security people wonder why is it still there others go like this is the best thing ever so it's this very dividing topic um but i'll give an introduction and not that i think i will change people's minds but maybe some of people will know a little bit better why it's still around okay next slide uh paul i'm sorry to interrupt can i ask"
  },
  {
    "startTime": "00:26:02",
    "text": "meet echo to zoom in on wherever paul is speaking because you're got up from people and i don't see the audience so i assume you're standing in front of the pink box i am right on the x literally both of my feet are on the x i cannot position myself more to the left no i think the camera's not on you so that's fine we can i guess continue but if meat echo can fix that that'd probably be something okay thanks oh there we are okay so um as as yo i've made clear uh on a message to the cyclist uh or sorry to the ep list yesterday um we even uh spent a lot of time on how to write the acronym ipsec and this is from rfc 4303 that clearly states that ipsec should be written with a capital i capital p and no capital s so thank you joha for heckling me as the first person a day before the meeting note that all the uh all the rfc numbers and drafts that are listed in this presentation they are clickable um for some reason they don't always show up in blue because of technology but they you can click on them so next slide some people might remember rfc6071 it was a nice overview of all the rfcs related to to ipsec and ike unfortunately it's really outdated even though um it still provides a nice overview and 63 pages of references it is a bit bit out of date so it would maybe be nice to do a new one for this but it's um that would be a challenge to do so next slide another work uh that's uh actually a really good read and i say this obviously because i'm one of the authors of it is nist sb 877 ref one got the"
  },
  {
    "startTime": "00:28:00",
    "text": "ipsec vpns the document was originally about 20 years old we redid it about two years ago um some of the ietfers in the room have contributed to this document or our authors of the document it goes to a little bit more detail so i'm going to just briefly take off my mask because it's hard to keep talking and breathing through it um it includes various deployments and other useful information configurations uh for various um known implementations um it also has a lot of configurations for um and and the the sorry the nist and fips recommendations so if you want to immediately be be fip certified um you can read through it and we'll give you all the guidance there as well um as i say it's a it's a steal at only 149 pages i hope you have as much fun reading it as my laptop had swapping microsoft word and going through all the revisions over the course of about a year so next slide so the problem with ipsec is that it's actually a really really powerful tool and you can do everything with it and as with swiss army knives anyone who owns one has cut themselves with it probably more than once so it can do a lot of things it is complicated but it is possible to only just use that one favorite tool you have in there you don't need to use all of these you know tools um you can just use the knife or you can just only use a screwdriver um so you pick what you want and uh and don't worry too much about all the other things that are there um modern software comes with fairly good defaults so so configuration should be fairly minimal um and so so don't be too daunted by your big tool you can you can you can use it pretty easily next slide"
  },
  {
    "startTime": "00:30:02",
    "text": "so one tricky thing is that uh what's quite different from other things such as such as tls is that ipsec consists of kind of two protocols one is the control channel which is the internet key exchange that is used to negotiate everything and of course it has to be done securely so it itself is also using a whole crypto set um so so it will do an encrypted uh session and then once it has an encrypted session um it will it will then be able to actually negotiate the ipsec and create the actual data plane where the packet encryption is configured in usually in the kernel there are different protocols for doing that or there's encapsulated security payload which is the one you would be using which is just the sort of standard packet encryption there used to be or technically still is authenticated header which is the non-encryption one um mostly due to you know 25 years ago export regulations limited cpu powers of doing things if you really need something like that these days um you can use null encryption with esp so so ah you really try to remove it to at least somewhat simplify the whole ipsec suite then sd communication because this is a two-step process you've got the user land configuring things to the kernel you need a protocol to talk in between there so a pf key is the sort of standard old one that has been used and uh and that's still in use uh with a lot of a lot of uh machines such as the bsds linux had to do its own thing so there's linux netlink uh that's using a different protocol you can read up on the rfcs but you probably don't have to worry about it next slide i previously talked about this so the ike protocol establishes the the state and"
  },
  {
    "startTime": "00:32:01",
    "text": "authenticates and authorizes the peer and then it will negotiate ipsec um just for uh for to avoid some confusion um when you send an ipacket and you get a reply back that's what they call an exchange so it's not like like exchange is sort of a word that's being used in different um different ways with different protocols but but for ike it really means you know a request and a response that go together next slide some other confusing terminology and this is really because things are like you know 25 25 30 30 years old um and and so things have changed and uh without dragging up too much mud and old things from the past um be aware that some terms are used interchangeably depending on the year of the documentation was published so while i prefer personally to talk about ike assay i say sends for security association and it's basically the the state uh with all the um all the information in there i personally use iksa and ipsec assay if i formally according to the igv2 spec would be talking i would only be talking about parent sa and child sa i find that personally more confusing to people so i use i can say an ipsec assay next slide so what does ibsec provide roughly speaking there's like three three things you can do with it you can do a host to host encryption um where it's only really one host to one host um it has some advantages that you don't have to um encrypt everything including a full ip header and this network's a network encrypted and that can be like very easy you can have multiple networks to multiple networks you can have zero zero as your network um this is like the the tool that is these days used"
  },
  {
    "startTime": "00:34:01",
    "text": "everywhere to hook up things together um for instance i have ip addresses in in holland i live in canada um i use ipsec to tunnel some of those securely to my home so i have more than one ip address my visitors don't like it as much because google appears in dutch but otherwise it works really well and secure other people use it for connecting hypervisors making sure that there's a multi-tenant isolation vxlan encryptions tunneling over gre over an ipsec tunnel like it is really sort of a you know secure ethernet cable that you can stick in there and and you can you can tie it down as much as you want um some people tie down a lot with the policies and you can be very specific um others use it more as a virtual interface meaning that if the packet hits the interface it then it must be part of the policy and you send it and encrypt it the fourth uh key point encrypted entire internet by default um that was sort of a goal set out 25 years ago um didn't really make it happen um so i bow down to tls and let's encrypt an acme for for actually mostly getting that done good job i wish we we could have done it next slide so getting down to the core rfc rfc 433 encapsulated security payload is sort of the core of of the ipsec packets um it is protocol number 50 and i say they are not port 50 because that is probably the most uh hurt support question when people can't get it to work because they see the number 50 they just assume it's like udp 50 or tcp 50. they don't understand that esp is a different protocol because most non-ietf humans have only heard of like"
  },
  {
    "startTime": "00:36:00",
    "text": "udp tcp and icmp and they don't know about anything else um so that is in practice this is a bit of a problem um i'll get back to that later so what is it what is a packet like that uh look like it's a fairly standard like it it's it's similar to to how the lesson groups think it's similar to how other other encryption protocols work because it's actually mostly the property of the of the cryptography um there's some identifying answers to um to detect which uh tunnels if you have more than one ipsec connection you want to be able to distinguish them so the spies are there um you see that there's some some algorithm agility options in the packets you can we can add to aad that we couldn't do initially um there's free play protection via sequence numbers so even though you can see encrypted packets you can't replay them and make make something happen does traffic's like us in them uh that can sort of dictate policy for for what is uh what is which packets are allowed to go in and out um and you can do padding you can send obfuscation packets that are basically like empty packets just to make it harder for for an observer to figure out what's exactly going on it supports compression it's a really complicated story i really don't want to get into right now but in general you're just better off not not trying um you can also do very high speed things um the the limiting uh factor on the protocol used to be the sequence number but with extended sequence number we basically just display the last bits and we remember the higher bits and don't send them over the wire but we make them part of the the calculation of the crypto and the the signature checks um so you can actually reach like a 100 gig or more per second speeds there are some practical problems but but but the protocol allows it so next slide oh i think i"
  },
  {
    "startTime": "00:38:00",
    "text": "lost my first viewer there we go um so i just put it on here um just for sort of completeness sake um i don't really want to go into too much detail but the next slide um so there's there's kind of two modes um there's transport mode and tunnel mode and transform mode is really used for the host to host and it has less overhead it doesn't um it it reuses part of the ip header and and protects uh the parts of the ip header that can be protected that that don't change between hops and and the good thing is that there's less overhead so you get a more of your original mtu um it generally is faster to look up because like a kernel only has to look up the the source destination ip address it doesn't have to match up any other policies because it can only be host to host so the encryption policy and where you send the packets to or where you've seen the packets on are the same ip addresses of course this completely fails with nat as soon as that happens then things get rewritten there's various clever hacks to make it work anyway that's how sort of microsoft kept l2p with ip second transport mode through net working and when i say sort of working um you can see the last line there it is what you end up is in ip pack it into ppp packet into an l2p packet into an esp packet into a udp packet and that's just what you're doing yourself then your isp is probably doing something like ppoe so this is pretty terrible uh an empty uf of the inner packet there are useless to be set to something like 1200 to even have a chance to to make it over the internet um and then there's of course issues um because you're using sort of the pre-netted ip address you get issues on the server where the server has like multiple connections to"
  },
  {
    "startTime": "00:40:01",
    "text": "pre-net ip address to different entities so now it needs to do more complicated state to separate these so long story short transport mode uh is great for host host encryption in your data center or wherever you where you control everything in your own cloud where you can do this um as soon as you like sort of go through an administrative boundary where there's something like net involved you're better off just not using transport mode next slide so tunnel mode is conceptually a little easier you just have a packet that you want to encrypt so you encrypt it and then you stuff it into another packet this is like conceptually it's much easier of course the the the problem is that there's a whole new ip header because you create a whole new packet so you you lose a little bit more mtu now you need to be careful with policies because if the inner packets for instance has let's say 888 as a source address um you don't really want to reply to google dns with your ancestor so you have to be sure to to understand what it is that you're receiving and sending and making sure that those policies match what you actually have negotiated or what is allowed to be be transported in the tunnel but the good thing is that you can you can have sort of arbitrary ciders that can go through the tunnel um there's still an issue that that esp doesn't really transfer over the internet um so what usually happens is that it gets stuffed into udp packet then the outer packet doesn't really matter because you just look at the crypto from the inside encrypted packet anyway so it doesn't matter it gets rewritten by nat routers and you can just sort of decapsulate it later in the kernel next slide so encapsulating usb packets um like i said there's a bunch of rfcs initially we were doing espn udp that worked quite well"
  },
  {
    "startTime": "00:42:00",
    "text": "there were some issues early on in the days with uh nat routers trying to be helpful they sort of tried to be too helpful sort of screwed our original ike port which is on 500 so um the protocol switched to port 4500 to avoid these helpful assistants um and so that that is usually still in use um to to transport ipsec over the internet so it's encapsulated over port 4500. the disadvantage of course is very easily blocked um if you blockboard 4500 then you you there's no no ipsec coming out of your network you could use you could use a different port um in in my experience at least be before the onset of quick um is that almost all udp if you go to to a hotel or if you go to a coffee shop you have a good chance that all udp except dns is blocked and a dns udp is redirected to the local server and so your best bet is to actually get tcp out and that's also what other other vendors found so there were some non-standard ways of doing tcp encapsulation of ipsec of course remember this is a terrible idea because if your inside connection is a tcp connection and your outside connection is a tsp connection and there's some kind of packet loss happening then then you have like two tcp layers fighting each other over how how to re-transmit and what to do so it's really a last-ditch effort to get your packets out um and so there's actually quite some talk about how to best do this and that's in an rfc a229 that talks about how to do encapsulation with tcp and how to continuously try to move back to udp because it's just so much better because you don't run into all these issues there was some interesting thing of course at itf we don't advertise people break administrative boundaries so there's there's a bit of talk about if you if someone accidentally happens to block let's say port 443 or other"
  },
  {
    "startTime": "00:44:01",
    "text": "ports um you could multiplex this so you could you you could pretend you're a tls connection um there happens to be a prefix in the in the in the tcp encapsulation for i can esp packets um so that you can actually demux it so you can actually have a server that runs tls and um encapsulated icon and ipsec packets um it was a bit tricky because like it sort of breaks what we are supposed to do with itf it is sort of a circumvention technique but but we were also seeing that not having this this circumvention technique really caused the plethora of non-standardized vpn protocols to be out there and so we really kind of had to do this so um it's a interesting political maneuvering uh next slide so how are these these these policies managed um so inside the cur usually it's in the kernel um for embedded devices obviously you might not have the separation between kernel and user land i'm speaking more from like a generic os point of view but if you look at the the the policy in the data state that you have you've got the security policy database and the security association database the security association database is like the endpoint information which crypto keys are you using which host do you need to send the packet to on what port which what protocol and you've got things like counters sequence numbers to make sure that your crypto is going right then the security policy database basically has to see if it the list of rules to see to say i have a packet i need to encrypt it which policy applies who does it go to is it the right ip addresses traffic selectors and which which then which state to use these entries are unidirectional so you've got one for inbound one for outbound if you got like an ipsec"
  },
  {
    "startTime": "00:46:01",
    "text": "connection you you actually have two states in the kernel one for for in and on for out and then same for policy so next slide um it's probably hard to see but if you later look at the presentation or maybe people online can see better um this is an example from from the linux output of the uh of the sad entry this is one entry i just did earlier today bringing up a vpn from the idf network to my server in amsterdam um so it gives you sort of a rough idea of the parameters involved and there's the state capped next slide and same for the policy so here you can see the policy database entry for it you see a third one because in tunnel mode there's this sort of ip in ip and the way linux has done this is with a sort of what they call a forward rule um so so you've got inbound and outbound and forward and forward is where you can things can happen to you can also filter filter on things there and do other tricks next slide puppy intermission i haven't lost anyone everyone's still here um i haven't run out of time so it's all good so now we've only talked about the the sort of ipsec part so now we'll talk a little bit more about the ike part so next slide um so ike negotiates all the parameters both for ike itself and for ipsec um it starts off with a ephemeral diffie-hellman exchange i was quite surprised coming come i've done ipsec longer than than tls i was quite surprised to find out that that tls wasn't really common to do ephemeral diffie-hellman exchange and have perfect or secrecy inside and that there were static keys on tls servers that were used i was i was shocked when i found it out first i was like really surprised like but 30 years ago ipsec already did this like why why is this still happening um very"
  },
  {
    "startTime": "00:48:00",
    "text": "surprised um anyway um so after dielman there's uh there's a peer authentication and there's a authorization as well um usually that's x509 could be based on made up strings for ids com in combination with a pre-shared key could be an eep method there's various ways of doing that now once that's done you can then negotiate one or more ipsec connections where you then negotiate the traffic selectors like source destination uh between the two between the two networks um then you've all have to keep this alive um usually that involves things like make sure that if you're behind net you send netkeeper lives because on busy gateways with telcos if you don't send packets or receive packages for 20 seconds your net mappings vanish and so if you're doing encapsulation over over a port and you need to keep that port open um there's also a wreaking happening after a while when you've sent too many packets or when you spend too much time using the same key you want to change over your keys to provide perfect forward secrecy so to hold this kind of maintenance layer in addition to the initial provisioning that happens in the ike protocol the next slide so originally um 1998 rfc 2409 um i think the author's in the room yes the editor author is in a room thank you very much um and um i really want to say that um even though i've been making uh moves to uh to make this historic it is still secure it hasn't really been broken there have been some weak configurations have been implementation uh problems where the complexity has led to to code mistakes and buffer overflows and compromises but the core of the protocol is still so good that we really had a hard time moving people from mike v1 to like v2 like um and and to this day people are still happily running running"
  },
  {
    "startTime": "00:50:00",
    "text": "ike v1 and and um as long as they have like aes and sha1 even as long as they don't use a tiffy helmet group that's like less than 2048 it's actually still pretty good like there are some some things where you know we've we've improved on on the years but it's actually a really pretty solid document there's been no no cryptographic attacks that broke it or anything and so in that sense even though people don't like to hear it i feel that it's been been more stable and secure than tls which has seen a number of attacks that like are so fundamental that the villa to quickly kill the old tls versions next slide um so there are many extensions the net reversal was one uh dead peer detection was another one that was mostly needed also because of interference with net routers um there were new algorithms there were more configuration happening dns windows net bios other things were added mode cfg was added to to to to also configure and do multiple things additional authentication all of these things added also multiple round trips and also on on a model that didn't really do retransmits very right so so what happens was that both sides would start ending up re-transmitting it would very much complicate the state machine in our code um our implementation i'm working on the ikv 2 state machine is actually much nicer than that v1 state machine and again it's not because ike v1 is bad it's just that it had some different design goals one interesting one is that for instance ike v1 is more secure against quantum computer attacks than ikv2 but it came at a hefty price namely that if you somehow uh did the authentication wrong you would just get encrypted goblet you you couldn't read so you couldn't get proper nice error messages um so so it's all been like different considerations putting the weight somewhere else it's not that that the iphone's actually broken um"
  },
  {
    "startTime": "00:52:00",
    "text": "next slide um one issue was um amplification attacks and and dos attacks [Music] because of the the retransmit not being strictly done by only one site and they would go to both ways and also there's a dos attack where you can trigger more packets than more than one packet in a reply um sometimes that's implementation for instance at some point i was for i noticed that for one year one i paired us on the internet every 30 seconds sent me an ike packet and it was because i once sent them one packet um so so so although that's obviously not a protocol error but an implementation error but dos attacks is is an important thing to fix there are many modes that also confuse people main mode aggressive mode revised mode hybrid mode revised and hybrid were not really used but main mode in aggressive mode was main mode is a more round trips but protects more identity information against passive attackers aggressive mode basically said well we prefer less round trips to set up the connection but we'll kind of leak the um identity of the peer and the clear it's probably okay anyway because if you're connecting to a vpn server most likely that is a well-known server with a dns entry on a well-known ip address so so it wasn't wasn't considered that important but the problem with aggressive mode was that the crypto was slightly different and it was actually possible to do um offline dictionary attacks if you're if you're using pre-shared keys and you were using a really weak one so so that has been the the the biggest problem of ikv one and it's it's it's again it's the humans configuring it badly it's not that much a protocol even though like you know maybe we should be aware that we should make protocols strong enough to protect against weak humans"
  },
  {
    "startTime": "00:54:02",
    "text": "so so the extensions as well for exotherm mode config that were very popular took many round trips so that slow things down a bit as well if you wanted to do many tunnels so many different ip addresses you'd have to set up one abuse tunnel for each one of them that at some point also runs into scaling issues um and one i found um in our own implementation at the time was that not all the fields in an ike packet are actually integrally protected so you've got things like vendor ids that you could actually um that they weren't part of the the signature of all the data um and so you could actually modify them and and do maybe weird things um we found it out because the software i was working on at the time tried to be clever to putting a vendor id payload in that basically said we can do ike v2 why didn't why did you talk if you want to us and we thought we really clever to prevent a downgrade attack but the attacker could just strip it out because it wasn't actually part of the of the signature so there's actually no way to do to prevent a downgrade attack unfortunately so um if you're migrating it's better to to be aware of this and try to do it quickly um next slide it's like video improvements um so it's actually so so one thing that was kind of neat about ike v1 was that you could start your ike protocol you could negotiate ipsec assays and then you could tear down the ike state like you don't need it anymore the ipsec state is there and by the time your your ipsec assays are about to expire then you could re-trigger and do a new ike negotiation and bring up bring up that state that worked really well until we had to do things like that peer detection because at that point you always needed to have that that i can say information there because you needed to send like hey are you still there yes i'm still here and for that you needed that crypto state that was part of the i can say so"
  },
  {
    "startTime": "00:56:00",
    "text": "so in practice you couldn't really work anymore without that so in ikv2 um if the iksa vanishes it basically takes down all of its ipsec assay children as well so that it's it's one bundle that you have to keep keep keep there retransmetrofix only the initiator re-transmits so um the responder just sends an answer and it's all the responsibility to initiate it avoids a lot of race conditions there are some anti-ddos protection added so um if you're seeing too many connections you could send cookies and if they they don't come back with the right cookie then you can sort of ignore them um they even extended that to to to puzzles which you which is sort of a proof of work uh kind of uh thing where you even put more cpu usage on a client before they're allowed to connect so there are some good good protection mechanisms there um another important one is that the the round trips were reduced by combining the establishment of the iksa with the first ipsec essay so you can sort of do a few things in a somewhat faster way so you don't have to have as many round trips before you get your first ipsec essay going um support for eep was added eep is it's interesting um because for instance one of the most popular modes of authentication with um with with i can ipsec is eep tls which basically means you're running a tls connection inside your eye connection to sort of uh to you to eat back-end to to um to authenticate that's a lot of round trips like eight or more and so so for instance um if you're using microsoft windows you can use eptls for your vpn tunnel and then you don't need administrative access on your on your machine but if you're using straight certificates it's considered a host or machine property and then you need administrative access to get that so while you could do the exact same thing with just simple certificates without administrative access you suddenly have to use ipt less and you're like eight to ten round trips further down before you"
  },
  {
    "startTime": "00:58:00",
    "text": "have your your ipsec tunnel up um so not as nice but um but anyway the support is there i um if you can avoid eep i would i would avoid e personally um there's the combination of many traffic saxophones you can have like a lot of traffic selectors so that if you have many subnets you don't have to set up an ipsec tunnel for each subnet you can just set one of them up for all the subnets so next slide so icv2 there's some evolution through some documents that i've listed there um sort of the modes like the the main aggressive modes sort of underway but we've we've slowly been adding exchanges um to to do things like post quantum and other things but the basic mode is there's one exchange i can say in it that is the divi helmet then there's one exchange that does the auth and which also has enough information for for samsung ipsec assay if you want more different ipsec assays you can use to create child essay to to establish more and there's an informational exchange for doing various management things that peer detection mobile mobility updates deletes and those are all additions in ikev1 they're all sort of part of the course back in night v2 next slide so some interesting extensions mobike mobility and multi-home basically you can set up an eye connection with an ipsec connection then you can probe from a second entry so for instance you've got a phone has two interfaces you can use the second interface to send an informational packet to the other end saying hey by the way it could also be that you're going to send packets uh to to this ip address here um and this is an authenticated way so it's not just looking at the last ip does that you receive the packet from and replying to it it's actually an authenticated way of saying i have different ip addresses that i can send and receive these packets on so"
  },
  {
    "startTime": "01:00:00",
    "text": "if my wi-fi link goes down let's go use my my lte link um this session resumption obviously also to sort of help mostly the phone case use with your phone goes to sleep it wakes up you can do session resumption um various algorithm updates uh poli cha-cha algorithms were added to kind of modern things asgcm was already added to ipsec but not to igv1 it was added to ikv2 mike fragmentation support um there was sort of a non-standard way nike v1 of doing that um it's been standards and ikv2 in a much nicer way so so the ikev1 version if you got one corrupted corrupted fragment you sort of screwed with all of them you have to get all of them back like v2 has a nicer way where you sort of authenticate the fragments by themselves so um if you're missing one then you can just get the one back um so so it's it's a harder it's it's harder to to do a denial of service by just making sure you you will always get one fragment bogus fragments and sent to uh before the real one um is the intermediate exchange uh this is to support uh post quantum key blobs that are really big so they don't fit in one udp pack it back and forth so this intermediate exchange is sort of a chain of events that can happen in between the i can say init and ike auth process to to sort of get that infrastructure in place for for post quantum algorithms um there's post quantum pre-shared keys that thought was the one item that said ikv one is more secure with the nike v2 um so it's been added as an extension to ikev2 so you can still add that [Music] there's a multiple ke draft which is like i guess itf has to decide whether they call it hybrid or composite key exchange but it's basically doing your classical key exchange with your classical algorithms and also doing a quantum one and making sure that you can test your quantum one while not degrading the security of your classic"
  },
  {
    "startTime": "01:02:00",
    "text": "one so that that work is also happening in tls and other places and next slide um so it might have seen that that everything i said was pretty complicated and you want to run away screaming let me just remind you this is my client configuration for ipsec on my laptop um you can just see you know left pick up any any ip address left certificate is my actually have an eye certificate um i'm saying give me everything you got for left subnet and write subnet so for the local and remote subnets you see narrowing is yes so i'll let the server narrow me down so the server will narrow the selectors down to one ip address and that is like you know my my dhcp obtained ip address that i then use and next slide so this is the server side of that same configuration more or less the same it just specifies the ids the ip addresses [Music] and it has like a right address pool where it hands me a random like a an iphone pool instead um gives me dns servers gives me domain names and i guess i'm terminated to be fair there was only one slide left i'm sorry something hiccuped i lost everything and it just reconnected me let me get the slide back up i mean i spent a lot of work on that last slide okay so if you're not sleeping i'm open for questions suggestions comments criticism tomatoes and and historic fun facts because there's a lot of people here that have been here 30 years in a room that might have interesting anecdotes yes this is my puppy"
  },
  {
    "startTime": "01:04:10",
    "text": "okay thank you thank you paul so we are now in the other business portion so if anyone wants to come up to the mic to say something please now's the time barry this is barry lieber well since nobody else has anything substantive to say i'll i want to just say something about ben um when i was on the iesg with ben we had a uh iesg retreat where alyssa came up with this game that we played where everybody gave secretariats some fun facts about themselves and we did a little mixer where you tried to figure out which fact went with which person and that was where i learned that ben is one of the most interesting people i have ever met so if you the next time you see him in person start asking him about things like when he worked as a blacksmith and stuff like that that just fascinating get to know him i do remember that mixer event it was very very fun i think we have like a bingo card almost of different facts and we had to figure out who who is from stuart i see you in the queue good morning all um normally i wouldn't ask such a noob question but since uh we just had that"
  },
  {
    "startTime": "01:06:00",
    "text": "overview from paul i i've not been able to find explicit documentation in any rfc about the bound end to end tunnel mode the beat mode and i wonder if you could provide a pointer uh yeah there is a beat mode and there's also something called like a wrapped esp mode and so there are a few um experiments that that were were done that weren't very successful and haven't really seen much deployment although i think there's some interest in doing something with beat again but uh but terror is giving a more complete answer yeah there are given it so be it was bitmore was one of those that were actually done part of in hip also because he was using actually esp also and uh there was this uh it's actually expired in the aircraft i don't think it actually went very well there were some interesting i think two or three years ago somebody was wanting to resurrect it and move it back the basic idea there is it's a transport mode payloads internal model semantics so you have you recreate the tunnel you send the packet without the tunnel putting the separate ip header inside but you recreate the ip header from the outside and and and from the policy so instead of taking the ip addresses outside of the outer ip addresses and putting putting them you take throw them away they out their ip addresses put them in put in uh ipads from the policy and recreate the new you know ip header and send out so it actually compresses things you don't have to send extra ip header and so on so that was the main idea there okay so all there really is is the expired draft right yeah there's only the expired draft and i i think there's actually a couple of three a"
  },
  {
    "startTime": "01:08:00",
    "text": "couple of versions of that because i think it expired a couple of times and you get the new names but i think if you just search for beat i think you can find some of the rough thank you robin you're on the queue top of the queue thanks roman is the audio okay good thank you um yeah this is just a general observation thinking back sorry so robin wilton from the internet society not speaking for the internet society um looking back over this ietf and the previous one i think a really interesting development has been the emergence of these kind of oblivious protocols where essentially the general model has been to take an existing two-party protocol and insert an intermediary node that can um perform a i don't know if this is a verb but an obliviating function between the two um and i mean so uh oblivious doe is one um ohio is another one that we've been talking about this week um so in principle it's it sounds simple um i know that in certainly in the dough case um it it gave rise to um some animated discussion of pros and cons and the same thing happened with ohio yesterday um you know good good arguments on both sides for why people were holding a particular view and thinking of the oh hi discussion yesterday it struck me that maybe we could analyze those differences in in opinion by looking at the trust model in in a fairly generic way um so just to make it slightly less abstract in in the ohi model you have a client trying to reach a"
  },
  {
    "startTime": "01:10:00",
    "text": "target and you put a proxy in the middle so that um the the the proxy strips out the client identifier so that the the target doesn't know who the requests are coming from as a as a privacy preserving move but as a result this intermediate mode is trusted by the client to do one set of things untrusted by the target to do a somewhat different set of things and if either of those trust models is bent or abused you you you kind of break the model and that was i think at the heart of a lot of the discussion yesterday so i just wondered if looking at this general pattern of obliviating nodes whether there would be some benefit in looking at them across you know across multiple instances so looking at the doe model in the ohio model and so on with that through that lens through that lens of of who is trusting whom to do what and and seeing if that tells us anything generic about this principle of putting an obliviating intermediary into a two-party protocol yeah i mean there's definitely an abstract principle there and ben noted that i think ppm might be another one to add to that list yeah and to add a little further you know we have a lot of experience designing and thinking about two-party protocols but i think once we get into three parties uh it's a little bit more uncharted territory for what we've done in the itf so yeah uh interesting questions but"
  },
  {
    "startTime": "01:12:00",
    "text": "perhaps not straightforward answers no worth pursuing and that was partly what struck me was there are really good arguments on both sides in many of those instances and i was trying to figure out a way of of teasing them apart i see also in the chat rus russ has maybe suggested floating this in the t model group which is another good idea thank you russ yeah i think the the previous like the ohio discussions there may be some implicit assumptions being made that would benefit from being made explicit to help identify why people are strongly holding their different positions yeah donald you're on top of the queue i just wanted to mention that there are things just like that in the non-network world for example there are freedom of information act queries you can make to government agencies at least in the united states and the agencies keep a record of everybody who's made such a query and i guess the information has been returned to them so there are companies whose business is to accept such requests and then forward them to the government agency so all the government agencies record say is there were a whole bunch of these freedom of information act requests for various kinds of information and they all came from freedom of information incorporated which will refuse to say what the actual client was that asked them to make the query uh so it's sort of an interesting non-network case like that yeah and and a direct parallel with um part of the ohi discussion which was about um essentially uh abusing the protocol to dos the target say um and in in the freedom of information um"
  },
  {
    "startTime": "01:14:00",
    "text": "use case that would essentially be the equivalent of what i think is called a vexatious inquiry where you just deluge the the government agency with one inquiry after another and it's it's essentially a a real-world dos attack um well the general solution to that in the real world like that is you the agency goes to a court and uh gets some sort of injunction against it on the ground there's an abusive process which is generally right but right but but if but if the inquiries are going through a clearinghouse like you say the agency may not know who to take to court well they can in this case they can in order to stop or the clearinghouse to stop making the enquiries right and again direct parallel with uh with the ohio case yeah um what what what is the target entitled to tell the proxy to do if it thinks that one of the proxy's clients is misbehaving yeah as a as a venue observation we can continue to use sag to discuss that and uh model t might be also another place to take that okay other folks that want to step up to the mic line all right i'm not seeing anyone i'm gonna ask one more time no one in person looking at the video feed and no one in the virtual mic line there okay paul or ben any final words okay in that case uh thanks everyone for joining us have a good rest of your ietf week uh and we'll call close to sag have a good morning afternoon evening bye-bye"
  },
  {
    "startTime": "01:16:11",
    "text": "i thought i'd introduce myself nick jones i uh and one of the active editors just have a chat with them registration and but all the designated experts are wonderful can you treat this people start walking i'm"
  },
  {
    "startTime": "01:18:24",
    "text": "at systems"
  }
]
