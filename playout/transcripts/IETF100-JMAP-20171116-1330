[
  {
    "startTime": "00:00:24",
    "text": "yeah they need to give us space all right now we\u0027re in a really load of the resolution yes would hate for fun now we\u0027re just gonna set one yes I\u0027ve already yeah what could be defining the other route [Music] so for for y\u0027all on me deco so you know we are having technical problems with projection and stuff so we\u0027ll be a bit well let you know also so you know you you outnumber you on me deco outnumber us in the room actually not if we count Alexei but let\u0027s not count Alexei because he\u0027s "
  },
  {
    "startTime": "00:04:15",
    "text": "it\u0027s very HDMI cable yeah yeah thank you all right people are mediocre we\u0027re getting another HDMI cable and we\u0027ll see if that helps do you have another computer than me until we know his work "
  },
  {
    "startTime": "00:08:11",
    "text": "yes we\u0027ve decided that this is going to be a short session but it\u0027s going to start very very late we now have two AV people working on the problem yes that\u0027s a good point it may actually be an option at some point quite No three we now have three AV people working on the problem soon they will outnumber the people amendment as well all right yep okay I have a it says have a display it even lets me mouth off into it sounds look at all of these promise yeah well it it\u0027ll head it all along yeah I didn\u0027t say it was promising it\u0027s just not coming out the other end I think you\u0027re left destroyed it scented some HDMI seasonal "
  },
  {
    "startTime": "00:11:27",
    "text": "all right while we\u0027re waiting for the slides to work if you want to find the slides that are available on the meeting info page for this you can get up your own copy of them and worst cases that we follow along yep I just I just asked on jabber if anyone does not have access to them [Music] ah there we go it looks like we have ignition well we can yep okay you believe we have a slide up that\u0027s a big plain white slide with a big J map in the middle of it do you on me deco see that liftoff says Ken okay life is good up but Jeff says he does not sorry Jeff PC Jeff is Joseph okay he\u0027s good now - so alright where we\u0027re going so I\u0027m gonna go up in the front like a good do be here alright this is "
  },
  {
    "startTime": "00:14:30",
    "text": "cutting in and out so let\u0027s be careful not to touch Neil\u0027s laptop yes we\u0027re back again okay fingers crossed don\u0027t break anything Barry all right everybody welcome to the slightly delayed by about 15 minutes J map session at ITF 100 the blue sheets of I think made their way around the five people in the room and we have another five on me echo I\u0027m Bron Barry is arriving at the table as well the note well should be appearing on your screen right about now if you can\u0027t see it there\u0027s plenty of places to find it and let\u0027s get on with the agenda so we\u0027re going to start with an overview of the changes since the last time I think this is the lack of people in the room is probably indicative of the fact that there aren\u0027t that many outstanding issues that there\u0027s going to be a large amount of debate about but we yep Alexie\u0027s about to hop up the microphone I\u0027m creating you know excuses there is also door working group running in parallel and SOG which is like so the first question is how the hell did that happen well SOG is well SOG and doe should not overlap because dough is security-related dough a I\u0027m all idea nester late yes but it\u0027s but it\u0027s HTTP dough and us shouldn\u0027t overlap I mean this was just a that doesn\u0027t matter it we shouldn\u0027t go on about it right regardless let\u0027s hand over to Neil - to talk about what\u0027s changed since I up 99 ok um so first of all just gonna have a look at what\u0027s the major changes in call so one of them is patch updates updates have always been a patch and that you didn\u0027t have to send all the properties of an object just had to send the ones that changed but you did have to send the whole value of the top level of property and this was an issue for things like keywords and mail boxes because you\u0027d have to send the complete set which was a bit wasteful in terms of bandwidth and also meant that if another client had changed one key word in between you would black that "
  },
  {
    "startTime": "00:17:30",
    "text": "change if you were just naively writing the whole thing out rather than and are not checking the state hasn\u0027t changed under you so with patch updates basically it looks like this so you can see we\u0027ve got keywords slash dollar flags being set to true which is basically JSON pointer format I comment the RSC but it\u0027s another standardized format for with going into the property of what you\u0027re changing and the patch format is defined such that you can also you can include just the whole object and the top-level properties if you want or you can include the detailed minimal patches and the server processes at the same way either way and that\u0027s pretty much all there is to say about that but just pause the moment see if there\u0027s any comments Lexi just asked what\u0027s the big hashed load looking I think that\u0027s the ID of the object you\u0027re updating that\u0027s finally the sha-1 of the RFC a to two bytes in in this example was copied straight out of the the network panel from the j map proxy but it could be anything isn\u0027t a paid string in this case it\u0027s a hash of something but anyway are there any comments or questions on this from the people on meat echo as someone monitoring java ok cool let\u0027s just move on then so the other major great +1 for maxi yeah the other other major change is introducing this idea of back references for method arguments so the idea here is there was quite a few methods where we\u0027re having two special case extra proper extra arguments for things like fetching the messages from the message list or fetching the threads from the message list and all of this was really just to allow you to make implicit method calls and so avoid round trips because you need some of the results of the previous method in order to make the next call so with the back references we have basically simple syntactic transformation which is really easy to implement on the server but it actually gives you just as much power and more from before and means we could remove a whole load of special cases so that actually a lot of the met the methods become simpler so here\u0027s an example to actually explain more what I\u0027m talking about so this is split over two pages because the sides are quite small but essentially what we\u0027re doing here is fetching the third first 30 threads in a particular mailbox and fetching the headers for every message in each of those threads of those first 30 so the "
  },
  {
    "startTime": "00:20:30",
    "text": "first thing we do is a get get message list with the filter just off a particular mailbox that doesn\u0027t that\u0027s the idea of the mailbox there if you\u0027ve not familiar with J map filter format sorted date descending collapse by thread so that we only return each thread once at the first position of its message and we live in that 30 so that gets us the 30 IDs of those first 30 messages in that message list the next one is slightly odd but you can see here how our work so we have a hash before the argument name and you can do this for any argument name and so that\u0027s very easy to scan through the arguments and check and then it\u0027s telling you which of the previous methods to look for the result in and in the path into the response from that to look through so there\u0027s also of zero so we can look back and see that was what was tagged they get message list cool was tagged with zero that that\u0027s the ID of that method call and then we would look at the IDS path in the result and that is an array of IDs and that then becomes the IDS argument for get messages so it\u0027s it looks slightly weird when you\u0027re looking it on in the slides I think but it\u0027s actually really easy to implement and gives you a lot of extra power to reduce round round trips and make things more efficient and so we have yes comment from jabber a possible issue AJ map call containing both IDs and bound IDs the this this is the argument name so I don\u0027t they obviously are no arguments at the moment let us start with a pound and I don\u0027t think anyone is likely to define one and they can certainly we can certainly make sure you don\u0027t that that\u0027s the that\u0027s all you\u0027re looking for you\u0027re iterating through the arguments to a method in the same ways it\u0027s used by D replacement for back references within objects the that leading character can easily be defined us not allowed to be used for anything else do we have any further comments on the mute echo okay I\u0027ll just keep continuing for a short time them so so what we\u0027ve done so the second one was fetching basically we\u0027re getting we want to know what the thread ID for each of those messages is so we do a get messages called just fetching the thread ID property for each of those for that that\u0027s the one slightly weird bit and then after that we\u0027re simply getting the threads so for each of those thread IDs that we\u0027ve got a back reference there to the thread IDs result of the previous thing we\u0027re fetching the threads which is list of messages in each of those threads and then finally we\u0027re doing our get message with the header properties we want back referencing to those message IDs in the threads to fetch all the messages so it I said I think it does look a bit weird when you first see it in the slide but "
  },
  {
    "startTime": "00:23:31",
    "text": "having now tried implanting this and playing around with it it seems to work quite well and actually simplifies code we found on both particularly on the back end because it reduces the special cases that used to have to exist to get the network efficiency so continuing from jabber Roberts says core spec should reject requests as invalid that contained foo and pound-foolish by Jeff and Chris says question is would the server have to merge pound IDs and IDs and compute the result on the merged list know as Robbo said it\u0027d be invalid arguments error immediately if you try and include both and it\u0027s very easy to check that you don\u0027t have both you can include this if you want to back reference otherwise you just get the explicit one there\u0027s no merging no nothing tricky like that any other questions on on this doesn\u0027t look like it cool okay great cool well let\u0027s move on the veining overview stuffer what\u0027s changed since prog push support it\u0027s not a lot to say about this it was just mainly kind of refinements to what was there before referencing in webbing encryption sport which is going to be needed if you\u0027re going to use this in a browser that just references a different RFC or will be an RFC before this is finalized Martin Thompson\u0027s writing and ensures that we are conforming to what\u0027s required and I\u0027ve see a t-34 too to be able to be used as part of that standard push ecosystem the other form push which is the eventsource has changed slightly in that there the client can now pass some query parameters one of which says this is kind of long polling so just close the connection every time you actually push something and the other one is to let the client determine how long the service what interval the server should send things down events also if there\u0027s been no events these are to allow clients to detect that they\u0027ve got a live connection to the server and their concerns were raised before the the trouble with events or sometimes is that you have proxies in between which mean that if they\u0027re buffering proxies you never get the response until the connection is closed because they\u0027re buffering too much in between and so this sometimes doesn\u0027t work in some corporate environments so with these options the client can look out for pings and if it determines it\u0027s not getting the things through can fall that long calling which normally always works because you\u0027re closing the connection and therefore the proxies flush their buffer and you get get the data poof and so it\u0027s all works as a push channel it\u0027s just slightly less efficient on the network and so with those as a set I think pushes pretty much "
  },
  {
    "startTime": "00:26:31",
    "text": "finished so any comments on push I think coming great and finally authentication this is a big issue we\u0027ve discussed in a few cases basically we\u0027ve taken out the new authentication stuff that was in the J Mack core it\u0027s kind of out of scope and makes it much more difficult to get through the spec this is a problem that\u0027s not really just tied to J map so it\u0027s basically just now says it\u0027s HDPE so you need HTTP author to authenticate connections what that is will actually depend on the service probably basic in some cases or bearer with OAuth in certain other cases and that\u0027s pretty much the same situation as we currently have an IMAP it\u0027s no better but in their worse as well any interest in this is Barry any interest in implementing any of the HTTP off working group experimental authentication mechanisms I\u0027m not sure which one the experimental ones are I\u0027d have a look up the HTTP off working group is now closed but it produced I think three experimental specs assessing the manner they I mean I\u0027m certainly interested looking those and doing some experiments with them in terms of the specification I think whatever that is it would still have to be consumer like it is an independent part is not required and tying the two together would be a mistake I think that\u0027s fair so Ken Ken says scram you know which is that\u0027s the sort of thing that we\u0027re talking about there\u0027s one of the experimental mechanisms is related to scram so can you guys both Kiko go do because could you consider like not watching like beta code because of all the TV show vidi god and really like that that\u0027s the use case where you\u0027ve gone to use some mechanism like oh another and the void the nightmares of Avik but so this is what I was getting out yeah so the kind of history of this is the we were desperately trying to avoid basic auth but mandating OAuth doesn\u0027t work because there are too many situations email that that\u0027s not necessarily viable we could prohibit basic but again that\u0027s it\u0027s it\u0027s going to be hand waving scanned is going to be used in situations to an extent like if you\u0027re so so obviously there\u0027s there situations in the in the back and like only internal networks sometimes where it\u0027s in Crocs eat through and at that point it\u0027s gonna use some some other all system that\u0027s this could just be basic or something but the other issue main the main issue is if your random isp set up an email service mail client has to connect to it so kind of worry options "
  },
  {
    "startTime": "00:29:31",
    "text": "for allowing authentication while there\u0027s basic or there\u0027s OAuth pretty much but but all with OAuth is borrowing there\u0027s now some new standards to do auto discovery but just the whole there\u0027s no email clients I don\u0027t know how likely it is people are gonna support all these things in order to be able to auto discover the oath settings Auto register the client and so they can\u0027t pre-register with every email service out that they can pre-register with Gmail and Yahoo and stuff so that they don\u0027t need the auto discovery system but they can\u0027t can\u0027t do that with every ISP yeah I agree that we can\u0027t require a lot but I think this is a real a real loss from coming from IMAP where we had s cram except that in the vast majority of places no one you today and I\u0027m at so anyway Chris says while I\u0027m obviously a fan of s cram plus TLS the more important problem to solve is client specific token bootstrap I could you go there for bidding baby cot for bidding what\u0027s a envelop mandating must not just basic as a base without Then There is obviously it forbids not TLS everything has to be over - yes but it\u0027s I I think it is very far like you\u0027re gonna prop it all even our believe that our possible like impossibility to logout a lot of nightmares with Vedic yeah yeah we prefer like holding or together this is what we\u0027ve been trying to do except that we also don\u0027t want to be defining a new authentication specification because that\u0027s out of scope and we can\u0027t there doesn\u0027t seem to be anything we can just say you must like saying you must use it auth it\u0027s not practical either like you could you we can say you mustn\u0027t use basic you must use a bearer token and how you get that bearer token it\u0027s not necessarily vile oh but that\u0027s still these open if you\u0027re writing a client okay I need a Barrett Oken how the hell do I get this Barrett oak and bearer tokens suck as well so that\u0027s another I suggest that you post to the SAG list si AG mailing list and ask for somebody to look at this document from a security point of view and comment on what you might do but because of what I\u0027m afraid is that when this gets to the IAS G it\u0027s gonna get pounced on by the security a DS if we\u0027re doing basic off I think we probably need some security considerations C realistically so there was the recent document from mile which is again it\u0027s sort of a temp up based HTTP protocol doesn\u0027t talk a it can waved about authentication as well it sort of said you know so what also the alternative then is could we just drop HTTP entirely and say that you must use this over HTTPS oh so no it\u0027s already must be over HTTP okay "
  },
  {
    "startTime": "00:32:32",
    "text": "but that\u0027s that\u0027s a side issue it\u0027s it\u0027s it\u0027s not sufficient to solve everything but it may be sufficient to get past the initial issue so anyway let me Chris says basic over TLS is the only thing that\u0027s likely to interoperate as long as authentication is out of scope so it\u0027s probably the mandatory to implement for interoperability and I guess I agree with Chris on that bearer tokens are better than password over TLS for mobile devices as long as there\u0027s a way to expire the bearer token if the device is lost so I would actually answer that this is what\u0027s happening in the world is that a lot of big providers now are issuing an app specific passwords to each device and saying your bearer token is your username Plus this because HTTP basic authentication in two parts and part of a bearer token is you use an M part of the bearer token is this long-lived app password that you can then cancel when your device is lost and because the canceling a token is still going to be saying this is no longer usable and that\u0027s that\u0027s where the world is going at the moment because that\u0027s what\u0027s available well yeah I mean it\u0027s basically a nicer way of setting up that app password which so the user doesn\u0027t have to manifest around they just log in with their normal credentials and that\u0027s all handled on the background they yeah the the yeah this is the thing is this is not an issue that is specific to J map it is an issue with any HTTP API and so the solution I don\u0027t know is I think I think I don\u0027t think that we can solve this just within this working group I think unless anyone objects I\u0027m going to request an early sector review on it so that while we\u0027re finishing up the document we can get any comments from the security area about it sure that\u0027s fine I certainly think there Sophie the security considerations section will need a strong bit about basic but I think the trouble is that we if we forbid it we are basically removing the only real interoperable okay option for a lot of AI speeds take please take a stab at writing out the security considerations as a priority yep when you\u0027re done with that I\u0027ll ask the security Directorate for an earlier with you sure there\u0027s already quite a few in our at the basic yep okay so those are the main changes since last time so let\u0027s look through the remaining issues there\u0027s no actually too many kind of the real substantial issues to go we\u0027re hoping to get most of these resolved by March in the in London and then hopefully we can actually do Interop testing at the hackathon and ITF London as well beforehand if people have got fairly complete in plantations of a fairly finished spec so let\u0027s have a look "
  },
  {
    "startTime": "00:35:34",
    "text": "what\u0027s remaining in core so one thing we need to do is make sure we have sorted our plan versioning extensions which is obviously always going to happen with any API and my rough plan for this looks a bit like this so at the moment your method calls are an array which is what you post to the API we\u0027ll wrap that array in a top-level object which lets us add various kind of metadata properties if you like to the whole request Chris Newman I know has raised ideas of adding extensions on this in the future for things like you must commit the whole thing atomically or things like that but for now the main thing is that we can add it using property which behaves a lot like sieve it\u0027s not in to extend to specifications you have to opt in as a client to everything you wish to use if you don\u0027t opt in the server behaves as though it doesn\u0027t support it which gives you fairly decent yeah if the server advertisers which specs it supports in the capabilities object which is fetched at the beginning if with with your basically information about the session once you have some kind of authentication token however that is you can fetch this object that has information about which endpoints to hit for the resources and the capabilities at the server and the capability objects basically is a key of the spec name or preferably I think a URL to the specification itself so that if you\u0027re just trying to see what a server supports you see something you don\u0027t recognize you can just follow the link and you know find out about respect which would be quite nice and then the value of that in the capabilities object is an object with various information about that spec so for example for the male spec the capabilities object includes things like max mailboxes and stuff like that so that\u0027s the general plan it\u0027s not too complicated I think it\u0027s based on you know existing solutions that work and it gives you a way to move forward while not breaking old clients which is the main thing you want any objections or alternative proposals or ideas on that general shrugging in the room for those in meat okay yeah I mean we\u0027ve discussed this a few times before and I think this actually doesn\u0027t this assume that URLs are stable forever since Jeff no not at all I mean the the capabilities if your capability name is a URL yeah the the thing is that the so the specification will define its capability name which doesn\u0027t have to be a URL I\u0027m just suggesting it will be nice if they aren\u0027t for things like RFC\u0027s you can have a canonical URL I think which is a chore forever is a long time but can be reasonably stable I think I presume you when you say URL here you mean URI yeah I being loosen that\u0027s it the gym might my he\u0027s not kind "
  },
  {
    "startTime": "00:38:35",
    "text": "of an Emporium okay yeah it\u0027s not important to this functioning it can perfectly function without it being a URI it\u0027s just I think that would be nice if that\u0027s a suggested thing for future extensions because then it helps people developers who are examining new server if they come across something that I recognize to find the documentation on that of what the server can do my question wasn\u0027t URL versus URI but what my question was at URI versus non URI now that we\u0027re clear that when you say URL you mean URI it\u0027s so it\u0027s okay for this not to be a locator it can be something that doesn\u0027t resolve to anything so a you are n yes standard ones can be your ants in and can be actually located in ITF namespace but yes quite common yeah so I think that works the main thing I think design sense will be in in have to be in your domain in domain you own so that it enforces name spacing yeah that was the other idea of that is yet enforces name spacing through that okay good okay and this is really kind of the only other thing from core I think was looking very very good now this is a bit of bike shedding really but there\u0027s some inconsistencies in the standard method name we\u0027ve got rules we get Foose and set throughs but we have a singular phupho get through updates get through lists list updates which is both aesthetically a little bit annoying and also makes it harder to programmatically generate these if you\u0027re kind of doing automatically from by just giving it one type name and having it synthesized what the event what method names are cause you have to know how to pluralize something in mailboxes has es as opposed to something else so I think it would just be nice if we made this actually not to add s just keep it as is I actually I\u0027m proposing to keep everything\u0027s cool but then you still only have to specify one the main thing is the server you would never have to try and everything else you specify foods and then so these are some suggestions so everything was yeah so like get mailboxes yes so everything will be mailboxes rather than I even more shrug but yeah I uh we could try and go all singular it\u0027s arbitrary I just think it makes sense to make it consistent and to have and to not require two forms at the same time does anyone object to letting you\u0027ll figure it out and accept what he comes up with sold great this is by jenny in its best we can wis pass the important bits there\u0027s a very similar quick naming bike-sharing issue on email we want to the mail spec now which is simply that it\u0027s been proposed we renamed the message object to email because there\u0027s some confusion around the fact that you have an ID on the message object and that\u0027s a J map ID and not the RFC 52 to message ID and terminology so that\u0027s just avoids that confusion because then it becomes email ID and stuff yeah so great move on from the blank cutting "
  },
  {
    "startTime": "00:41:35",
    "text": "stuff this is the main issue I think still to resolve and so this is hopefully what we can hash out to here and on the mailing list between now and March which is the message format in JSON of the RFC five three to two so I think the headers bit of this is fine and doesn\u0027t need have any objections it\u0027s gives you past forms of a lot of the headers which makes it easier for the client to deal with like getting the from as an array of objects with the name and email property and rather having to pass the string the main I think thing that we really are not sure about at the moment is converting the body into an and what form does that take is it just some kind of JSON representation of a mime tree which is kind of what the Gmail API does or is it closer to what clients generally use which is clients generally present a message as some kind of body which is a text thing or HTML representation and then some attachments which are files associated with that then of course even how you convert between them there\u0027s some ambiguity of what is an attachment we\u0027ve had some discussion on the list the last few days this is not quite as simple as it sounds and so I think this this is kind of the main thing of what what we want from this do we want both options or one of these what should it look like I think kind large open the floor to opinions here please say your name remote TV carries mouse key Google so my question why would be you do something different and provided providing the original mime structure because the point is to you want to provide like a mail the desktop transfer so you want to actually respect that rather than try to select say key bees that select the field but you want to propagate so there\u0027s a couple of reasons firstly it just makes it easier for client authors because I said this is this does not map to the presentation that is used in in clients generally it\u0027s which is body plus attachments the second reason is it also makes easier to optimize fetching so it\u0027s a to optimize the network usage I want to be able to say return me just the HTML body representation of each of these messages without having to fetch are some kind of overall structure object interrogate that work out which bits and individually fetch each each of those that becomes a lot more Bo overhead and complexity to fetch what I need to just display this message in a client or if have an option to get back the original message so this is one of the things which organized whether we basically provide both options so the client can request which it wants whether it wants kind of the mime structure or whether it wants some "
  },
  {
    "startTime": "00:44:36",
    "text": "interpretation by the server of that so that it doesn\u0027t have to bother passing that that that\u0027s what we\u0027re discussing the fast mail web interface intermediate code which I\u0027ve worked on for this fetches the body structure for all the messages it\u0027s interested in and then it goes through and finds the one where the same part number is going to be of interest to it and then it does a fetch on that subset of messages for each subset to actually fetch that part of the message so that it can generate the data to display on the web interface and it has to actually be it has to go through and filter the body structure and say well it\u0027s part number one point one on these ones that\u0027s part number one point three on these that\u0027s quite a complex set of code to find the display text I confirm because well I just throw the same thing in our implementation which is not J map yet but it\u0027s exactly the same problem and once you start dealing with multi-part alternative multi-part makes multi-part related all arbitrary nesting yeah yeah so yeah if you want just for display I mean returning a single block you know whatever text play no HTML depending what the client wants is probably so that\u0027s another question whether a single blob or one thing we noticed when we went looked annotation for this is actually it\u0027s kind of an array of blobs that we get so it\u0027s a flat array but for example if you had a message centers with HTML and text alternatives and then it goes through a mailing list which adds a text only signature as a next apart after it then if you were synthesizing this into a single property you\u0027d have to convert that to HTML and then append that to HTML to get an HTML version but then appending that to a HTML is hard because you don\u0027t want to stick it just after the end of the line if you just append them because that\u0027s actually not valid and you can do this and that what we do and it kind of works every third browser but it\u0027s yeah it might be nicer just to return the array because the client is easy to emit render each HTML text bit and then just pop them all together on the screen potentially I don\u0027t know so I think that\u0027s fast discussion well that\u0027s not an option the next interesting kind of worm this can of worms this raises is whether you have a set messages capability to add something more structured than just a single text or single HTML part yeah yeah this actually I\u0027m sort of on the opposite side because you probably want to have a bit more control on the client who\u0027s a client I mean make the simple case simple but if the client wants something more elaborate yeah I think the same messages would have to mirror whatever we do forget messages really like it doesn\u0027t make sense to do different something different there so if you if the get message can either fetch a mime structure or fetch this past version then I think need to be able to do the same with set if the client wants just do the past version does that otherwise it so I hit the we both went through at "
  },
  {
    "startTime": "00:47:39",
    "text": "the same time okay any comments from the online people on this yeah I have a gut feeling that well might have a a bit more discussion of this in the mailing oh yes people actually get their heads around this this is definitely more discussion on the mailing list and I think oh I don\u0027t know well I wanted to get people to start thinking about it here and we\u0027ll maybe send through some ideas of Basil\u0027s I said I think this is the meatiest issue still remaining to be resolved so worth worth a bit of thought the other thing that\u0027s come up kind of related to this although in some ways differently is wanting to be able to fetch partial body so suppose you had your HTML body where we\u0027ve service magically worked out a single text HTML thing to represent the body but that HTML thing could be three measures of text and as a client you only want to fetch maybe 100 kilobytes up front especially on the constrained environment so you\u0027re not wasting and then only if the user says yeah I won\u0027t see the whole thing do you bother fetching the rest so we don\u0027t have a way of representing that at the moment in in J map and so whether that\u0027s part of something custom for message or whether that becomes part of core in some way of some custom thing of determining for a string I\u0027m not sure about that it seems fairly limited in use case but yeah that\u0027s probably one of the more useful features of IMAP actually so yeah yeah I don\u0027t know if they can hear you I can\u0027t hear you I suspect it\u0027s one of partial fetch is one of the most more useful features of IMAP so but probably need to do that so the other Neil says every client I\u0027ve worked on wants a pair of HTML attachments to actually display the message content at the UI layer so somebody has to solve the problem at some point in the pipeline and it\u0027s better in my opinion if the server can so things like search and message body display are consistent chris says the structure I prefer is main inline blob or array of inline blobs plus array of attachments but the array of attachments has an optional question mark IMAP style mine part number this allows conversion between flat attachment view and mime hierarchy Jeff says but that makes the server responsible for some of the presentation decisions presuming he\u0027s going back to Neil\u0027s comment which is in my opinion not a server problem Neil says that\u0027s a fair perspective too but it does impact consistency with search hmm I think I don\u0027t agree on attachments numbering if if you want any structure a publisher to use IMAP you know number dot number that "
  },
  {
    "startTime": "00:50:41",
    "text": "would be probably the easiest way of doing it so does that mean you agree with Chris I agree with Chris I think and clients who don\u0027t want to use that they will just ignore it right right okay so in okay and I think it\u0027s actually it\u0027s a really hard problem if you have both the server and the client trying to decide which mime part was to show on the other hand in dust cloud you have to do you have to deal with also in line in line attachments like CID type attachment whether you want them or not in the case of partial body fetch you get something even a bigger problem you are you may cut off HTML in the middle and cut off HTML middle can have drastic different behavior in particular you may have like several that perform some kind of abuse detection but if the you are is a chaotic that yet twenty kilobyte Reis actually can be a good vector for abuse to have something different ending up showing up in the mailbox so that\u0027s a great point so if you start to cut things up try to do your job you have to think everything again yeah I think this is a good point there is certainly security issues that can result from chopping HTML or arbitrary points and I don\u0027t think it\u0027s it\u0027s not easy for a server to chop it off and manipulate it search to make guarantee it\u0027s it\u0027s safe in that respect i I on the other hand I mean the client you\u0027re still going to make sure it\u0027s not running scripts or anything like that but yeah it\u0027s a step of sanitization but things like you are ELLs I agree if he knew where is gonna be chopped you could change the URL that\u0027s coming through that is yeah that\u0027s a legitimate concern yeah yeah it\u0027s actually partial might be even more interesting more interesting for attachments you know especially if you progress you well you attachments at the moment with a quick home format you are you just get the blob ID reference and then you download the blob using standard HTTP so you can chop that off wherever you want as a client oh yeah or variant or whatever method you want is only really for stuff coming over the API which is many your text body HTML body that you might want to be able to chop off some other way someone on me deco tell me on jabber if you can hear alexei because in the room it\u0027s he\u0027s not coming through the speakers very well but he might be coming to you jeff says another option return i map style structure but the server tagged certain parts as body and others as attachments and the MUA can assemble all body parts for displaying and jabber says they can hear you fine so don\u0027t worry about it that\u0027s an interesting idea it might be one of the options we offer the main tricky bit i like i think that makes it very hard to optimize your "
  },
  {
    "startTime": "00:53:42",
    "text": "network uses which is one of the things that we\u0027ve been trying to make happen because you don\u0027t want to download all of the alternative parts if you\u0027re only going to display one i think that\u0027s quite a lot of waste overhead especially with large messages right and but if you only get kind of just the outline structure you didn\u0027t have to make successive requests once you decided which ones you want to fetch that data so you end up with more round-trip so it\u0027s it\u0027s it\u0027s a trade-off i know idea and we\u0027re back at the imap case of having to i guess at least would get messages you can specify a different different no you can\u0027t specify different fields for each message anyway no yes if you have to well oh yeah yes but if you think you did wind up with that same IMAP client problem of having to pre pass the body structures and work out which parts you want for different subsets of the messages and then make multiple requests i think you\u0027d have to return them as blob ids and then you just download them all as blob ids as if you had HTTP to feel download server that\u0027s not too bad with the overhead even those lots of requests but it\u0027s yeah i do like they wouldn\u0027t ban graphs handles some of this potentially it depends on the output format um that we come up with i think we\u0027d have to we you can\u0027t tell that until we have a bit more idea of what we want the structure to look like and what\u0027s returned yeah it was possible that backrests could help with this but at the moment it sounds like what\u0027s being proposed is returned to the client requires more processing than you know which why not to make the back reference stuff some kind of a virtue scripting language you can run on the server it\u0027s just very basic syntactical transformation to get results when previous thing and this at the moment sounds like I\u0027d be beyond that because it requires actual some kind of intelligent algorithm to determine which body parts you\u0027re interested in yeah I\u0027m just I suppose there might be sort of different types of clients basic clients might just want to have like single HTML for you know just extract or an array of HTML you know pieces as you say for inline parts and don\u0027t bother with you know trying to figure out what\u0027s needed III think that but most clients would want that if that\u0027s what they can get because I you know it\u0027s Neal said via the Apple clients all end up constructing that gonna be internally I know are well it does that internally as far as I can see from the display model we\u0027ve done the same yeah it\u0027s it\u0027s we basically have a bunch of render classes that generate HTML so equal they\u0027re called recursively and you only for multi-part alternate if you wanna face whatever you you can render yeah so this is being done everywhere as far as I can see and I\u0027m not quite sure what this non-simple Klein that\u0027s gonna do something different is because I haven\u0027t I guess if you\u0027re using if you\u0027re using email not actually as email is there "
  },
  {
    "startTime": "00:56:42",
    "text": "some kind of bus system instead then you start to get into a point where you might something different yeah I guess the question is where the client wants to know you know is there like two textual parts or a single textual part maybe it wants to put separate delimiter between them I don\u0027t know I mean that\u0027s sort of a bit obscure but you know that might affect you I potentially so maybe just getting away with the array of things might be good enough yeah you know I do think you your client still needs to be able to request like HTML version or text version if there\u0027s alternatives and maybe know that the other versions there even if it doesn\u0027t fetch it that\u0027s the other kind of thing that I don\u0027t have a solution for necessary that\u0027s great at the moment but yeah Neal says for the raw representation are we thinking really just pure raw or some kind of parsed JSON representation allow what the Gmail API does oh I think some kind of pastures well my goal was only over the API it would be you can fetch the structure and some kind of Jason thing more like the Gmail API or you can fetch this more with processed version which gives you their bodies and attachments which we seem to think most clients they\u0027re gonna want you can always pitch the Roar or RFC a 2 to s it\u0027s called in the IMAP standard via the blob ID as well yeah but I would have thought if we can if we make them if we do the API right a lot of certainly new clients would never do that because why write all this complicated parsing code when they don\u0027t have to and we don\u0027t want to require that unless you\u0027re doing something really obscure that\u0027s always there\u0027s kind of the escape hatch so we don\u0027t have to cover every single option you know we want to cover all the common things and yeah you really have to you can fetch that but you shouldn\u0027t have to for most cases yeah Roy\u0027s probably for you know import/export type thing is or something very elaborate you know some kind of analysis of message for display you you hmm well again we can actually probably do this on the server it says signature verification to which Alexei responded we can do this um so yeah obviously if you have keys that only on the client then yes you\u0027ll have to download the raw water be able to do any kind of actual verification of signatures or even decrypting encrypted blobs potentially that\u0027s yeah there are some interesting interaction whether something I I mean I think this is where we\u0027ve well for now we kind of said that the escape hatch of devolve always kind of handing that but yeah if if the client is the one that\u0027s to cookie I don\u0027t see if the server is the one that has the keys then it can just present all this anyway doesn\u0027t matter if it\u0027s on the signatures or can do all the job yeah so even if it\u0027s epically encoded single part application "
  },
  {
    "startTime": "00:59:42",
    "text": "/ whatever server can actually decode and presented in a mime format which is much much nicer than having this in the client that\u0027s actually would be a very nice feature so yeah server can\u0027t decrypt but the server can verify signatures yeah okay so that does sound like that would be valuable if we can represent that in a more high-level way maybe we can add you know small issue / - eg request for spam signatures yep would you like to help specify what it is you think would you look like sure great Alexey how\u0027s she doing I was just fixing this you know the last week so yeah I have some idea so Alexa has an action action item to provide text Neal says I agree it would be very nice to have both formats for quote full mime access having the raw raw representation is useful for cases where you want to move a message between two accounts as was mentioned import/export well we all there\u0027s actually want to perfectly preserve the original message source yeah I mean yes if the two accounts on different servers yes then you would need that I me know if they\u0027re two accounts you have access to via the same came up API there\u0027s a method just to copy them over without having to download and upload it again but yes that\u0027s true so yeah we think this is gonna be yeah you you\u0027re always going to need access to that for those kind of cases but as far as possible we would prefer you not to need it okay ah I think that\u0027s been a good opening discussion of this will definitely continue all this on the list I think we will be able to agree on something is it\u0027s not like everyone\u0027s got wildly different opinions but there\u0027s certainly different ideas which we should have a look at try out see what they actually looked like with real messages and then decide and stuff said hopefully get this over the next couple of months because yeah ideally we\u0027ll have pretty much all the issues closed off by March and start doing some in shop testing them okay Chris for security considerations will have to say something about HTML security filtering it\u0027s safer if the server has a whitelist HTML filter by default but that increases complexity a lot an extension to request HTML whitelist filtering by the server would be very interesting to client authors yeah we\u0027ve kind of got away from this in that we found you can now with with more modern browsers you can often do better filtering in the in in the browser because you have the same Dom parser rather than a different one which is often where bugs creep in when the dump are slightly different to what actually ends up being passed in the browser okay definitely suggest like having both approach in the case because unless a "
  },
  {
    "startTime": "01:02:44",
    "text": "client knows exactly what\u0027s going on the server like displaying I\u0027d push displaying raw HTML will be like suicide or you have a lot of side effect possible depending on implementation depending on which platform you\u0027re running on so you have to be extremely defensive but at the same time definitely good to also have like a client client signed either in particular if you have any mutation possible on the client yeah I know the difficulty would be on the server again he said you don\u0027t know what the target client is and what\u0027s dangerous may be slightly different depending on the user agent ends up rendering it so I think regardless of what happens on the server the clients always going to have to do its own filtering and so the question is whether there\u0027s extra value and having the server do it as well or whether we found that these days almost it\u0027s the server doesn\u0027t add as much value and 10 and has more likely to mess up the formatting and stuff because it doesn\u0027t have as accurate a pass tree now admittedly you there are now full html5 compliant parses that we could go find as well for a server that we\u0027ve tended to move towards doing this on the client okay but it\u0027s a good point we should probably still maybe discuss bit further whether we want that as an option but it\u0027s it\u0027s tricky because again you certainly couldn\u0027t specify a particular algorithm the server would have to use and the client can\u0027t rely on it 100% because of that anyway so there\u0027s a question of how much you\u0027d win if you\u0027re writing an object light knob tree server I think okay last - couple of minor points that mean some discussion of ACLs in the last few months in particular you know bring back a some kind of mapping for an ACL on mailboxes for whether you can edit the key words and you need if the messages in multiple mailboxes you\u0027re gonna you need permission on every mailboxes and I think to be able modify the key words because the site that\u0027s the only eyewitness but one thing that has been brought up is that the scene keyword is kind of special in IMAP there\u0027s a lot of special casing certainly in this iris IMAP server for this versus other keywords it\u0027s included in this computed count on the mailboxes object is unread Affairs and unread messages which is actually kind of flipping the behavior because everything treat stuff as unread read yeah and there\u0027s obviously different ACL for it and IMAP as well so kind of there are two questions that kind of raised for this firstly do we want to keep a separate ACL for this in geomap - or just merge it with single ACL for all all keywords the second question comes from that if it\u0027s a separate ACL does it actually make more sense to take this out of keywords and map it as a separate is unread property on the message object "
  },
  {
    "startTime": "01:05:45",
    "text": "because that means your ACL affects one particular property rather than kind of various a bit of that and also just cuz it seems to be quite special in various other ways maybe it\u0027s special enough that we take it out of keywords I think one of the downsides this is it does mean there will have to be more to plication off things like the message list filter and search where you have things like is all in thread the all in fred has keywords some in that is keyword you need to mirror that with all in thread is unread some in fetters on red etc so that is a little bit of kind of duplicate of stuff that ends up there but any opinions on on this Alexi as far as ACL slight preference for having keeping parity with M I\u0027m a pace yells back okay for people who implemented it just makes it slightly easier but of course your specific server can always bundles rights so if you\u0027re writing one from scratch you probably don\u0027t want to have them separate anyway so you just or not you know okay so slight preference police having separate Al and about separating it as a separate property a bit ambivalent yeah I\u0027m a bit as well I think I some ways I like it in some ways I think it\u0027s just a bit annoying having a separate I don\u0027t know well the only issue is if you are not allowed to see keywords you don\u0027t want that to prevent you from knowing whether a message is seen or not that\u0027s the concern hmm but the ACL is about writing it not about seeing it so the other way around then if you can\u0027t set keywords does that mean yeah there\u0027s a there\u0027s a reason it was separated and IMAP so that you can view a message and have seen flag set without being able to you know do the other keywords so it\u0027s sure but you could enforce on the server where you try and set the keywords property if you try and change anything other than seen it gets rejected if you don\u0027t have that ACL it doesn\u0027t need to be a separate property to have it as a separate ACL it\u0027s just maybe that be nicer yes okay any the people online got opinions on this was this a another kind of just ambivalent pick something can you remind me of somewhat related the we have deleted no there\u0027s no deleted FAQ I\u0027m in favor of it being a separate properties Bron here largely because I think it\u0027s simpler harder to get wrong this will affect search yes is it a problem it will affect search you know you need to look well you will have to special gazing for CMC in a flag as opposed just I\u0027m I\u0027m asking I\u0027m not sure it\u0027s a big deal "
  },
  {
    "startTime": "01:08:47",
    "text": "which is sort of pointing out that at vote hmm I mean the main thing is it makes the mapping from my Maps slightly more complicated I guess because you\u0027re mapping a keyword to a specific property rather than just mapping them straight to the keywords property but it\u0027s not you know it\u0027s only one special cases they were like you know even to his already slightly more annoying but you know of just one it\u0027s yeah just about bearable and Chris says it was separated in IMAP because of the idea of reading net news via IMAP with dot news RC to which I responded do we think that\u0027s still an important use case to which he didn\u0027t respond but he said I concur with Alexei with slight preference for separate ACL no preference on same or separate property okay basically the same as me yeah I can tell you that in the Gienapp proxy which is pretty dumb and does no smart stuff about keywords I still keep the ease unread as a separate database column field because I need to be able to count on it to get the counts so it\u0027s all it\u0027s actually duplicated storage at the moment because I want to be able to generate the keywords properly just by dumping a blob but I still have to keep a separate copy of it for counting on because it is the one counted flag counted keyword as well we have in this bag but going go count everything says Alexei but it going back to going back to Chris\u0027s point about the reason that we had it separate was to actually prevent you from setting scene flags in certain cases if we don\u0027t have that need anymore if we don\u0027t have that you case maybe the whole thing goes away by saying the scene flag is not covered by ACLs it becomes merged with the single ACL if I said all key words no what I\u0027m saying is separate from that that the scene flag is not that there\u0027s no ACL but effects as you know you always have a seam right on the guard if we have no use case anymore that wants to prevent you from setting scene flags when you look at the message is there a youths case that wants do that but not prevent you from I\u0027m not sure all the keywords I don\u0027t know so in this cyrus i map implementation scene is per user optionally shared but defaults to per user whereas all the other keywords are shared there\u0027s certainly a use case for allowing people to have some own some of their own per user data stored about things without being able to change it for everybody in any case where you share information yeah and there are some male stores where you\u0027re me allowed us had seen and all other flags okay I I think it does sound like we want "
  },
  {
    "startTime": "01:11:47",
    "text": "probably one separate sales I seems to be a slight majority opinion on that seems not huge amounts either way on whether it should be a separate property or not all right I\u0027ll think about a bit right up the list maybe and we\u0027ll see if there\u0027s any final comments on the list and then make a decision one way or the other I\u0027m good okay and then I think this is the final thing again this has mainly been discussed on the list what happens when you destroy mailboxes if you had messages in it so the original spec basically said this was an errand just rejected destroying the mailbox which is the kind of more J map thing because it requires all of the changes to be explicit so the client always knows what has changed was this is kind of implicit but it is pretty useful to be able to destroy a mailbox and just remove it from all the messages so the suggestion was we add an extra argument just for set mailboxes where we can say if this was the last mailbox this was in you can you need to either move it to this mailbox you can say that or you can might be able to or you say delete the message as well that\u0027s that the main concerns over since many ways it\u0027s that if you just omit this argument at the moment that\u0027s the same as null which is the same as delete the messages and maybe that\u0027s a too risky default maybe if you omit it it should be an error to try and destroy the mailbox without messages if you don\u0027t explicitly say I want to delete them oh I think I don\u0027t know I find it to be reasonable default just delete message delete mailbox with all messages in it if if you want to ask you need to ask that user in the UI before you issue the correct so that once you decide to do it you know you want to do it you don\u0027t want to do it like you know 50 commands to direct shave the same right note that was what I was gonna say the the thing is it\u0027s not like the user is going to be typing in a command that says delete the mailbox the users going to use a UI to do it yeah right well yeah anyone who does that deserve what they get the user is going to use a UI and the UI can decide whether it wants to prompt the user to you know worry about the messages or not so I so I don\u0027t think there needs to be any special incantation if you delete a mailbox you delete a mailbox so Barry you\u0027re just just clarify you don\u0027t think we need any extra argument at all it\u0027s just you want to move them out of the mailbox first the client needs to do that and then delete the mailbox otherwise the specs the spec says that the spec should say when you delete a mailbox any messages in it are deleted if the client needs that behavior to be different the client needs to deal with that on its side to be honest I don\u0027t mind the extra parameter I think I\u0027m more concerned about the default mm-hmm but and what is the value of the extra "
  },
  {
    "startTime": "01:14:48",
    "text": "Prowler if you want to move all orphan messages to another mailbox I don\u0027t know whether the point is that the client knows whether there are messages there or so what is the value of making the client put a parameter on or not when the client can deal with moving the messages or not if it wants to I haven\u0027t answers this you could have a mailbox with a million messages in it and you don\u0027t know how many of them are also in other mailboxes because a message can have multiple mailboxes and then when you delete their whole million messages you\u0027re not actually deleting a million messages you\u0027re taking that mailbox ID of 900,000 messages and you\u0027re deleting a hundred thousands because they didn\u0027t haven\u0027t have a reference somewhere else at least with if in state you can make sure that you don\u0027t delete a message that you never knew was there but you you still wind up deleting messages because they didn\u0027t have a reference to another mailbox okay maybe I misunderstand what we\u0027re talking about here then so this is if if if this if this flag is not set then it will still delete the mailbox and get rid of the messages in it as long as none of them are actually being deleted okay so when you destroy a mailbox you remove that mailbox from well one option is you remove that mailbox from every message that it used to be used to be in it right except that if yet if the message was only in that mailbox that is destroying the message as well I understand so be the extra argument was meant to be if this is the only mailbox it was in then move it to this mailbox rather than destroying it otherwise it\u0027s fine because it\u0027s already in something else I am NOT a sort of like you you moved it from inbox to an ACK another folder and you want to return everything to inbox on delete so I can live that so I the discontinuity don\u0027t have to be the default base there\u0027s a discontinuity here between set messages and delete mailboxes you can\u0027t set a message to have zero mailbox IDs as a way of deleting it but deleting the mailbox as a side-effect sets the message to have zero mailbox IDs that destroy which destroys it but we don\u0027t destroy messages by removing all the mailbox IDs so it\u0027s a different way of destroying a message I\u0027m not sure it matters that much terrorists so okay I guess yes what kind of poll of people online and in the room would anyone actually use this argument on last reference move to or if just if you the kind of if the default behavior was it destroy the message if that was any mailbox was in and that was the only behavior you got that that\u0027d be fine Neal says my two cents delete a "
  },
  {
    "startTime": "01:17:51",
    "text": "mailbox deletes the messages unless they\u0027re also in another mailbox so he doesn\u0027t see the nice doesn\u0027t even need for the parameter which I which is how I feel but I don\u0027t object to have I can find all the messages that are only in this mailbox and no other with a single search command right yes so so so that\u0027s well yeah I mean if you really want the behavior you want you can add an extra command so I\u0027m a bit ambivalent but I can live with extra flag sure aiya well the same time adding stuff that no one\u0027s gonna use is a waste of time right the other side of it of course is the client can decide whether it wants this feature or not so okay so servers have to support it clients don\u0027t yeah okay so it doesn\u0027t seem to be anyone that here are those I think there was some of them Lynne Agora that was concerned for default deleted messages business on my own else\u0027s concerns so I\u0027d say that\u0027s probably still rough consensus that\u0027s fine I\u0027ll do if I don\u0027t call on the list with again summary of that but I\u0027m leaning towards maybe just a meeting the whole argument as I no one\u0027s gonna use it what\u0027s the point Chris says I think a reference to the trash folder is an interesting value for that parameter that is exactly why Drew\u0027s thinking hmm yeah comes up to the microphone he has a voice Pete Resnick if I\u0027m implementing trash as a UI element if I delete a message from a single mailbox even if it belongs to multiple mailboxes does that UI wise make a copy in the trash or not I am what am i exposing to the user am i exposing multiple mailbox existence or is it multiple messages that happen to all point through the same message so I\u0027m I\u0027m app has is a very odd thing with implementing a client-side trash folder and J map doesn\u0027t change that but still if you have not retrieved the message to the client you can\u0027t put it in a in a client-side trash folder well Lea so the the any reasonable IMAP implementation is going to have a server-side trash folder right reason so if I\u0027ve got a server-side trash folder yes and a message in multiple mailboxes not the Trash folder yep and I go into one mailbox and I delete the message yeah what is the user experience supposed to be like what am i exposed this would depend on your client but I would expect it if it\u0027s actually labeled "
  },
  {
    "startTime": "01:20:51",
    "text": "delete I would expect it basically to remove it from that mailbox and add it to the trash there\u0027s also in the other mailboxes and if you empty your trash it wouldn\u0027t delete it from the other mailboxes it would just remove the trash so the user experience is those are copies even though they all the facts are the same they are the same ID yes so given that if I delete the mailbox mm-hmm one choice well one choice is that\u0027s the problem one choice is to say to delete the mailbox is to remove this mailbox from the messages and add trash to them right that would be one way to implement and and then I don\u0027t have to worry about this move it on last because if the user sees that as deleting this mailbox deletes all these messages maybe they all well I mean the client can honestly do that beforehand they can make sure one moves everything out to the trash before it\u0027s right let\u0027s say yeah this the operation becomes a add trash to all these messages remove this mailbox from all these messages that\u0027s what delete the mailbox is and you know the only issue with that is if you have a limited size trash folder then you can wind up flushing your trash with messages that you didn\u0027t really need to trash there\u0027s some stuff from jabber Robert says wouldn\u0027t an on last reference move to imply an account global lock on all messages for this operation sorry meant for all messages within at least this mailbox well and then there\u0027s something else but I mean he might sue says depends whether it\u0027s a ton well that the a single method call it\u0027s their method method calls must be serializable so potentially yes within the method call you would need to lock the account while you\u0027re processing those and Neil says maybe deleting a mailbox should move the whole mailbox to be a sub mailbox of the trash I you can already do that by just setting the mailbox as as a photo I don\u0027t think that needs to be that\u0027s different deleting there okay Alexi all of these separations can already be done you know the methods so maybe we just need some text around saying that the default behavior you just you know you delete all messages and you delete the mailbox you know it\u0027s all gone if you want days to day you know if you want to move mailbox on the trash to this if you want to move into trash do that yep that\u0027s Chris response to Robert says it could be implemented with a conditional store on the messages list of folders as an alternative to global lock okay um I\u0027ll yeah I\u0027ll send it "
  },
  {
    "startTime": "01:23:58",
    "text": "around this one small time but I Oh Pete\u0027s gonna come yeah this is definitely by cutting a point one other solution to this problem is destroying a mailbox is not an operation right you want to destroy a mailbox you search for messages that have that mailbox and say remove that mailbox from those messages but you need to have a message right you want that that mailbox either to be in a list of mailboxes with zero messages but yeah thank you people definitely have mailboxes with zero messages in it and well how do they work flow like it will have a do keep them all yeah yeah okay okay is that\u0027s probably enough by actually on that it doesn\u0027t seem like it really matters too much either way based on who said so the solution hey Pete you could have an anti message which if you moved into a mailbox made it minus 1 and then it removed from the list yeah okay I think there\u0027s all the specific issues I thought we should discuss does anyone have any other particular ones they want to bring up this session I can try to go through my notes you know some of your changes especially about sorting they hand-wave about how we sort I think that needs to be specified and we have a collect collation registry for this or at least you know prescribed by default sort order I think using Unicode and there is also in some places you say it\u0027s case insensitive and for Unicode oh my god you just made John John Clemson very well what you need language tagging to do sorts they are there is no relation does the case insensitive is only I believe the only place has mentioned is in text search and it\u0027s not as a must is as a advise for things to try match because the search is specifically not still need to specify no because the search is specifically not absolutely defined because the indexing is getting different like Gmail\u0027s indexing or fast was indexing know what they\u0027re not gonna change and i think you need to specify we have a not stupid IMAP implementations as it is and searches i think it would be nice to recommend that you know sensible thing for people to do and people can improve we should recommend put in their expected search behavior realizing that some implementations will do it differently but we should have a reasonable expected behavior that\u0027s not that\u0027s kind of what stuff mean that\u0027s what happens without with their there are IMAP implementations that do fuzzy searches even if you don\u0027t ask for them and stuff like that but about that sort of within their expectations because it\u0027s more you know use a visible thing right but saying "
  },
  {
    "startTime": "01:26:59",
    "text": "that you know and by the way if you\u0027re doing case insensitive this is what we meant i think that that\u0027s is useful thing sure is uh which i don\u0027t think is any way i\u0027ll i can\u0027t really send you some yeah yeah go check the header names yes are lowercase but they\u0027re asking any form of C 5 3 2 anyway so it doesn\u0027t matter so I ask you only your you\u0027re in good shape by saying yes sensitive or case insensitive it\u0027s only the utf-8 that you have yeah III actually don\u0027t think there\u0027s any way I wear it that\u0027s mandated I\u0027ll check again actually this reminds me there is another issue with you\u0027re searching for header fields especially searching for values that for header fields you don\u0027t know the syntax of the document says Uther\u0027s decode them to utf-8 which if you know the syntax you cannot do this you\u0027re probably what you know even if it looks like you know RFC 22 31 and coded word you shouldn\u0027t be touching it because if you probably should just search for it as specified but if you\u0027re searching for lightly not expected behavior if I have a subject line no no I\u0027m not talking now for header fields you don\u0027t understand ah this is like okay June my 20 spam engine added X - you know anti-spam not score but I don\u0027t know keyword or whatever mmhmm but so if you have the the encoding it\u0027s still I think expected behavior is still going to be to decode the field it would be very unexpected no I can\u0027t expand you know in wait like RFC 22 31 is not defined for Hydra feel for you know it\u0027s not generic it doesn\u0027t apply generically it all header fields understand it only applies to known Heather field so I think it\u0027s like if you want to search for message ID so realistically if you had a Russian anti-spam engine that put in an anti-spam message that said in Russian this is a pile of junk and you were searching for that you would expect to find it not expect to have it fail to find it because you didn\u0027t decode the field even though it\u0027s kind of non-standard behavior it\u0027s still common to encode an an arbitrary field I don\u0027t think you should yeah cheer Pete\u0027s comment Alexis\u0027s don\u0027t mess with stuff you don\u0027t understand so I know there are clients or a fact that do 22:31 processing over anything they\u0027re gonna display no matter what now should that reflect itself in search I don\u0027t know but clients do that clients just go "
  },
  {
    "startTime": "01:30:03",
    "text": "ahead and eat everything now so I just think that if you don\u0027t decode the fields you get you get user surprise no you typically if you want to search for specifically so if there is a fixed small set of fields that we know about like from date subject you know to GC decoding there is absolutely fine because they are well specified they\u0027re structured header fields everything you don\u0027t else you don\u0027t know about is unstructured that\u0027s why don\u0027t mess with unstructured but which is everything else it says it\u0027s done it happens and it\u0027s well-defined enough that if you look at one of these fields you know it\u0027s been encoded and you know how to decode it so even including our Haven and we have actually an extension where you cannot say I want to search as specified without decoding or I want to search for decoded failure so may I I\u0027m saying that we might need a knob for this I\u0027ll buy that to control that by by doing a raisin issue on github with that and you you have other notes as well I the other alternative is we can just say it\u0027s a quality of implementation issue client I mean a server that doesn\u0027t do the decoding when the users of that server expect it might become unpopular who knows but but I I would like I wouldn\u0027t mind having uh you know I I think generally ideally when you fetch the header it\u0027s going to decode it so that it displays as the user expects it display and if you search it matches what the user saw when if it has a structure you don\u0027t understand if it\u0027s not for display you might fetch it for other reasons because because you want to search you know [Music] anything else anybody on Jabbar having they want to chat about Oh Alex I\u0027m I think we decided that all the game app keyboards will be starting with Stoller but in IMAP it\u0027s actually not a requirement it\u0027s not all but the cysts the we\u0027re doing is mapping the four system keywords from IMAP instead of being slash scene slash it\u0027s a dollar scene dollar okay I think when you\u0027re doing search for various things you you include dollar keyword in there so maybe you should be a bit more careful saying well that\u0027s the name of the keyword is dollar flag to know it was as in as an "
  },
  {
    "startTime": "01:33:05",
    "text": "example of syntax it says dollar keyword as opposed it\u0027s not the name of Cuba oh yeah editorial yes yeah yeah that\u0027s public infusing yeah crying Jason Alexei continues to look at his notes I think you have a minor thing I can send it an email when deciding for message submission you know what\u0027s the primary what you are going to put in mouth from by default you assume that sender can have multiple values I don\u0027t think sender can have on the front can have multiple value Sanders can\u0027t I mean it\u0027s sort of the way it\u0027s it\u0027s war that you take the first one even from the sender but in the center you can only have one so I mean it\u0027s a Magna thing the past version the message yeah there is some text about forbidding messages with the same message ID in certain cases I\u0027m slightly uncomfortable with this I suspect this won\u0027t be that email ID and message yeah I think the decision the whole reason we\u0027re gonna be named message to email ID if I just was the case is a good good taste point they\u0027re saying we should definitely name yeah because I thought you know okay well some people want to preserve all copies of messages some of them go through mailing they definitely have go direct you you will have duplication so you have you know I I I don\u0027t believe there\u0027s any where it says you can\u0027t have two messages with the same RC a to change ID I think that\u0027s probably okay it may be worth having an editorial thing to say that messages with the same RFC message ID can have different email ids if they have different colors although or even if they\u0027re yes I mean Gmail I think does not allow multiple messages with the same message ID that correct they\u0027re a to two message ID but but but the other difference is met its message suppression right now these servers do even if you try it actually what happens we try not load like bar I\u0027m Apple something is it only on delivery it stops that or was it at any point Neal says Gmail D duplicates them yeah right so it lets you upload and then it one of them just okay well anyway the J Matt wants early not forbid that we may want to mention that it may forbid that just so Gmail can have a chance of meeting at all we could just probably not bother email specs already strongly recommend that you don\u0027t have duplicate message items I think that\u0027s good "
  },
  {
    "startTime": "01:36:05",
    "text": "well yes but as I said reality and receive stuff by message list and various other formats which are slightly different and also say my study I don\u0027t think there\u0027s anything in J map that forbids the server from doing whatever it feels like at anytime to you that\u0027s true so if you don\u0027t nice to delete the other one then it can still do that yeah that\u0027s true but we don\u0027t need your help yeah as long as you don\u0027t prohibit what people are already doing in a right yes absolutely yep I think that\u0027s it hmm says Jeff what about drafts with missing message ideas the believe it\u0027s already in the spec the sir is meant to generate a message ID if you try and create one without explicit one set in the headers so the stored version on the server must always have an eight to two message ID hopefully most of it I don\u0027t have control absolute you can set your own as well so that you can preserve it after a draft has been created if you can you copy the dog what happens if you upload a message that doesn\u0027t have an RFC message ID and then import messages on it sorry um up to up upload a blob and then call import messages too well I would say it\u0027s up to the server so one option is the server can reject you is an invalid message because they can always reject whatever you blob you upload is not being a valid I see HTT message or the other option is the champ doesn\u0027t actually lie on the eighty-two message ID at all so there\u0027s no reason why couldn\u0027t exist in the game App Store now to be honest you really wants to the interesting question whether the blob gets changed in that case that is an interesting case I\u0027d yes yes because say whether it\u0027s allowed to modify it yeah because there\u0027ll be other cases whereas invalid characters and stuff or infamous moment coding of headers it probably should be allowed to do that yeah definitely or do you want to change it be valid Nicholas I\u0027m Nicola so it is like fairly common behavior that once you upload a draft to a server which when you feature fit you fetch it back in the AP afterwards and you may have seen like several sites and addition of the compounds yes the server can add extra heaviness to it and headers as well the HTML if money you have HTML already being cleaned up you need the you need things like that to actually avoid some kind of reflective of RBG where you upload mostly HTML HTML with one row client but will end up on all the other clients mm-hmm so you cannot trust draft either so you need to sanitize it we so yeah so I mean Jamie already has a in just the cool "
  },
  {
    "startTime": "01:39:07",
    "text": "syntax the server is allowed to return any properties that it changed when you create something so we can we can just specify that it\u0027s allowed to change any of those properties and there\u0027s already a method for it to tell the squire what it changed if you change anything so you can see so when they upload it immediately no yes I change these these these properties are now this because I did this okay so we just need to make clear that it\u0027s allowed to make those changes jeff says importing a raw email is okay with respect to the server changing it up since the important email can have a different blob ID if I remember correctly yes I think that is correct yeah so that should be fine I think we just need to specify that that is permissible in the spec cool any other business finally okay call for other comments going once all right that didn\u0027t take long you have any bathtub provision in case one of the attachments should not no longer being downloadable one of the attachment of some far they\u0027ve won a one common example that would be like server-side antivirus I would say you should not download the file I am there\u0027s no specific provision for the moment but there\u0027s two options one option is obviously the server can always delete the message and recreate a new one with a different message ID which is the same but without the attachment so different email ID not RFC 882 message ID so they say you receive an you you have an email in your inbox yep and that message have an attachment and the server after this I determine that attachment have the virus and she it will fail like you cannot fetch it anymore and you should actually provide the information why why you are not able to so it could the cervix certainly refuse to return the data when you try to fetch the blob ID so the blob ID represents the actual binary data of the attachment we don\u0027t have a specific error response for the server has decided this is dangerous but we could certainly add that as a response code it\u0027s a standard HTTP fetch so I don\u0027t know if there\u0027s a standard HTTP response for the services I did not return this data because of security policy but the the other uh I guess the other options yeah if we could if you want a way of returning this kind of in the past message format to say this attachment I so you want the attachment to be there so then users know that wasn\u0027t attachment but just the same meaningfully Rama error explain to the user why why that fine not while you have an arrow explaining the arrow to user so that sounds like it should just be an error if you try and download the binary data then throw an error return from the the "
  },
  {
    "startTime": "01:42:07",
    "text": "blob downloader essentially ever is feeling servers yeah yeah I understand yeah yeah so we can definitely add that I think as a yes policy refused error or something if you try and actually download the binary data obviously if the client downloaded it before with a server decided is bad and it\u0027s cached it there\u0027s not much you can do unless the client checks again later that\u0027s where if you\u0027d have to actually modify the message in some way so it got the update another point is from earlier description you you suggested like a possibility for the server to decide what the client would see like a design like how you had to radically decide which body part to show that\u0027s something we discussed in the moment yes is being one question what does he believe some why what provision you have for for seeing a client to redownload in case it doesn\u0027t have an up-to-date Sarah decided version then I say the server decide like I took for the time after you don\u0027t know date the body the modified body decide to change the content they say there was a Bergamo server-side hard to get the client to research the updated drops you\u0027d have to change the ID of the message because the meta mess a message like an IMAP is immutable so it\u0027s it\u0027s the J map message ID which at the email ID so this is why we\u0027re going to rename it from message to email so to avoid this confusion so yes the the J map email ID which is just an arbitrator assigned ID and it\u0027s it\u0027s not from the message content itself it\u0027s I mean it could mean it\u0027s everything from the method everything from the old message and get the new one in yes it have to basically replace that message with a new one which had the different not necessarily because it depends on how the server does it the attachment has a blob ID which represents the binary data which is the bulk of the attachment and if your server does that by like char 256 of the data which is kind of what we do then you would see I already have that if you download the new message but the message reference is the same blob ID for the date with the attachment so go so I already have that case so it wouldn\u0027t necessarily have to download the whole attachment again not type it\u0027s not tied to the message-id no independent so yes you could get a new message but still keep the case data for the attachment Chris says actually for the virus case you want the client to know it should remove a copy of that attachment if it downloaded it can be done as an extension dollar contains virus flag an attempt to fetch part returns a useful error yeah yeah no ways you could you can signal that as I the other option would just be to replace that message with one that didn\u0027t have the right Chris\u0027s point is that the you would have to make sure that the client knew that it needed to actively get rid of this well if you replace the message "
  },
  {
    "startTime": "01:45:07",
    "text": "then you\u0027ll get push updates and I\u0027ll see if that\u0027s the only message that refers that attachment it will fuch everything for the case yeah but yeah ok yeah once it goes outside if you\u0027ll see you mean there\u0027s nothing you can do about what john levine stumbled in is now signing the blue sheet and has doubled our attendance in the room that\u0027s dr. bit I\u0027m exaggerating any other comments ok back to other comments going once other comments going twice and thrice and we\u0027re done so this is the end of the J map session thank you all for coming and we\u0027ll see you in London and on the list exactly thank you very much folks from meet echo and jabber I know it was it\u0027s an odd time for some of you so thank you for attending you "
  }
]