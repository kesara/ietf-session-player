[
  {
    "startTime": "00:00:19",
    "text": "[Music] we\u0027ll see was too early for then this was Thursday so is too early take whatever work he needed with his management we uh startling thanks for checking this is this is great all the power plugs the chairs have no no [Laughter] JavaScript [Music] "
  },
  {
    "startTime": "00:03:28",
    "text": "so they might be showing up the blue sheets making their way around yes very good very good good morning it\u0027s a Tuesday morning at 9:30 you are in cat port hopefully you wanted to be in cat port I think dkg has volunteered to be our diver scribe Martin is taking minutes mm let\u0027s see anything to deal with before we begin virgin sings okay welcome to cat port this is the note well as usual is this the latest note well I never know doesn\u0027t matter oh is that people understand that it exists and that they have responsibilities so it has been in the past translated into Arabic without people actually objecting so go to the web page understand your obligations for already any any agenda bashing I think actually the the said that not on the agenda explicitly is 7710 this but there\u0027s the slide after this is about that so the chairs section may expand from administrivia to administrivia plus 7710 bists and take more than five minutes any other agenda bashing carrying forward okey doke so after way too long a delay I finally got a - zero 7710 Biss uploaded it\u0027s missing a handful of citations I need to find one for content negotiation but it clarifies that the URI that we\u0027re talking about in 77 this is the API endpoint says capture portals may do content negotiation depending on the accepts header in there if they don\u0027t see cat port or whatever the tell me you\u0027ll have to remind me what the what the type is application can\u0027t port JSON something captive - um "
  },
  {
    "startTime": "00:06:29",
    "text": "and we remove the recommendation that you should use IP address literals and we in fact invert it you should not use IP address literals and I tried to suggest that we use this u RN IETF params kept port unrestricted as a URI thing to to say district to let clients know that they can just not bother with Internet connectivity checks and just proceed straight to getting on I don\u0027t know if this is useful but it seemed like a way to short-circuit or to indicate that you could short-circuit they kept a portal connectivity checks there was the question of where additionally this might be made available in discussions with one captive portal vendor last week it seemed that the DHCP on link infrastructure was not always under their control in a substantial portion of deployments furthermore in the ones they did control changing DHCP parameters might be seen as exceptionally risky and so they asked whether the capture portal API could be made blue sheets anybody you know thank you so they asked whether the capture portal API could be available via some means other than DHCP or Ras given that they wouldn\u0027t be able to I asked if they could deploy 7710 URL options in new deployments and they said yeah yeah sure sure okay um but it\u0027s not gonna deal with the existing deployment base so most likely most of it so could we do something else and one idea that came up was in the redirect HTTP redirect of the sacrificial clear text could there be an HTTP header that said not only location : redirect destination something about where to find the captive API portal ed point I don\u0027t know what people think about this this is not in 7710 this but I do think we should talk about it I can and fully intend to send something to the mailing list about this I don\u0027t know if you want to talk about it now what people think about this idea and I don\u0027t know what\u0027s required for actually sort of requesting an official HTTP header or X - the strict upper cable love\u0027s no X - so so I think we have a slide in the API URL specifically talked about this the last slide which is well I can I can give it a rewrite say right now is like it was just using the link header with a link thing but it does all read a suggestion in there I will see that in the HTML content or in the header in the header NH to be hitter okay yeah that\u0027s "
  },
  {
    "startTime": "00:09:35",
    "text": "actually it\u0027s it\u0027s great think is it it tells you if the 302 originates from a captive portal or if it\u0027s just a three or two yeah definitely take this to the list it sounds like there\u0027s some value in this and I think - - X point there\u0027s probably some way to to use this in the API potentially as well and this should be if if approved where should this go in 7710 miss or should we leave them for the API document for the API document okay fair enough thank you all right on to the next presentation I suppose there we go tell me your door sir Gionta now it is alright morning everyone so I\u0027ll be talking about the captive API stuff I\u0027m Tommy Pauly halfway through I think we\u0027re gonna switch with Tariq because he has some thoughts out on what you just mentioned about how we do kind of the URI redirecting how we handle the URL problem but before that I\u0027ll give a summary of the latest updates to the API document so there are a couple of different changes that we\u0027ve made in the - l1 so one is that we have put in all of the necessary I Ana registration forms to get our captive JSON type so application slash captive JSON is the one that we chose by a coup and so if anyone has complaints speak now so the text says that the clients should include this media type in their accept header and a get request to say I\u0027m trying to access the captive portal API and that the servers must mark this as their content type in responses when they are serving up the captive API JSON so I think this solves the problem of knowing what we\u0027re talking about we also added a section on how we deal with server authentication and the point of the authentication here is to validate that the certificate on the connect TLS connection for the captive portal API does indeed match the hostname that we have and so this does assume to some degree that what we are validating is at some point presented to the user in the "
  },
  {
    "startTime": "00:12:37",
    "text": "UI as if it is some type of browser or something about the network you\u0027re joining the overall recommendation is that you should be using OCSP stapling here because the other forms of OCSP that require actually connecting back to some other service or crl or that those often conflict with the captive portal nature of being captive you can do it if you want but that is left as an exercise to the implementer to deal with if they want to go down that road and they should just use stapling and we discourage certificates that require a ia and we also more clearly specify that if there\u0027s any certificate validation failure that the ue should reject and ignore any of the information that it gets on this connection and essentially treat the network as if there is no captive portal api present that does not mean that captive portals will not work you essentially fall back to the current stance in which you may get redirected and bad stuff may happen but it that it is going to be a lesser user experience than it would be otherwise and we can live with that and hopefully people will go forward and correctly deploy their captive portals I have someone pitching what should be the behavior of the Yui if yours name is not presented to the user circle I assume that all name is presented to you is admonitory to put on the earth name no I mean I think we should still be doing the validation of a certificate either way like that\u0027s a good thing to do um the my assumption here is I don\u0027t think this actually stated quite like that in the document my assumption is that the value of validating this is that the user at some point can recognize that oh this captive portal at least is claiming to be provided by Google or Starbucks or whatever I don\u0027t know if we\u0027re just valid like if if what we\u0027re validating that indeed the captive portal is owned by evil evil there\u0027s not a huge amount of benefit to that like actually what is the behavior of the Yui if the hostname is not in the certificate or Daisy they have no host name for the server I mean essentially we\u0027re just treating this like any other certificate validation for like a website thank you right just follow the same project the hostname being validated is the one in the cap for URI correct yeah Lorenza clearly that that URL it\u0027s just you know an a parent communications endpoint and you know do really need to present it to user I mean what\u0027s it you know what does the user "
  },
  {
    "startTime": "00:15:37",
    "text": "gonna events from it there\u0027s no information there that that\u0027s potentially visible to give it the user can understand and I mean we want certificate validation for confidentiality really but I don\u0027t see a lot of value in presenting it to the user to be clear the document does not say that we\u0027re doing this this is my comment on the slide yes so Martin Thompson I\u0027m making notes and try to make comments at the same time the the text in the document and your text here I think mrs. um mrs. the the key point look a little bit the the important thing here is that we have a long sequence of interactions and hmm yeah the first one is with the network and we kind of know that it\u0027s with the network because it\u0027s DHCP or an RA or something along those lines of beyond that point where we\u0027re exposed to all sorts of attacks and and whatnot and then we\u0027re limiting the attacks from that point onwards so that this validation is essentially is tying the thread between the different so for instance so when when you do certificate validation in in TLS you do that for for basically particularly I should yes you did have one reason which is so that you can say that your expectations with regard to the identity of the thing that you\u0027re communicating with Ahmet and so we established those expectations when we get the RA the 7710 URI and from that point onwards we want to make sure that no one can violate those expectations and so that is what has been provided here but in the fact that we\u0027re following all the standard best practices for doing HTTPS and we like the confidentiality and we\u0027ve enacted it\u0027s using all the same tools all those things are great but fundamentally the the security property that we\u0027re looking for here is that that that continuity of expectations and actually meeting them great very good fun this is dkg so I appreciate the view from the network you know like reasoning about the chain of network events but the reason that we\u0027re validating the the name is because when you connect to a given network and you think you\u0027re connecting to the Metropolitan Transit Wi-Fi you want to see that it\u0027s the user needs to see that it is the network that is the Metropolitan Transit Wi-Fi we do not the point I was getting to here that that is a way to go or to say like if I join the Starbucks captive network that something to indicate that oh yes this portal is brought to you by the thing you\u0027re expecting and it\u0027s useful and if we do that via showing them a web interface where you can put the Starbucks logo like well sorry but I can put the Starbucks logo on my home network and so the so I absolutely agree that which if the document doesn\u0027t say as you put that as it should for the user agent if the "
  },
  {
    "startTime": "00:18:38",
    "text": "user is interacting with it the user needs to know the name of the network that it\u0027s connecting to you if the user is not it is not doing any interaction whatsoever then you don\u0027t show the user anything but they have to be not interacting with it on the basis of something that they have maybe interacted with in the past like if this is with the dot Starbucks dot biz then I\u0027m ok right but that but there needs to be some linkage between the users mind and what they\u0027re doing so that they know what networks that connecting to right right that\u0027s kind of the direction I was going down here I do think that we do need to clarify what point that Martin made of the linkage because that\u0027s kind of the fundamental thing for the API linking with the rest of the architecture but right presenting something to the user is a good way to make sure that if they join something just because the SSID looked to be like the thing that they wanted that they have some some level of confirmation that maybe there is someone with authority behind this one now Warren was before me or not I\u0027m gonna go after work okay yes so Warren quarry I\u0027m still a little confused when I go to the Sheraton and get on the SSID that\u0027s called Sheraton guest what actually connects me is something called room links like they\u0027ve outsourced that to room links so I don\u0027t really know what I\u0027m supposed to be expecting here right like Sheraton room links who\u0027s these people yeah what am I supposed to do with this information now forensic ly I mean this this URL just comes from like an entirely untrusted source right I mean we can say oh yeah like from the point on where we get this URL which is basically anyone on link can can send it to us then yeah we\u0027re gonna validate that I mean sure but I don\u0027t think you know maybe maybe you could say I don\u0027t think you can even say well let\u0027s check that it was the last that what the one we got last time because this stuff is that as Lauren says it\u0027s out sourced all over the place you know there\u0027s there\u0027s things you know there\u0027s this SSID that I connect to and it\u0027s got you know it\u0027s it\u0027s cold Hills Wi-Fi and depending on the venue it\u0027s provided by a different operator with different captive portal policies it\u0027s sort of kind of luck of the draw really there\u0027s an interesting deployment question because this is not the same as the pager redirected to right so you could even have the pager redirected to being a different entity than the one that\u0027s providing the API maybe the one that\u0027s providing the API is closer to what you would expect and they outsource the redirect page or it could be completely all the way around stratum to the same host thing so that because the user will see that one if they log in to the network they will see in their user interaction page they will see a host name right you present it yes I believe we do right but either way I mean you could also present like you mean if we\u0027re adding the API support we can "
  },
  {
    "startTime": "00:21:39",
    "text": "also present that in that same portal but we\u0027re in the UI you present to your I don\u0027t know that\u0027s not so my job but you know that the people whose job it is are gonna be very hard to convince to present to you our eyes right so I mean what do we lose if we make it we make them be the same hostname potential flexibility of deployment Jeffrey Stehr I think the point is not whether you want to present the hostname to the user or not the thing is what was said before that I would disagree with you Lorenzo that when you connect to the network you sort of trust the configuration information that you get from you from your network so the HTTP arrays or PVD you somehow get that URI that tells you that there is a CAPTCHA photo API you have to connect with it and when you connect with it it is a good thing that you can use TLS to validate that the thing you\u0027re connected to is actually the one that your network told you to connect to the one right though the one who is screwing with you by making you captive and giving you this captive information one is the same one who sent you they are the dates be like they they\u0027re in collusion you\u0027re proving that they are indeed inclusion yes so I think I\u0027m gonna address I think the point that you made like if you make the API host the host and the same as that one we lose probably a lot of actual practical deployment scenarios I think because the thing is it is very possible that the captive portal API URL may be hosted by some other entity compared to the one that\u0027s providing the user page and not the same house they may not be the same host and second point is even if let\u0027s say the host name may not be apparent to the user so if the user connects to share it on things at all it\u0027s from some on link some something else that\u0027s fine at least you have showed it to the user right and then let the user ask the question or decide decide if they still want to continue or not we should at least put a recommendation of saying they should show it to the user so not in function I think this is difficult problem and even in the case where you think that you\u0027re connected to Starbucks and it looks like Starbucks it might not be as we we have this problem on the web where the thing that is presented to you doesn\u0027t always match expectations and the the reason that\u0027s less of a problem on the web is because you establish expectations in how you type things in how you get to them we don\u0027t have that property here because essentially the network can send you anything and it\u0027s very very easy to use confusable x\u0027 and all those sorts of other things too to basically fish in this way and that\u0027s not necessarily a problem in this case as long as the primary properties that we\u0027re looking for maintained however there is there is still some value in having this continuity and till I saw the way because you have the ability to do things like well okay so I\u0027ve got a password that I use with "
  },
  {
    "startTime": "00:24:40",
    "text": "Starbucks and now I\u0027m under attack looks like Starbucks but now your password manager will recognize that this is a different origin and not feed that password in and if people are using those sorts of tools as they should then you you avoid some attacks the problem with with taking TLS out of a link at any point in this process is that you open the door to all sorts of interesting problems I don\u0027t think we need to go there right and that\u0027s an interesting point you bring up because if we eventually do evolve the captive API into something that doesn\u0027t just require user interaction on a repo web page and then we can do some more automatic rejoining of things then yes certainly the fact that we\u0027re validating this will help us reuse whatever credentials we had from previous sessions I don\u0027t think anyone has suggested not using TLS I mean the hotel said that well I think bkg said is TLS is worthless unless the user sees the name and and part of me agrees with that part of me doesn\u0027t but if we want to do that I would really challenge people to say okay so what deployment scenario do we have where the the party operating the captive portal login page is not the same party would be operating the API server because I can see how the venue page is not going to be the same page but the the entity that is making you captive or not surely should be the same entity that\u0027s using the that\u0027s powering the API no yeah tell me tell me more you\u0027ve seen all of David Byrd\u0027s presentations on this stuff is it really complicated yes I agree it\u0027s complicated but those yeah okay so for those people who haven\u0027t seen those presentations and it was probably a few meetings ago he showed some of the ways in which these network architectures are built up behind the scenes so you just see a Wi-Fi access point and something happens and what what it shows is that you have you could probably find that one in its IT f99 oh it\u0027s in the chest lights you want to switch to that so he\u0027s the concern there I think is that people who build the overly complicated hotspots if they see any impediment to doing these api\u0027s then they\u0027re not going to deploy this thing and we\u0027re not going to get any benefit from having defined these things in those networks and we\u0027re already at the point where this is not this is a big ask for these guys to deploy and you see the picture here the portal and the and the website sometimes different yeah I\u0027m not talking about the partner web site at all that has nothing to do with it that was "
  },
  {
    "startTime": "00:27:41",
    "text": "exactly my point my how much one is the one that\u0027s being shown to be which one are we getting redirected to today that\u0027s being normally shown to the user my understanding limited understanding is that the the page that we redirect to when we have to login is the thing labeled captive portals it\u0027s the my understanding now my or my limited understanding and is if you clear that captive portal you end up on partner website generally speaking and so I using require the colocation of the API service with that portal yeah I mean that like we should yes exactly we should check whether that\u0027s actually and on and on you know cruel and unusual burden right that that\u0027s that\u0027s the point it may be that it\u0027s not because I definitely see this perforation between partnerweb side in captive portal but can I can ask what do you think you\u0027re gaining by having this restriction well I\u0027m trying to address the kgs point about the user actually because the user will see that login page when you log into the captive portal they will see that otherwise there\u0027s no portal right because if they doesn\u0027t see right like by definition if it\u0027s a captive portal you it means that the user sees the login page right but doesn\u0027t that doesn\u0027t that simply mean that the the operator of the network needs to ensure that the page that the user ultimately ends up seeing is one that they will trust I I don\u0027t understand a question so you could imagine I think let\u0027s say that my API hostname is different from my portal hostname and my API tells you where to go for your portal and maybe it sends you to something that looks good but it itself as the API server is some hostname you would not expect and so we potentially redirecting you so as a concrete example I go to the Starbucks the you know mechanical details of all of this has been offloaded to some other provider and so that provider manages all of the plumbing but they send you to a portal page that redirects and redirects and redirects and ultimately lands you want a page that has the Starbucks origin and shows all of the nice things that you might expect to see underneath the covers the thing that\u0027s being presented to the ap2 over 70/7 10 or over the api could be anything and sort of saying here that there\u0027s a bunch of websites involved in this process I see so you\u0027re saying basically you\u0027re saying that captive portal could love the the initial redirect it we couldn\u0027t even if we enforce that the initial the first 302 got sent to the same URI it\u0027s the same hostname as the captive as the api the initials leader you you might just bounce off that not something else and it would just be in an undisturbed use it wouldn\u0027t even ever see that anyway right right right so this is dkj let me just clarify why I think it matters what "
  },
  {
    "startTime": "00:30:41",
    "text": "this is if we are envisioning that this is something that\u0027s going to provide smoother more seamless access for future connections then the the user the user may actually never see the captive portal page on a sub script connections and so that captive portal page may never end up showing up which means that whatever your client is doing to decide to navigate you through this without you having to face the captive portal is going to be keyed to something and what it\u0027s going to be keyed to is this invisible thing in the middle that we\u0027re talking about validating and if that\u0027s actually invisible than what you\u0027re saying is the you know evil dot evil can ultimately point you to Starbucks dot with E and then you go into Starbucks out with and you think you\u0027re going into Starbucks but whatever registration set up actually happens there it gets tied by your at your end point to evil dot evil so the next time you go to evil dot evil you end up connecting there even though you thought you were authenticating to Starbucks that with E right and so whatever the user is going to see needs to be visible now I agree with Lorenzo that these things should be the same thing because showing the user two different names is on top of the SSID is confusing and users will not get it so if the goal here is to communicate something to the user these things should be tied together well you could imagine that if they are not then you the UI highlights that in some way another place where this could be represented to the user not to go too far off track for example in the list of what Wi-Fi you\u0027re associated to because this is actually potentially a longer lived thing or something that\u0027s happening automatically so essentially your captive portal SSID could be annotated with you know captive provided by this with even potentially like a way to like drill down into that and see here\u0027s the properties the were aware of on this network that look like captive portal properties Chi LaRue\u0027s just one quick thing I don\u0027t want to make sure we don\u0027t lose sight of this but we\u0027re not solving captive portals only for Wi-Fi networks we\u0027re solving it for wired networks or cellular networks it\u0027s very not being you explicitly connect to that\u0027s fair if we have a button if we have an affordance in the UI of any sort to to let the user connect to the login page after the fact then you know maybe there\u0027s gonna have to be some space or to see how much time they have left or whatever oh the time yeah can I oh is that in scope for this presentation no we can let\u0027s probably jump back to the normal slides and just clear out the "
  },
  {
    "startTime": "00:33:41",
    "text": "presentation that dark talk all right this is very interesting I think we should probably have more discussion on the list as well great so these are just a couple questions or comments that have come up from the list when we got some reviews of the document so far one of the things that I think needs to be further emphasized in the document as it stands is that the list of keys and information currently provided by the JSON API is not exhaustive some of the comments were like oh this is you know a fairly naive approach of saying oh yeah you have a UI portal you have the potentially remaining time potentially the remaining bytes I think we fully recognize that at this point this list especially the optional values to have the remaining time or the rating bytes is a bit of a strawman and it does need some more nuance there and potentially extensibility we can see that just being something that we discuss in this group as we are working on the document to clarify that but we probably also want some mechanism by which people can extend the keys that they are putting in this JSON format so I don\u0027t know if we have thoughts about the appropriate way to do that have you enjoyed let me just define new keys of yeah proprietor these people can put whatever they want in here right essentially is there a process at which Oh someone like do we have extension documents in which people just define new keys I don\u0027t know JSON bits with blobs of HTML to also please display on that page oh yes right like does this need to eventually become a registry is a question that came up from this you\u0027re basically saying do we need a registry and if so should the procedures for adding that registry be standards action or or expert review or like email Tommy oh yeah right there\u0027s potentially direction that this takes us down and so as a working group we will need to think about that if that\u0027s something we want to do yeah yeah well I mean we know be like I don\u0027t think we\u0027ll survive iesg review if there\u0027s no extension process right exactly yes something that will need to be a fix that comes in a other version of this document great the other thing that came up I think based on David Byrd\u0027s comments were you know what are some of the edge cases what are the failure cases here so just to review I think how the document and the API stands today if everything is working and centrally you are advertising a captive API on a network that is truly captive then everything is hunky-dory we have a pretty good user experience we are we "
  },
  {
    "startTime": "00:36:42",
    "text": "know where the portal is we don\u0027t have to deal with redirects we can make sure we present it to you and then the two failure cases are the cases in which maybe someone\u0027s advertising and captive API on what would otherwise not be considered a captive Network this is an interesting question that was brought up you could imagine this potentially being a good thing in which oh yeah this network has given you extra portal information without blocking you just too give you some user experience but it\u0027s also you know an invasion of the user experience without potentially adding too much benefit we\u0027ve decided is this a harmful thing do we need to worry about this and then the other edge case is that someone is not advertising the API correctly on this captive Network and that\u0027s essentially what we have today it\u0027s also equivalent to having an invalid certificate on your captive portal API and we just could fall back to existing behavior or there\u0027s an extra edge case which I don\u0027t think is captured by the bottom one where it\u0027s an incorrect captive API listed and I don\u0027t quite know what happens there it\u0027s like so this time a server authentication works out but it has nothing to do with the thing that\u0027s actually blocking you or it just doesn\u0027t answer like it\u0027s listed but the captive portal API server is down do you type oh you sure do right I mean if it times out I think then we essentially fall back to existing behavior well so what you we imagine is that this thing is governing the behavior of like what we consider to be like the captive interaction like the sheet that pops up if someone goes into a browser and just tries to load a page they may still get redirected or get the other behavior this is talking about what is governing system behavior so maybe it does to lay the system automatic behavior Kyle arose regarding a second one yes I could see in a nuisance portal that just you go to login as it no do bad no no no and then what what does the user equipment do does it just give up or does it fall back on all behavior right well especially if you aren\u0027t actually being denied access to your traffic this is I I think the the thing that comes out of this is we maybe shouldn\u0027t you know disallow you from joining that network like we should make sure that your your browser traffic can still go through if it can right that we don\u0027t prevent that or do we want to wait I mean do we with maybe a timeout because we don\u0027t want to just let it go through immediately because then it was redirected if there is it kind of cradle um I think there\u0027s that and I mean non captive Network could also be a network the captive network that\u0027s currently logged into right correct so I would say number two is not really a configuration error I mean I think that\u0027s my father as "
  },
  {
    "startTime": "00:39:42",
    "text": "well like it\u0027s just they\u0027re giving information it could be a nuisance in which case well I suppose if you do 77 10 and yeah then you could like if you\u0027re just trying to essentially pop up a random URL into the users face that can be a nuisance if you can\u0027t I mean if you get it from if you get it from the 302 than that you stand that nuisance is basically Cher\u0027s fate with the nuisance that you pop up the login page anyway exactly right in some cases I think this is potentially somewhat useful because there are some services and let\u0027s say like on airplanes in which I want that that landing page cuz I want to know how far my flight is along and all this other cute little information but maybe I am already allowed to use the network and so how do I get back to that page etc etc so this solves that say it also provides perhaps an incentive to the operators by providing a UI affordance to learn more about the network or visit the venues page exactly so I know it seems seems reasonable I think yep all right this does also feel a fair bit like it might be abused that every time I join the network from now on somebody\u0027s gonna pop up a shiny website for me offering I mean I guess that that currently is kind of a thing that kept the photos do anyway but it feels like this might make it easier to pop up I did you know that we now dual Aragon say the fact that we have a captive portal API and that we joined the network does not necessarily mean that we have to pop up the page but because if we are aware that we\u0027re already logged in hopefully we do nothing so the question is if they lie about being logged in what do we do right that\u0027s true everything and what I would say is basically the same thing as Lorenzo said you ate well - anyway the refer back to this case but displaying an URL could also be a frame of one picture by one pixel all sorts of your viewport containing of style JavaScript or whatever but this is simply gets 302 right anyway no you need to do seven seven ten if you want to support number at case number two there right right I mean there is value to having knowledge about the state of your captive portal without relying on redirects like part of also this allows us to not do program because the redirect relies on something that can be successfully redirected precisely so um mountaintops exist in response to Eric\u0027s point there the fundamental premise of the web is that you can do that safely I mean if we fail with that as we often do that\u0027s on us as those people who provide "
  },
  {
    "startTime": "00:42:43",
    "text": "the browser\u0027s but there\u0027s nothing much we can do about and then yeah we\u0027ve already established the fact that they can do this anyways okay great with that I\u0027m going to turn it over to director so we can talk about how we can avoid using seven seven ten so I should check or give elapsed so I actually had some text also that was supposed to publish for this but I wrote the text I didn\u0027t like it so I didn\u0027t publish the text but I think I want what I want to try to do was just kind of throw it out for discussion and see what people think about it and then we\u0027ll see if that makes sense so we sort of had a discussion about this at the last idea of I think Tommy brought it up in terms of what should 77 10.2 right and so what we are suggesting here is it can be like let the network operator choose what they want to publish in 77 10 or any other equivalent mechanism right it\u0027s their choice what we provide here is if they are already advertising a captive portal URI in 77 10 then we already have the user URL key that will point to the user portal and the user can and you you can actually find that if they want to advertise the user portal then we register in the API document are maybe in the architecture somewhere we registered a link header weight whatever some link relation we can figure that out and that one captive API whatever right and that one points to the captive portal so if the user actually gets to if the you HOV just goes and receives an actual you Hotel URL page it can still look at a link header it can still find out there is an captive API URL there so you actually have kind of connection both ways and then we don\u0027t have benefit is we don\u0027t have to decide if you want what we want to do with 7710 we may still want to fix 7710 for other reasons and that\u0027s fine but at least with this we like we just give a suggestion and let the deployer or the network operator choose clarification that this would this would also work with the 302 redirect yes the sacrificial one you would use that you could use that in the same context okay and you would get the same information in the same way yeah because one one of I guess the question would be if the user ends up on a page after a long sequence of redirects which one of those redirects have the link relation yeah and so I guess the answer would be well any of them yeah exactly yeah that may be a problem we can discuss that yes that\u0027s a good point so so Warren Kumari um let\u0027s say that I join a normal network there\u0027s no captive portal and I connect to the Internet\u0027s "
  },
  {
    "startTime": "00:45:43",
    "text": "and a browser arm for a while and then eventually I stumble across evil example calm and it includes one of these links saying please go along and use this capture photo API and come back every 30 seconds in order to make sure that you still have you know time remaining and now for the next you know three weeks everywhere I go I\u0027m happily checking in and telling them where this is this is part of like the current you ease when you try to when you get redirect to a captive portal knowing that you are behind a captive portal this is for those URLs to advertise it to that not so right now so right now in the uu right how do you actually whatever mechanism we are using to load up your special you know you\u0027re doing your probing and whatever mechanism using to find a special page is where that is the idea that supposed to provide this the URL back so I so I would I would suggest the answer to Martin\u0027s question is which of those three or twos I would suggest the answer is only the first one and the first one is essentially the the same tofu model at the the DHB URL has if someone is able to manipulate your on link traffic then they get to choose what you do yeah so Warren kumari I think it\u0027s also but it would have to be also not just the first 302 that you see but you can only do this for the first few seconds as well because right you might connect anoxia 302 for a long time yeah I don\u0027t like I really don\u0027t hate the sacrificial probe I really don\u0027t care about it it we do it anyway we\u0027re going to do it till the end of time pretty much I mean the know from an implementation perspective as well I mean the sacrificial probes already there and in our implementation it happens to be an entirely different component from the one that actually displays the login page which we don\u0027t display unless the user actually interacts and so there is a there\u0027s a difference in terms of trust model there as well so Eric Kinnear so just a point on the captive probe if you\u0027re on a portal that then later becomes captive because your time expired or something like that I don\u0027t think we can guarantee that you always have a probe that\u0027s going that is gonna come back so you may hit a redirect sometime later for some totally legitimate traffic if you have it no that\u0027s not my name is optional and even this one is kind of an optional it\u0027s a shoot or option available to the network operator so oh speaking of which so option C choice "
  },
  {
    "startTime": "00:48:45",
    "text": "choice is good but it it increases testing burden and it provides opportunities for miss configuration which agreed it you know B seems restrictive in the sense that I tried to argue for that about twenty minutes ago I was like no that\u0027s too hard so let\u0027s so that I think that leaves us with a right I don\u0027t know well something question it would be something me destroy it and then it\u0027s up to we will still have to provide some deployment or some security guidance around when the UE should actually look at it right so I think the the trust model for the the HTTP redirect is different from from DHCP and R is a smart tofu because many many hops off link might enter interact with whatnot we would have to have some guidance for this link relation saying that browsers were not really supposed to do anything with it except pass it off to an operating system component for subsequent evaluation yeah is that that kind of thing that happens you enter I\u0027m saying yeah yeah I understand what he\u0027s saying I think what Lorenz I was saying was something different which is that you make a request with an expectation to be receptive to receiving one of these things and when you when you are receptive to one of these things then it has meaning yeah in every other context so here houses in particular would just look at this and go huh link relation like they do with all of them just about and that\u0027s fine I think that\u0027s actually a property we would like it out of this which is that unless you\u0027re specifically looking for this information you\u0027re not going to do anything about it I think that\u0027s really going dead here I think that\u0027s them yeah but what about the idea of having a possible mechanism at the operating system level or browsers could say I observed a captive portal API link thing you might want to decide if that means I\u0027m captive again yeah so does that make any sense so we have a mechanism in android basically that apps can report you know I don\u0027t have any working network connection please please check it out for me yeah and we redo the capture portal stuff and sometimes the capture portal is back and sometimes their server is gone okay but but what we handle it yeah Tommy just the the conversation about having a very like the specific probe that this is a connection in which I\u0027m trying to detect a captive portal and I only want that response if I\u0027m I only want to use that response if I\u0027m doing this it makes me concerned that you know if we add the definition of the link relation and "
  },
  {
    "startTime": "00:51:45",
    "text": "someone just sees the definition and they see come back and they don\u0027t read that part of the document that yeah they could end up doing the browser not at the system level yeah but does this mean that if we\u0027re doing our captive probe should we add in like the accept header for cap the captive API JSON like essentially like do a probe for the API as a next step thing - like when the other side detects that are like oh this is apparently what you want to get redirected to it\u0027s this I think why not yeah so you get your if you\u0027re doing the program you get your program and if the probe responds if you\u0027re getting a three or dual right you can prop you can choose to interpret that and go to that URI and find out if there\u0027s anything you want to use from the right I find that like a captive probe has this format and is trying to accept this thing so Warren Kumari I mean maybe but the thing is a lot at the moment a lot of we\u0027ll spend a lot of time trying to figure out what the captive portal probes are and do special handling for them with whitelists and blacklists and things if you now include a thing being like hey this is a captive portal probe then they\u0027ve got less work to do this may be a feature or about the point earlier about some only using the link relation if we think that we may have lost a captive portal is interesting because it means that you know we use the link relation it comes back from a probe and then any other time we only use it if we had previously seen one from a probe we could make that kind of the logic so yeah the OS is aware that we\u0027re in a captive portal from it having to previously it kind of breaks down when you look at cases where maybe the big kind of portal starts being forced later on or it\u0027s being used for some other purpose or something like that but so I think that was one of the reasons why I probably didn\u0027t even put the push because as I started writing it I mean this actually literally apart from just I guess registering the link relation we will probably have to have a huge section about deployment guidance or you know security consideration some things somewhere is that in the architecture or in the API document I don\u0027t know where the right place is if we do decide to even consider this wherever this mentions yeah the only people need to be considered in the security section section yeah so all right all right thank you thank you our 10 minute API update discussion in here for an hour it was okay so we have tons of time for this meeting but I I\u0027m hoping we don\u0027t use it but Kyle no pressure hi I\u0027m Kyle arose from aggelakas and I\u0027m "
  },
  {
    "startTime": "00:54:45",
    "text": "going to present just updates to the captive portal architecture between now and the O 2 and O one version alright so first I\u0027m going to summarize changes I\u0027m going to talk a little bit about the signaling protocol we\u0027ve introduced and then just finish off discussing some open issues and questions that come up let\u0027s store in the github repo so what am i changed well so we added a requirement so nicely provided by Lorenzo for the signaling protocol we sort of stripped it ICMP or we did a said and replace you know icpo signa protocol for the most part and there was a bunch of typos and spelling mistakes because I was dumb didn\u0027t run it through a spell checker I fix those all right so the second protocol as I hinted it\u0027s very similar to the old ICMP workflow is just we\u0027ve replaced it with a abstract concept called signalling protocol to find some requirements for it so that when we go to actually implement one well we all know what to do just stepping back a second for context the last ITF there\u0027s a bunch of debate about using ICMP to signal that your captive and I correct me if I\u0027m wrong but we decided that rather than try to solve that problem in the architecture document we would sort of just describe at a higher level we want that protocol to do and then move make it optional so that we could actually deploy captive corals without if we need to and then finally move any specification of it into a separate document so moving forward so the requirements before the document are essentially that it\u0027s not easy a spoof so you can\u0027t just have it coming from randomly on the internet that you can send it before the portal closes to inform the user that there\u0027s a pending expiry that and those are sort of the two main ones another one is that there was I hope I didn\u0027t misinterpret you Lorenzo there was minimal information in the message that means that really keep it simple just give enough information to the user equipment to make the decision it needs to go whether or not is captive whether this stuff\u0027s going to expire etc I added some requirements around being able to identify the source of a signal in order to validate it later it\u0027s debatable whether that\u0027s actually necessary and I think I\u0027m going to discuss that a bit at the end of the presentation I mean finally I added a requirement about it not needing to be reliable um and I wanted people who implement the protocol to be aware that it\u0027s not TCP signal necessarily it could be something like ICMP or it could be something like a uep packet and that they should be aware that I just get lost and you know if the user you\u0027re cooking keeps on trying to connect keep "
  },
  {
    "startTime": "00:57:45",
    "text": "trying to send a message if just yeah be smart about it so from after having talked to friendly camper portal operators I I\u0027m sort of grown to be worried about the ability to send this before portal closure particularly if such signal might result in you ease presenting the uses some plead for attention some plea for attention you know I was really I was actually wanting to make a comment about your draft where the the expiry time and my fear is that we can\u0027t have nice things in the sense that if if there\u0027s a if there\u0027s a an opportunity for a captive portal operator to say you had your time left on the clock is three minutes and 20 seconds and so we would dutifully if we dutifully present to the user notification you know one minute and thirty seconds in and show hey click on this page to keep - stay logged into the network they would do that as often as they are able and so my fear was that we would be forced to tie the expiration date the time left on the clock at to actual expiration in the sense that we\u0027d have to run a probe and determine that we were actually locked in again before we would have honored that so I don\u0027t know if this fear is justified or well could we do something to mitigate it like you know the UI experts put a snooze button on it and say you know what I hate the same you can go away for a while okay she said Tommy Polly Apple so for the expiry bites or time in the API my thought was not that one should prompt at all but for example like if you had a page that was like oh here\u0027s your network settings you can have essentially say the network said you have this much time left here is a link to the portal if you want to of your own volition click on it and if you say oh yeah that 30 seconds is bogus then you won\u0027t do it but essentially it\u0027s I paid for an hour it\u0027s a way for the system to handle the clock for me so cuz I got countdown going or something so they even just like keep a clock so I can have this window open like like what you they actually do this on a lot of captive portals like on an airplane they\u0027ll have the countdown timer if you leave that window open the point of this is that could be a system-level window that says they reported this time a countdown timer here it is if you want to see it so I\u0027m more okay with that than I am with having the signalling protocol be able to do this because it could continually change its mind and it can essentially pester you with this a little bit more you could represent it "
  },
  {
    "startTime": "01:00:45",
    "text": "in the same way but if we have an API I\u0027m not sure what the value of a signalling on the wire is before a portal code because like how long before a portal closure should that come and so even if it\u0027s not necessary pestering the user are we encouraging people via this mechanism to pester the radio on the device and just send packets to wake up the devices hey hey hey hey hey hey you may be about to close and the user doesn\u0027t care and there\u0027s no point to send that traffic on the water a few things to stay in response to that so um the holes gonna say first crap so regarding a portal pestering the user I mean they could do that right now why don\u0027t they right they could just keep sending redirects every three minutes guess the differences it actually okay and I guess it\u0027s a little more impactful when it\u0027s actually interrupting the connection as well so um so so I think the idea with the Signum protocol is that it\u0027s potentially more reliable and that is coming from the thing that\u0027s actually making this decision I want to wanted one of the big points is that if you keep if you make all the decisions centrally it\u0027s a lot harder to make misconfigure a lot harder to mess up so I mean that maybe that\u0027s part of the reason behind it uh regarding the the is a little blurb in the giraffe talking about why we have that and it\u0027s to make the make a more seamless so you don\u0027t lose connectivity first so maybe rather than you know I you can I guess it\u0027ll be up to the UI to decide okay well the API or maybe I said we have 10 minutes to expiry let\u0027s maybe do something in 9 minutes it\u0027s so yeah I guess I was gonna make something similar captive portals can currently do this and some of them do um but it seems that having an ability to at least signal you should come back and look at the API piece would be useful because I mean some captive portals you sign up for an hour and the timer starts now and continues running for sixty minutes and then stops otherwise you sign up for an hour and then if you decide to leave the hotel and go to Starbucks and get some coffee and come back the timer stops and when you reconnect having a you know you should come have a look you thought you only had 15 minutes left you now actually have 45 we could also agree that the user will only be annoyed if the timer you know with the you should probably log in again if the timer says that it\u0027s less than five minutes or maybe something that the user says so you know they could keep saying they come look the API come look the API but if we don\u0027t do anything with that information they\u0027ve got no incentive to send it I so I don\u0027t think there\u0027s an incentive for the captive portal operator necessarily to ask the user to go to the API and they the only thing that the only thing that you know "
  },
  {
    "startTime": "01:03:46",
    "text": "appears to me to be an incentive for the us operators is to show the user stuff everything else is caught and so I think if we if we get prompted to go to the API even if it results in us you know burning packets I don\u0027t see a lot of harm in it most will update our idea of what the JSON values are including perhaps time left on the clock and if those don\u0027t actually result in you know please for attention to the user then maybe that\u0027s fine right you know it - Tommy\u0027s point we just update our clock with our new idea of what the clock is so but you know that was one of the thing one of the points I think we\u0027d made and Chicago I think was it where are we or maybe London where we said look the this should be a hint to go to the API it should never be a hint to do something else it should always be hey something has changed go look at the API I think that removes a lot of the intent of the negative or the the wrong incentives here so it so I\u0027d appreciate if someone reads my the the text in the draft is to make sure that I\u0027ve captured that correctly I think I did that but you know if there\u0027s any wiggle room in there we should try and lock it down this is dkg so I just wanted to ask that we think clearly about the sort of power structures that we\u0027re putting in place here and I tend to agree that providing the signaling protocol to happen after the fact puts a lot more power in the hands of the network operator and if we say that you only get this during connection then the network operator basically has to state something and then stick to it right it negotiates something during that during the registration phase I might be using the wrong term there but right during that during the phase where the user interacts with the captive portal and it\u0027s committing to something that the user and the user agent is going to keep track of and we\u0027ll do the right thing appropriately now if you want to do during the negotiation phase tell the user I\u0027m gonna register you but only for two and a half minutes you\u0027ll come back and look at an ad in two and a half minutes then the user can say I\u0027m this network is not functional for me and be done if instead it says sure sure go ahead I\u0027m registering you for an hour and then it comes back two and a half minutes later and says Bo you got to check it out something then I think that\u0027s a problem and so I think we can this is something that will be more useful for the users it\u0027s a negotiation if the if the network operator knows that they have to stick to the negotiation that they\u0027ve made with the user at the registration time what if when we you know in the API we are a little more strict about changing time\u0027 right if it\u0027s also is it is weird discontinuity in the in the remaining time when you go and visit indicate something\u0027s wrong but I mean you know you go and Eve it what\u0027s that what\u0027s the damage of going to visiting the API again aside from cell power API is different "
  },
  {
    "startTime": "01:06:49",
    "text": "from the web portal so that was Lorenzo\u0027s point is that we need to make sure this is this is a signal for the headless portion of the program wise has a limited set of resources right whether it\u0027s my brain or whether it\u0027s my smartphone or whatever that\u0027s battery that\u0027s radio that what all of that right when when the network comes back to me and says hey I need you to do this thing you\u0027re burning my resources and if I\u0027d negotiated with you to not you\u0027re not gonna burn my resources for the next you know X amount of time I\u0027m choosing to do it I want you to stick to that so yep you sir so given that we have an API we are designing an API portal that it runs on HTTP that it\u0027s trusted so this looks a bit unsecure to me to rely too much on such a signalling protocol so for me it would really be useful in case there is some synchronization issue between the API portal and the network for some reason you know load balancing in your network some device went down and up again and so that can happen so for in my opinion that shouldn\u0027t be more than just a nice CMP error message I don\u0027t see why it would need to be to happen before portal closer like the network shouldn\u0027t have to keep track of who\u0027s connected and that\u0027s up to the API portal so yeah when you send a packet that packet has to be dropped by the enforcement point yeah it seems fair that it would send you an ICMP message telling you oh you\u0027re captive and probably go to the API portal that you already should know the URI for like URI should not be in the ICMP message otherwise it\u0027s an attack vector and and I would be fine with you you know that would be an information if you actually get such an ICMP message and your connection is running fine why would you do anything so if you don\u0027t want to visit the API portal just don\u0027t if your network is evil or somehow wants to block your connection you don\u0027t really have a choice you have to go to the API bottle and if you\u0027d want if the network wants to exhaust your resources based on that it just can so Warren Kumari I think that there is some incentive for people to play any games here so unless and I don\u0027t quite know where this goes maybe architecture doctor when I come along and I join the Fairmont Network and it pops up a captive model and then it says you have access for 47 years you should come back every 30 seconds in check or they use this to signal come back and check now I go to the Hilton and various other hotels and Starbucks and wander around and the whole time I\u0027m checking in for the next 47 years to tell them exactly where I am so we need to make sure that the captive portal information stays scoped to the network that you actually join and doesn\u0027t and that\u0027s not actually I don\u0027t think that that\u0027s actually written in a document it seems common sense yeah thanks I "
  },
  {
    "startTime": "01:09:54",
    "text": "think we have to we have to accept the sad reality that there is no enforcement of anything that is in the API at all right because the user doesn\u0027t see it and therefore they can\u0027t keep anyone honest right the only thing that you know so so to my point about you know to the earlier point about we should only do this on on initial signaling there\u0027s nothing in initial signaling which makes this remotely trust work at all the API is just there for you know information and you can\u0027t trust any of it because the user is not in a position to to it to enforce any of it or to keep anyone on this so I don\u0027t I don\u0027t see there\u0027s a lot of ways that networks can use your battery they can send you packets and they cause you to drop them and something will on your device will wake up when you do that even if it\u0027s just the chipset it still does wake up and so they can find you with packets they can do all sorts of stuff and I think if we don\u0027t give them incentive to do that it\u0027s just gonna be more trouble than it\u0027s worth for them to attempt it so I don\u0027t see yeah so if all if all that happens when we do this ICMP is we hit their URL and ask for Jason then we\u0027re just like they\u0027re just imposing costs on themselves to do X or SSL handshakes for no benefit because yeah we update our idea over the timer that\u0027s left on the clock we don\u0027t do anything else particularly if we don\u0027t show anything to the user they don\u0027t care so Tommy Paulie two points here one just to what Lorenzo was saying you could imagine that if there is information in the API like expiry time or something else simply the moment you get through the portal and we\u0027re like hey we\u0027re good now the system could give a summary of like hey you\u0027ve joined this network it says you have this much time left and that is the opportunity at which user says but I paid for an hour and you say I only have this so like it\u0027s potentially a way to confirm is that useful is that spoof able sure the other point kind of basic info is what peer was saying earlier I\u0027m not totally sure about all the deployment models and someone like David burger would be able to help with this better but when we\u0027re looking at the indication before portal closure that assumes that the thing that is giving the signaling like ICMP is aware of the kind of the long-term state of these and when it\u0027s going to close I could imagine an architecture in which the thing that is sending the ICMP are the redirects simply just has a white list in a black list or just a white list of these are the addresses that are allowed to get through or the MAC addresses or whatever to say okay on or off and it is some other entity that actually is doing the countdown of the time and just essentially updating a rule list somewhere else so it may be difficult for the same entity that is giving you the signaling of you\u0027re blocked you\u0027re "
  },
  {
    "startTime": "01:12:54",
    "text": "blocked to also have the nuanced notion of and 30 seconds or two minutes before this person is about to be blocked then go give them some other update so I mean I think that I put it in the documents that it\u0027s a should not a must send a signal and that\u0027s a good it\u0027s a good reason to have it as it should not a must why would we even send before portal closure right you know if we we are absolutely 100% Craven and sent it like if we if we if we if we\u0027re gonna present that to the user in terms of a captive portal login page it\u0027s gonna be a disaster right because you know because you know they\u0027re just gonna do that every 20 seconds I think the idea was to what was to try to allow networks to signal issues back maybe that\u0027s what destination unreachable is for right know what issue I mean like trying to consider like the there are some people in here a while back talking about the telecom use cases where something you know you\u0027re inspected with a virus and they want to tell you that you\u0027re infected with a virus right now they\u0027re just sending you a 302 redirect to a random like HTTP access well that you now qualify for Comcast business access if you only sign up here for so I mean I I don\u0027t know if we want to explicitly D scope that sort of use case but right now as far as I\u0027m aware it\u0027s still on the table okay so let me summarize a conversation that we had with a apparently quite competent captive portal operator right the only thing that their customers wanted the only reason why they were providing free Wi-Fi at all was that they got to show the user a page at the end of the captive portal signing work sign-in okay and they hate our guts because we closed that page as soon as they unlock the portal right they and so right so they were basically saying that makes it like entirely useless to us from that I did use that really the only thing that\u0027s that basically we get free why five four user attention and I think we need to keep those incentives very well in mind before we allow you know the network to signal user attention it\u0027s basically you know and I think literally the yes capital portals can lock on you today but what they do is they cause themselves collateral damage because you know you E\u0027s can switch away from their network and it also provides irritating stuff to irritation to the user when they\u0027re browsing and they get interrupted and it\u0027s a disincentive for them if we just give them a free incentive then they\u0027re gonna use it so Warren Kumari I mean I think that\u0027s exactly my point is that users don\u0027t like it when their captive portal suddenly stops like the destination unreachable as being a good signal I don\u0027t like that idea cuz I\u0027m on a FaceTime call or you know Google Hangouts call with my wife and suddenly it stops and dies in the middle of an "
  },
  {
    "startTime": "01:15:55",
    "text": "argument and she figures I hung up on her I would I would network signals this is gonna timeout in an hour and that system just ignores that it\u0027s gonna timeout in 10 minutes and the system and ignores it but I\u0027ve said please let me know two minutes beforehand right so we could always have the device decide that it\u0027s going to ignore all of the please pop up a message until you know thirty seconds before or a minute before then Noah might as well just set the captive portal timeout to 30 min three minutes as well right it\u0027s the same amount of like if they go if they\u0027re willing to pop up and make themselves be annoying they\u0027re willing to pop up and we\u0027ll just make the timeout that much if I may were in more in at certain myself and the queue there um it might be that you can get your time remaining warning from the system because it got it out of the captive portal API and not from destination and reachable zand one thing one very hypothetical thing I would put to the room for consideration is what if we just stick with the existing ICMP destination and reachable as the enforcement thing when they want to shut connections down we remove signalling protocol altogether and replace it with a recommendation that operating systems provide a mechanism our applications to request reevaluation of network access basically are basically operating systems provide should provide a report bad network or a please check the network for me call that applications can use when they think something is gone amiss possibly a captured portal but but then it still is gonna break my video call or something all right it\u0027s gonna you\u0027re gonna have to break it before the app notice only if the capture portal is lying about how much api is lying about how much time you have left or it forgot yeah bear in mind right it\u0027s entirely possible that you know a captive portal enforcement point might have might reboot completely lost state and then really your yes toast again I mean so the earlier thing if they can just keep popping things up the reason that captive portals don\u0027t currently said a one-minute time out is because users will get annoyed and wander off all I was suggesting is the signaling thing we could ignore it until we think that there\u0027s only a small amount of time left although that breaks yeah when you lose state okay so I have it at all they\u0027re basically just repeating what has been said already sorry it was just before it looks like a cmp destination unreachable is the thing that we are looking for i we could add a new type like you are captive type to give a little bit more information about the reason why the packet was dropped not Monday did I mean if if and all the router wants to use the destination or reachable for some other types might make sense and it Lauren so it looks like what you are "
  },
  {
    "startTime": "01:18:55",
    "text": "looking for is that in the in the architecture there is a requirement that says that based on the time that is available on the API the the user equipment should never have to never be mandated to do to connect to the API before that time so so when you log in when you log into the portal you you pay for something for some time and and that time should be the one that\u0027s even by the API and you shouldn\u0027t have to connect again and again and again every time you get an ICMP message that\u0027s what you\u0027re looking for I think that\u0027s what you that\u0027s what you asked for to make sure that the hose doesn\u0027t need to do more connections that what the API asked for and if the API says oh you\u0027re only allowed for 30 seconds what do you want to do yes sure you will have to connect to the API every 30 seconds because that\u0027s what that\u0027s what CAPTCHA pothole lets you do or you want to mandate that with that shouldn\u0027t be less than whatever personally I don\u0027t care about like I can hit the API every five seconds no one\u0027s gonna make me do that no one\u0027s gonna care unless there\u0027s an incentive in the form of like annoying the user with an ADD and in that case I promise you they\u0027re gonna do that and that that\u0027s the thing I\u0027m trying to I\u0027m trying to ensure here I don\u0027t care you know if we if we get a signal hit the API sure we\u0027ll update our counter because our clocks might have drifted I don\u0027t know who cares no one\u0027s gonna ask us to do this unless hitting the API is actually gonna result in us annoying the user and like I said my fear is that we\u0027re not gonna have we can\u0027t have nice things there but just like you said before the if the API just gives 30-second leases it\u0027s going to annoy the user enough that it\u0027s going to age the captive on service it\u0027s going to wander off and my point to that is like I said we can\u0027t have nice things and so even if it says 30 seconds we\u0027re just gonna ignore it right I mean I I mean like the only the only way I see around this is Tommy\u0027s suggestion says like the summary says you\u0027re an hour logged in for an hour and then the user might get pissed off if if it locks before that and you know it mean which case right you know if we if we get told to hit it again after 12 seconds and says like yeah you\u0027re actually now logged in for two minutes what do we do right and my point is I think we have to design this with an adversarial mindset right and so like I said I don\u0027t care if we hit the API every time every twenty seconds because no one\u0027s gonna make us do that because it\u0027s just like it couldn\u0027t increase the load on their server and they\u0027re not gonna do that right so there\u0027s no point there\u0027s there\u0027s no attack vector there the attack vector there is the attack vectors in terms of user attention so I think I\u0027m maybe I\u0027m missing it but I think I just wanted to point out that when we talk about the you know is that a captive you are either logged in or not I don\u0027t think logging in is actually always a binary stay you may be like "
  },
  {
    "startTime": "01:21:56",
    "text": "when you connect your captive portal you miss is like okay you chose the free low speed connection right and if you try to connect on Netflix it\u0027s gonna block you right it\u0027s like you\u0027re not allowed to stream blocked Netflix you know with the current settings that you\u0027re selected so how do you do I mean I just want to make sure that we that is a reality right is like how do you account for that I\u0027d encourage people to take that one to the list the the discussion about selective blocking of services is an interesting one and perhaps not something that we can we don\u0027t know Mia Jim can we get rid of that topic forever here\u0027s my suggestion okay we start a thread on it there\u0027s a massive argument we declare that there will never be consensus and then we drop this topic please I didn\u0027t I can write like passionate emails I could like rail at people risk being banned from the list like you can do it as well and you could do it as well and then we have this great argument say okay there\u0027s no hope of ever reaching consensus on this let\u0027s declare it out of scope forever so my understanding my understanding was that we wouldn\u0027t we wouldn\u0027t engage on this topic for that reason if if people think that I\u0027m wrong come and talk to me private come talk with me privately but my understanding was that when we when we built this yeah the expectation was that any such information of that nature will be left to communication between the the network operator and the users using the captive portal pages or what have what have you and we wouldn\u0027t provide any specific mechanisms in support of those sorts of things I think the problem comes when we have a mechanism that seems to offer some benefits but also has some downsides but then one of the possible benefits that is really strong for it is the is this use and I guess we just need to strike that benefit from consideration if we\u0027re going to I wasn\u0027t a suggest you I wasn\u0027t a suggesting that we need to do anything about you all I\u0027m saying is we just history to account for the fact that that\u0027s a reality right and whatever we say recommend in here has to occur at least say something that something like that could happen and you do blah right we don\u0027t deal with it but you at least have to mention it I know I know if you\u0027re not gonna get any consensus on it okay so so you\u0027re suggesting that we need to at least address the issue even if the way that we address it is to say that when I\u0027m not going to address it okay so we\u0027re enquiry I can\u0027t tell if this as part of that third rail subject or not I get on a United plane and I connect to the network and it gives me automatically the pretty thing that tells me how far the plane is and streaming from their internal you know thing of movies versus connect to the internet is that a differentiation of surface or no because one sort of thing "
  },
  {
    "startTime": "01:24:56",
    "text": "behind the capture pole and one isn\u0027t right like I get internet but the Internet\u0027s is very limited to just the stuff on this plane I mean you may be older argue that you know you draw some boundaries that you think about it like literally it\u0027s on the plane with the captive portal versus not on the plane I mean I think okay so too much to the earlier point this is this is you know this is the reality of things you know it also it\u0027s also a reality that we can\u0027t write anything unless you get rough consensus on it and certain topics they\u0027re just like no point in discussing them because we know they\u0027re not they\u0027re not going to result in consensus because we\u0027ve had those discussions recently and frequently and we just end up with the same conclusion we can\u0027t write anything unless we agree on it is the point right do you think we can agree I think we can agree that\u0027s my point yeah so so my feeling is that we are forced to force that we will only be able to agree on a model which has essentially a binary captive state and stuff that\u0027s inside the portal and that\u0027s it\u0027s available regardless of whether the portal is unlocked or not and the intern right and I think you know we can probably on that I don\u0027t know I don\u0027t think we can\u0027t ruin anything else so we might as well say look it is out of scope and we\u0027re because I don\u0027t I don\u0027t know if we can say there\u0027s no consensus or we could say look you know it raises count isn\u0027t there are some IAB document that we can point you or something that\u0027s already written down that says we\u0027re not gonna engage in this topic because black 40 84 Tommy Polly I agree that we should not engage in the raging debate that red proposes although it would be really fun I appreciate that I think the one thing this brings up to me is that while we should be designing for the internet internet or not use case there are captive portals that do partial blockage today so I think we should have as a requirement to ourselves that any solution that we come up with which is less bad for Internet or not captive portals is also less bad for the other ones so doing something in our architecture or in a protocol that actually limits or harms those use cases in ways that we don\u0027t need to make those use cases much much better but we need to make sure that we don\u0027t make them worse what I\u0027m concerned about with the signaling let\u0027s say if we did have this not what you\u0027re proposing but like an ICMP error that every time I get an ICMP your captive or unreachable or something that then I actually pop up the portal web page to the user something that is "
  },
  {
    "startTime": "01:27:57",
    "text": "something that will not work for a walled garden or a partial scenario because that inherently assumes is one or the other because I may have done everything I can possibly do or want to do with the portal and I\u0027m still blocked on Netflix and so the fact that Netflix gives me an ICMP or some signal should not cause me to do anything more because that is potentially this good steady state so that\u0027s my concern with the signaling protocol is that if we\u0027re assuming that some signal that your your being blocked by a captive portal implies that you need to go and do something more is I think an incorrect assumption the reason I like the API more than the signaling and more than even today\u0027s redirect model is that it truly separates them outright says there is a path and the API is not about employment as we are going on with David bird on the list API has nothing to do with enforcement it is only a bootstrap for user experience and I think that\u0027s actually what we\u0027re trying to solve the enforcement model is not something actually I think we\u0027re trying to change here in this group we\u0027re trying to change the way that we interact with the portal to allow the user to get to what they need to do which is the network\u0027s problem but I mean this signalling protocol is an interaction that hints it is a hint but the question is what do we do in reaction to it and we could get to the place where in reaction to being blocked we do exactly what you would do on a non captive network and you got a destination reachable like we don\u0027t have to do anything different I just wanna make sure I understand your point so regarding Netflix and instance a state so the idea is the user leaves they\u0027ve connected the portal they\u0027ve chosen their plan and that\u0027s it and you know they know that Netflix isn\u0027t gonna work but for some reason they have a window open and is just trying to connect Netflix in the background and they just don\u0027t care um so why would you pop something up just gonna annoy them yeah if I may okay I learned that if Netflix doesn\u0027t work it\u0027s an outage right if they if the user expects that outage then that\u0027s fine I mean I agree I agree with Tommy I think and also I don\u0027t think we can I don\u0027t think there\u0027s anything we can do about these partial connectivity use cases we can I we certainly can\u0027t make them worse because they\u0027re just gonna be the operators just gonna make you know continue to do whatever they need to do in order to enforce their business models right we can try to make other stuff better we can\u0027t try to make this stuff better because we can\u0027t agree on it so and you can\u0027t make it worse we can\u0027t make it better I think in the case where the user paid for you know the non video streaming service right they there\u0027s no there isn\u0027t there\u0027s I don\u0027t understand what will be gained from a protocol to tell them you\u0027re going to Netflix and "
  },
  {
    "startTime": "01:30:58",
    "text": "you could pay more if you wanted to we have the API for the URL for the user interaction if they wanted to go back there should be a path in the operating system to say I need to go back to that interaction page because I decided I want to upgrade we have that because the API gave it to us I guess the one nice thing would be if the failure was a little more explicit like just no I mean just more like rather than just hanging and waiting and waiting and waiting or mine sh t I could fail randomly it just just fails and then that\u0027s where maybe what Eric was saying earlier it was anyways Eric who said it that the ability of an application to request the OS to validate the network and I said I kind of like that just but but for if it weren\u0027t the Netflix app they would you would get the answer yeah no everything\u0027s fine you\u0027re just not gonna work but so Warren Kumari maybe this is already covered or maybe it\u0027s too much UI but what\u0027s often happened to me as I\u0027ve gone along to a hotel and I connect to the capture portal and it says for free you can get internet access at one Meg for $9.99 you can get it at 10 Meg like I had I want to pay 10 Meg when you nine a night so I get the free one and then I discovered that was not a good option because there one Meg is not actually one wreck and then I can never actually find the captive portal thing again so it would be really nice is I guess that this is a UI thing or something where I can then click on a button and be like what was that URL again cuz I\u0027d like to upgrade now please and we should please provide you yeah I also I really don\u0027t see the issue that we are right now like if the user tries to connect to netflix and that\u0027s not provided by a service there is an ICMP return message it doesn\u0027t egg out the connection is just closed because there is the ICMP error you can display it in the browser or whatever in whatever way you want if the ICMP message actually is you are captive then you can display you are captive and then the user is supposed to click somewhere in his system that tells okay actually I want to upgrade or and reach back to the the do aisle I don\u0027t think it should that there shouldn\u0027t be anything automatic and I think we all agree on that lines are clearly not instead of well mostly related we so we we encountered a captive portal where the user signed into the messaging plan which included I don\u0027t know what and and we know that it included Google comm because the Google Search app was telling us quite regularly that they had connectivity and then there were the other apps that were telling us and we do have such an API to report internet continue there are other apps that we\u0027re telling us we we really don\u0027t have connectivity and unfortunately the probe that we do for Internet connectivity "
  },
  {
    "startTime": "01:33:58",
    "text": "includes a random element and some of those were 302 and some of them were not and so he ended up we ended up and the bug that was followed was I keep getting prompted for access but I already signed into everything I signed into I wanted the messaging plan get on my way I don\u0027t know how to fix that but yeah so and I don\u0027t think this would help to be honest right so I think we\u0027ve run that one to ground and there seems to be pretty pretty strong consensus about this one I think the conclusion there was that we\u0027re not making things worse and I\u0027ve put in I put an issue in on the on the architecture draft to simply state explicitly what we\u0027re doing and what we\u0027re not doing with respect to this sort of news case and I think that\u0027ll be relatively straightforward to do one paragraph should be enough for that sort of thing but it\u0027ll mean that we can close this issue in the sense we actually have an artifact that says what a what we agreed and so if you if you if anyone was to produce that one paragraph I welcome that but otherwise they son you sir it\u0027s the notes are not that good so I moderately confuse this want to make sure did we agree that there should be no signaling protocol at all or did we agree that there should be not on that question we we got sidetracked onto this other more interesting question I thought we agreed that it was gonna be a hint yeah okay at most it\u0027s a hint which is I think consistent with what\u0027s what\u0027s in the draft okay so should we can results should result in reef etching the API could may okay so I probably probably need to rephrase I\u0027m with me okay fine yeah I\u0027m getting the impression that people will make their own decisions about whether or not they want to go and get the API yeah okay all right moving on okay so some open issues and questions that aren\u0027t the ones we\u0027ve been talking about so there was a issue open saying hey we need a way to indicate that there is no captive portal so we can just go on Eric has that in the draft I think you actually answered my question on github today and I think I noticed in the API no the in the PVD document there is also a note about it you\u0027re always right slice yeah so I think probably can just close that issue there was also something we had some language in the draft talking about PVD and now that pierre has nicely provided one i\u0027m assuming it gets adopted I think "
  },
  {
    "startTime": "01:36:58",
    "text": "I can probably clean that text up and get rid of the issue there is a section talking about the backwards compatibility of signals in particular it\u0027s talking about how you know a portal might choose to continue to do redirects as well as do signals I think I don\u0027t know what we want I\u0027m not even clear that that text makes sense anymore in the discussion we just had so maybe I\u0027ll just I can strip out that whole thing or I can try and clarify it a bit more I [Music] think I do think about that one a bit more it\u0027s not it\u0027s not clear what the answer for that is maybe I\u0027ll take it to the list a bit what is the section give us except an opportunity for disagreement I mean I don\u0027t disagree with it but you know I don\u0027t think it also provides a lot of information it\u0027s like yeah you could do this sure of course you could mmm and also saying you should implement this RFC in the RFC itself is like a you must read it you must implement it if there\u0027s the hint of disagreement on the side strike all right there was some discussion at 101 about the accept field and backwards compatibility there\u0027s language in the architecture right now about that I\u0027m not sure it really should be in the architecture so I\u0027m thinking of just removing it and delegating that to the API slash DHCP offense right this is my fault or yeah hey you know it\u0027s the draft the are the authors at fault we said there\u0027s in a work flow there\u0027s a section about verifying the plausibility of a signal or ICMP message and I\u0027m not sure plausibility really makes sense I mean pretty plausible so I know I suggested on the mailing list that we renamed it to authenticity not sure if that makes sense but it raised a point that I didn\u0027t really capture very well in the draft regarding the requirements on the signaling protocol we didn\u0027t really talk well about having the security of it like having me the user equipment trust that the signal is a real signal there is a requirements saying that is hard to spoof do we also need a requirement saying that it is real whatever that means so before Tommy speaks we\u0027ve talked about the nature of the signal and I think we\u0027ve established that this is not necessarily a requirement here and so saying saying something particularly with assured is problematic "
  },
  {
    "startTime": "01:40:00",
    "text": "in the sense that you\u0027re now contradicting yourself so and what I was going to suggest actually is that any any protocol that provides a signal like this will have certain properties with respect to authenticity um being on the path this may be not the property that we\u0027re looking for but that\u0027s something that ICMP provides some information on we don\u0027t have a lot else and so we could do the whole HVAC thing that we talked about before and whatnot but that\u0027s what I was trying to capture here the question is yeah I I would not put any specific requirement on this one so you think it may be a little too restrictive let\u0027s just keep keep the option open if you want to but just move right so that let\u0027s leave that problem for someone else right you\u0027re making table this problem basically so Tommy right at the point I was came up here to make was that the requirements around authenticity of signaling are intimately tied with what we are using the signaling for and so if if we do what we were discussing here of it\u0027s a hint that you may use to tell you that something went wrong which is I I find to be exactly the same as a normal ICMP unreachable today it doesn\u0027t really seem to require any more authenticity because it\u0027s exactly equivalent to the unauthenticated signal we have today and we should try to do nothing like my concern is if you had try to add a signaling method with authenticity that implies now that I have more of should that I should be using this to validate something I should be trusting this and doing something with the user and that it gets into the whole can of worms again so until we actually have benefit from the signal that\u0027s gonna be a strong signal that carries more than just a hint we shouldn\u0027t add authenticity to give the impression that it does make sense copy stuff so if we if we keep calling it a signaling protocol and not ICMP and retrieval and try to speak in general terms it seems important to me that there is some text about the properties of the spoofing possibilities like okay if you imagine that signaling protocol that can come out of the blue from anywhere anybody that knows your source address even though it\u0027s a hint that\u0027s going to be an issue that anyone can send you that all your captives signal from anywhere if it\u0027s nicely mPHA below that and that you need to make sure that it comes from the path and that it\u0027s related to an actual connection that you are having it\u0027s a little bit better just possibility would be you know in the API there was the H Mak possibility that can be done we can also imagine putting a "
  },
  {
    "startTime": "01:43:01",
    "text": "list of valid source addresses in the API that you know not strong security but still better than accepting eyes such messages from anywhere on the network Lorenza I in the weed how how likely is it that we could get rough consensus on this document if we removed in if we removed all of the signaling text there\u0027s somebody can somebody not live with that yeah I mean at you in this room and do we believe that somebody could not live with that on the mailing list such that we would not get rough consensus or rather enough people would would not live with it that we couldn\u0027t help you sir I think there will be cases where there will you know bugs going on between the API and the network and as as I said before I don\u0027t want the page to just hang forever waiting for something to happen it\u0027s good to have some message from the network saying I\u0027m the network there is something wrong please you know reach the API or as the user to do something or I mean at least inform the device that there was something going wrong and it\u0027s because of you kept you kept a bottle yeah I think so I I think I can\u0027t Warren Kumari I think removing everything about signaling might be a bad thing but saying signaling is out of scope for now we\u0027re planning on writing a document in the future to deal with that would be perfectly fine with me or you know there may be somebody may one day write a protocol that does this but like at least showing that we thought about it so where would be the appropriate spot to place that note would that be interesting like introduction something so just as a suggestion there that that suggests that maybe you could lighten the requirements in the sense that they could be a little bit more abstract and a little bit more sure a little bit shorter and not go into these sorts of details in too much at too much length but but still say you know this is what it the role that would would play in the architecture but we\u0027re not really describing a concrete manifestation of it the following things are probably important like the spoofing thing but we don\u0027t need to get into the details and the nuts and bolts of it because that that\u0027s very hard for us to do right now because we don\u0027t know what this thing concretely looks like yeah especially if it\u0027s like these things are probably important not the signaling protocol must have the following brick you know requirement sort of things goes yeah I think I think we need to at least have some statement and I think probably it is some some level of character it doesn\u0027t have to be requirements or it can just be characteristics like it should ideally have these you know these "
  },
  {
    "startTime": "01:46:03",
    "text": "characteristics and that that might be okay but laceration one so we\u0027re going down his path of considering shrinking the scope with a signal more does right now there\u0027s there\u0027s a fair amount of text describing how the signal actually works in the work flow if it were there with that also involved just removing all of that removed from the diagrams and just have a brief blurb saying hey we would kind of use it to talk between me for some point these are equipment kind of look like this it\u0027s probably not the right room to be having that discussion without actually having the text in front of us in the time so my suggestion would be that you and those who are interested go back and have a look at the document and what you\u0027ve got at the moment and make some suggestions on what what might be done okay can I make a suggestion that that\u0027s what I was planning to do would anybody disagree with this so we just say that the the network the enforcement point should or you know maybe must when it drops the packets send the destination unreachable ICMP message so just like we make sure that something happens another packet is silently dropped that\u0027s a question really but that\u0027s a separate question but please we should we should talk about that but right now this is about the that the trigger for going and fetching the API and the requirements we have around that that\u0027s a separate separate thing that maybe we should talk about I\u0027d like to get to the answer on this one are you happy taking an action to to look at the signaling stuff and seeing what you can do to reduce the the level of detail perhaps and maybe come up with the repose \u0027el yep okay or suitable or not ICMP destination rule is that\u0027s the question I think we can now make is it actually used to be can we can we just close this one before I move on to that one please Tommy you know you wanted to run it close I want to talk to that as it is is anyone does anyone have any objection to that to that plan cause gonna go and have a look at the draft and look at the signaling that stuff and and remove the landmines of this nature and try to get it down to the essential parts and I think you\u0027re close but you\u0027ve got a lot of detail in there and we\u0027d probably just lighten that bit yeah all right Tommy so should not solving this problem but more to go and what Dara was saying one thing we could say and you can take this down of the notes that I think could be helpful is just silent dropping is considered harmful and that\u0027s it right like if you have some mechanism that will produce an error and cause the connection to be closed or redirected or whatever that isn\u0027t preferred to black holing traffic "
  },
  {
    "startTime": "01:49:03",
    "text": "and then we can just stop there so the suggestion from Lorenzo and in case anyone missed that one for the record is yeah you should you should generate invalid assets that\u0027s a great should must in preference to dropping the packet okay one final thing I don\u0027t have on the slides but there was a question raised on the list or our point made by a couple of people that they felt the architecture needed a bit more detail in terms of the role of the enforcement device I\u0027m not sure I mean I thought there was enough but if people feel that we need to call it a more detailed a bit more prescriptive in terms of functionality I\u0027d like to hear that like there any suggestions about what I should say that I\u0027m not right now feel free to ignore me because I\u0027m gonna say something not very helpful but and I think my feeling is the value that we can provide in this group is in terms of a protocol to try to help clarify some sort of contract between two different devices it\u0027s really not I think that useful in this group to tell captive portal operators how to build what they\u0027ve already built so you know if we already have text and we agree with that sure but if not I think that\u0027s not the value necessarily here so you know it\u0027s possible I\u0027m a citizen oh the enforcement point shooter should not do this in pursuit of a signal that we don\u0027t even agree how it\u0027s supposed to work I don\u0027t see a lot of so war inquiry and I think that this is property on this topic so enforcement stuff um a while back I was wandering around with an Ubuntu laptop and I really wanted to reach google.com for some reason so I opened up my laptop and I connected to the captive portal and I didn\u0027t have any internets and i taked in google calm and sure enough it sent me a destination unreachable which my machine decided was met destination unreachable and then I paid for the CAPTCHA for I could reach everything other than google.com so very careful with making sure that you know what signal we send back or what is suggested and what one actually does with that yeah turns out clearing Oh like this nation reachable that the kernels learnt is kind of tricky and rebooting is the right way that is not good user experience okay so so tiller ends this point if we talk we should probably be the case that if we talk about the be more descriptive than "
  },
  {
    "startTime": "01:52:03",
    "text": "prescriptive when it could term when it comes to the enforcement point we\u0027re just give descriptions of how we think it\u0027s working in order to illustrate the main things we\u0027re doing which is the protocol right all right I think that\u0027s it any closing thoughts thank you yes yo here\u0027s our time up if we continue with this right we\u0027re gonna run out of time so so hello everyone I\u0027m Shep Reiser as you probably noticed and I\u0027m going to talk about thank you I\u0027m looking going to talk about this new draft which is about discovering the CAPTCHA bottle API with using provisioning domains and so it\u0027s caught hers cause our twist Tommy wrote quite about everything in the documents but I\u0027m presenting it Thank You Tommy so this is not something totally new the concept of provisioning domains it was defined by the myth working group and we discussed it quite a lot in this working group but now is the opportunity to have a deeper loop a deeper look at it since there is a there is an actual document to look at so it\u0027s defined in the architecture document RFC 3550 six as a consistent set of information basically this is the set of things that you receive from the network that lets you access the network now we have an additional draft the provisional domain in the interior working group which intends which is like two main objectives the first objective is to identify the provisioning domain and for that purpose we use fully fully qualified domain name which means that if you\u0027re connected on one interface to one Wi-Fi you would receive some notification telling you the name of the PVD so it\u0027s a fully qualified domain name and on another interface another provisioning domain you might have multiple different provisioning domains on the same interface by the mean of you know different router advertisements meaning that they would have different fully qualified domain names or you could even have the same provisioning domains on two different interfaces if they ultimately connect you to the same upstream networks like for instance in a hotel room you get Wi-Fi and wire but in the end the upstream connectivity is the same it\u0027s the same service that is provided with the same characteristics so there is the idea would be to let host know that it\u0027s actually the same service that is provided and now the the second objective of the provisioning "
  },
  {
    "startTime": "01:55:04",
    "text": "domain work is to provide additional information about the fundamental properties of the upstream link you\u0027re connected to the way you access the Internet so that can be you know the the service provider the name of the upstream connectivity it can be for instance we are going to talk about it whether or not there is a capture photo it could be the the throughput so we are not right now currently defining all that in the in the draft in the free stream of that domain draft but the idea is to provide something that is generic by no mean of JSON objects that is provided to you by the network and that lists the different properties of the network for the folder host so the idea in this raft with this additional object is to do something that would be generic and that would serve multiple purposes so for instance the one of the captive portal working group in all the cases where the host would know a little bit more about the network but it might be considered slightly you know annoying to to define a new array or the HTTP option for every use case so not saying that that working group shouldn\u0027t do that but we have lots of cases where you would like the host to know more about the network and that you don\u0027t want to have to define a new ipv6 ICMP option to do that so for the phase one the way it works is that the fully qualified domain name is put in the router advertisements packet that you received from your router so in the first in this example you have two interfaces with two different routers but as I mentioned you may have a single router with multiple pvd\u0027s and so this is the option that has been defined you see so there is on the middle of it there is activity ID so that\u0027s the fully qualified domain name we have a set of bits that are set or not so the H bit is the one that is pretty important because it\u0027s it stands for HTTP it\u0027s because it means that based on the fully qualified domain name the host is allowed to create an HTTP requests to retrieve the JSON objects which you can see on the other part on the bottom of the side so that\u0027s an example of a JSON object that you can get the other bits are the L beat which is for a legacy which means that the provisioning domain ID is applicable to the ipv4 connection as well so it\u0027s compatible with ipv4 although it requires an router attachments so you can say that the PVD works for the ipv4 link and then we have other fields like whether or not there is a specific router advertisement options that are included in the PPID so you can play with the options that you want the PVD aware host to be able to "
  },
  {
    "startTime": "01:58:04",
    "text": "parse and those that you don\u0027t but that\u0027s not really the topic for today there also is a delay field that lets you avoid thundering herd problem when you want to update the DVD now for the JSON object the the the keys that we have today are the name so you can display a fancy name to the user there is a localized name so you can display a fancy name in the language of the user we have a time of expiry such that from time to time you can update the JSON objects know that time shouldn\u0027t be really often right because it\u0027s really about the characteristics of the link and those are not intended to change all the time so the JSON object can be seen as something that is pretty stable over time we put a prefix in order to validate that the JSON object that you receive from a server that I didn\u0027t mention it yet but we use HTTP so we validate the fact that the server is actually owning the name that is inside the PVD but then that wouldn\u0027t prevent an attacker for from advertising a PVD ID that is not that it doesn\u0027t her own so there is as well the prefix there to make sure that the PVD is used on a network which uses the same source addresses and configured addresses and then we just have an additional key for saying if there is internet access or no but that\u0027s not what that\u0027s not what we are going to use for CAPTCHA photo it\u0027s a bit different because this internet equals true or false is really a fixed property so in the case of a captive portal use case it would be actually false like there you would have internet access but there is a CAPTCHA photo so in that case in the captive portal case the key would be a kind of absent yeah so implementation status it\u0027s been implemented for quite a while now we have a daemon that helps the user space application to get information about the object there is a patch for the Linux kernel but right now it\u0027s not abstruse having the our RFC published will help with up streaming the the kernel modifications we have IP route change Wireshark dissector are a DVD for an OD HPD for open wrt so just one slide to talk about happily hotel no it\u0027s really simple we are just proposing to add an additional key in the JSON object that you get from your network that additional key is called captive api it gives you the URI of the API such that when it is present the host would know that it is captive and that it can connect to the API to login to the CAPTCHA but also really really simple basically not anything more to say about "
  },
  {
    "startTime": "02:01:06",
    "text": "the actual proposal for the capture portal working group and just to mention that it\u0027s that simple that we actually implemented it twice in two different Agathon so that was HF 101 I got on we implemented it and demonstrated it and then it was HF 99 Bacchus on yeah that so final slide for discussion today four main topics I would guess whether we should add an additional key that\u0027s kind of short the API to go to the UI faster so that\u0027s one possibility should we define a way to stage that there is no CAPTCHA photo so that would be as simple as particular an empty an empty string instead of the your API then we can discuss the pros and cons of using pvd\u0027s should we use these only or should we use DHCP and RA only or should we use both and finally I mean just tell us if you think this is useful if we have to keep working this direction or if you think that the option with the RA option and DHCP options are sufficient to the workgroup another thing actually another question was which we I don\u0027t know if we\u0027ve considered that in the in the API doc is what if this URL changes because the PVD can actually PPD has a big mechanism so what what should happen if the captive API URL changes during the lifetime of the network that\u0027s another question to ask as for whether we should use the RA or DHCP option well I mean pvd\u0027s or v6 only right so so for before no I was about to say this if you don\u0027t mind jumping in the queue indeed it requires @p v6 but what defines an ipv6 networks are and oast not network as long as android iOS are there and listen for ipv6 array it works the URL can be fetch over HTTP over ipv4 the DNS requests or CSP can be done over TV for so let me sorry let me amend my definition of v6 Network it requires that the network operator send our ace all right so it won\u0027t all work on a v4 only network mmm okay so I can we can we just assume that by the time this is specified the routers that are in the wild are able to send arrays yeah all right so okay so okay so all right so okay that\u0027s for my my "
  },
  {
    "startTime": "02:04:06",
    "text": "initial was my initial advice would be to say well let\u0027s use that\u0027s used 7710 for before we could consider using this instead of adding 7710 to b6 if we wanted to given that like in real captive portals v sixes or in most of them B sixes you know one of those yeah we have no plans for it right now so you could be an incentive really okay that was yeah so maybe we can just say okay we\u0027ll use 7710 for before and this for b6 I don\u0027t know that because otherwise we have two ways of doing it in b6 but I just answered your first question about the API URI that could change right yes so there is an update mechanism in the JSON in the PD specification not going in the details right but it\u0027s a it\u0027s push based just like the RA so you can just push the updates to the hosts Tommy poly so as partly as co-author but also speaking just from my being a working group my answers to these questions and other people please agree or shoot them down for the first one should we have a direct essentially a shortcut of the API I would say no extra methods are kind of extraneous and it kind of ossifies on one current deployment model that\u0027s why we left it out for now the second one based on the 7710 bists document that we have now seen which we did not have earlier I would argue that they should be the same string for marking that there is no captive portal because that already defines one so we should just copy that that seems natural as far as the coexistence with 72 seven ten bits the feeling I have today is that they can live in harmony that there really doesn\u0027t need to be an either-or here because 7710 business has a great property of being very simple for the simple deployments and it seems like a slightly lower barrier to entry for those things and if that can help captive portals that\u0027s great and I think the updates 277 canvas are taking in the direction that we want to go and they solved the problems with the original RFC there are benefits to having a PVD so first of all if you have a PVD this feels like this should be a property of your provisioning domain it\u0027s a natural thing to extend so like I think this is good work for this group to do in order to extend that set of available information and that should be specified here it adds value because if we\u0027re seeing the world in which you actually have multiple up links this provides ways of "
  },
  {
    "startTime": "02:07:07",
    "text": "getting more nuanced deployments of captive portal so like this could actually be the way that we solved the partial captivity problem because like what long term right like if I have a one PVD for my streaming work one PVD for this and I actually using different v6 prefixes they have different captive state etc etc maybe they all point to the same API they have different API is but they can point to the same user portal for actually buying the things but then we actually have multiple PVD States associated with different captive portal API is to maintain the lifetimes of the different services that you\u0027ve bought so I think this is useful work to keep doing I don\u0027t think it\u0027s going to be the most common simple deployment that we\u0027re gonna see in round one but I think we should have them coexist and like yeah let\u0027s adopt both documents and they\u0027re different use cases you can\u0027t both solve the Multi multi payment scenario and use 7710 bits at the same time because you those two things will stomp on each other and they\u0027ll race correct right this these would be separate deployment models but a I get Android our iOS host would understand either and if you want to use the one that lets you give different sub networks great if you want to just have the one that\u0027s just the boom here\u0027s your are a DHCP option that works too which ones who proceeds if they defer that\u0027s very different I think that would be up to the PVD documented sort of like a PVD aware host prefers the people the nuanced PVD one I don\u0027t know like that\u0027s something that we would need to discuss if we were to take on the book one one option as well is that if there is an array option that is that is defined for discovering the API you can put it in the array with the PVD and if you have multiple services different services you can put you know send multiple pvd\u0027s multiple arrays and each related to one of the services that you provide with different captive portal api\u0027s okay by everything I was about just you said yeah that we can get multiple dvds for this covering multiple captivate on the same network now the captive API I will not say the very detail cosmetic empty string good no yeah so what was your proposal to me you said there was a key that already exists in the API document and there is a long string and we should use the same instead of an empty string or Neil this is Daniel can\u0027t go more so as I\u0027m thinking about this I\u0027m imagining connecting to a network where I get dhcpv6 with cat porn info I get a route advertisement with a cat for the "
  },
  {
    "startTime": "02:10:07",
    "text": "information it also has a PVD information I get the PVD and the PVD gives me additional portable information and I get another PV another RA and I get another DVD and some of those things point to the same things and some of them point to different things and I am really glad that I am NOT responsible for implementing this in a way that the user can understand III think we are we are building ourselves a swamp that will have failure modes that are completely impenetrable and that worries me is this a problem that we already have with 7710 this with the G HP v6 option key pond again as someone who is responsible for building implementation I can\u0027t if I kind of with you I mean I think we\u0027re here already instead of talking about already talking about you know 7710 and then well but like 7710 is hard so let\u0027s do the location header and I you know that that\u0027s actually I almost feel that we should just maybe just only do that first and publishing a document doesn\u0027t automatically create a swamp but it also if it doesn\u0027t do anything then there\u0027s no point in publishing it so I mean we could either publish it and then you know people will implement it or not or wait until let\u0027s say the PVD work actually gathers a lot of steam and when that is actually sort of mainstream and fully supported we would just put it in there I I would almost say let\u0027s delay this until the PVD work actually goes in and becomes a standard and sort of weight on it and yes of course you can do this another thing that of course the PVD option does is God it may or may not depending on we have where where this lands have this containerized IRA option in which case you can containerize the the 7710 URL anyway so yeah we\u0027ve got like this combinatorial explosion of ways simply captive portals I would wait on this one to be other dkg again um so let me let me just ask a question that perhaps okay so maybe this is already specified and I apologize if I haven\u0027t understood it properly if I receive two different captive portal informations from one link whether it\u0027s via pvd\u0027s or dhcp announcements or our Ras directly or whatever and they\u0027re the same thing and I go to that captive portal API to register what is my expectation as an endpoint have I registered to both of those things or have I registered to one of them right "
  },
  {
    "startTime": "02:13:09",
    "text": "so with the with the the PVD is defined well the PVD provides the tool to bind ipv4 connectivity and ipv6 connectivity together so when you register to the the one that is provided by the PVD I would assume that you would have connectivity with both ipv4 and ipv6 I got to pvd\u0027s ranks in the network I got to pvd\u0027s they both gave me the same captive API so I go to that captive API to register did I just register with both of them which one did I register with the one you used for your source address that needs to be documented yeah sure Tommy so yeah I really liked ekgs point there so yeah this is not specified the multi-tenancy yet one thing I\u0027d be tempted to do is say like that they shoot like they should not be the same and maybe they can point to the same user portal but be different API eyes so one thing that this brings up and if Barton you can take this in the notes that we need to specify in the API document separately is once you have interacted with the user portal and you think you are done we do need to check in again with the API to see what the updated values are I don\u0027t think it actually ever says that anywhere because it\u0027s kind of important so one thing you could imagine doing like if they pointed to the same portal user interaction and on that user interaction I bought two out of three services then ideally I should be able to check in with the API is for those services or those pvd\u0027s and figure out which one\u0027s of those did the user just open up so it\u0027s gonna be some model like that if we go down that route but even for the simple model we do need to specify that we need to check in again to actually know what the user did so generally speaking PVD is a sort of separate networks right so if it\u0027s not just a source address it\u0027s you know the DNS lookup yeah let\u0027s say that I have a PVD host name of like I\u0027d okay so it has to pass and this is else art so it\u0027s gotta be a valid host name but it could be like you well login dot you know whatever captive portal dot login or whatever I mean yeah probably not it\u0027s gonna be you know or login Boingo comm right but they could be entirely separate you know networks and yeah login for one wouldn\u0027t assume login for the other you\u0027d have to do a DNS lookup on both those pvd\u0027s and like it an ssl connection on both of them if you wanted to login to both of them how you present this to the user of courses is basically tear your hair up because it\u0027s really like yeah i don\u0027t know i will say one thing that is interesting about having the captive portal API available via BVDs is that if the network is extended "
  },
  {
    "startTime": "02:16:10",
    "text": "saved by tethering it might be easier to discover that there\u0027s a capture portal there rather than having to have all the things that do the tethering and the tethering and the tethering and the preview delegation remember that they need to also pass along 7710 this urls know on the on your EO point about having j GP v for HPV 6 erase what\u0027s the what\u0027s the current definition define behavior with you know you have dual stack network you get a an array with an option with the API and then DHCP with an API are you supposed to log in to both or do you assume that the ipv4 and ipv6 are bound together you just need to connect one I mean my point is to really defend PPP is that in the PD spec II it is defined what it means to be bound was an ipv4 and ipv6 how to bind them together so if I understand the kind of questions you guys I think what we should do if we are going to use the PVD right so I guess that\u0027s a good question is between if you also receive a DHCP option and a PVD now the DHCP option is going to be ipv4 only well maybe v6 but before let\u0027s say now we have to give some player I don\u0027t have an answer we have to give a clarification on which one is which one wins right especially if they are different captive or EPA if they\u0027re different end points maybe I think the answer is this fits in implicit PVD then they\u0027re all in the same PVD and it doesn\u0027t matter if you use before ov6 that they\u0027re assumed to be the same that one and actually just thinking about it I wonder what\u0027s the point of having a DHCP auction overall even for 7710 miss why can\u0027t we just use an array so maybe what we want is if you use this we want to say that if this is used and this wins out that it should discourage 7710 being use sent is that what you\u0027re saying sorry no I didn\u0027t get it Lauren the world is laughing too long too hard are you suggesting that if PVD is being used and PVD wins over DHCP option being sent is that what you\u0027re suggesting yeah if you use I mean PVD solution would work as just by itself you wouldn\u0027t you would need a judge before or v6 option if it is sent right if the operator if they have already deployed 7710 and they forgot to turn it off right now they\u0027ll deploy DVD and now the you he gets both the DHCP you know option and then the PVD we have to give some if we use this we have to give some you know tiebreaker right yep you need to define so I get that we "
  },
  {
    "startTime": "02:19:12",
    "text": "should wait for the PVD work to progress or is everyone comfortable with that or as in the the proposal would be they would continue to work on the and make the improvements we discussed but we would leave it as an individual draft until such time as we are more certain that pvd\u0027s good get deployed or what have you is so this raises a question for the architecture draft which does explicitly mention PPD\u0027s in it right now does that mean I should probably just strike them from it until so do you do need that no I don\u0027t know I mean it\u0027s more given as an example of a way of discovering the API so I could probably remove it see Tommy says just to avoid not holding up your document being published I would not down reference this document what you could do is just bring up in the architecture that when you\u0027re supporting multiple networks that this is not Wi-Fi specific you can just have a reference just to the npvd architecture saying that there may be leads in the future to specify captive portals also for discovered provisioning domains which there may be multiple of on a network and just essentially say that is a use case that says that this architecture could be useful for and then this document whenever it evolves would just reference and we are filling that role my impression is that this is this is Adam Roach my impression is is an informational reference right now down drafts don\u0027t apply to information I only know of normative yeah you\u0027re like yeah that\u0027s true III think I think what Polly says very I think I think what he says makes sense and I\u0027ll do that I just wanted to remind the authors of the cat port API doc that we should decide what it means for the captive portal API URL to change and okay good yeah thank you all see some greatness "
  }
]