[
  {
    "startTime": "00:00:06",
    "text": "all right everybody please take your seats this is the second edition of the tls working group meeting we have we already have note-taker and we have jabber scribe and so we\u0027re ready to go the one thing I would would please remember the note well from this morning there\u0027s a test all right okay Session two agenda so for this session we do do we have okay so we will have somebody potentially be adding just a short brief discussion on ticket requests not really discussion but an update when David gets here and we\u0027re going to switch the order of deprecating in d5 and the well-known you are eyes for yes and I and I think if we have time afterwards we\u0027ll start a charter discussion if we have time does anybody have any other agenda modifications they\u0027d like to make excellent who\u0027s going to present on so hello so I think 10 minutes is more than enough so it\u0027s since the last time we\u0027ve made only one change to the draft so so there was just one concern it was regarding this change we\u0027re concerning signature algorithm extension where we just added a few one clarification to it and if everybody is good with that I think we can proceed so it\u0027s all on the github ok "
  },
  {
    "startTime": "00:03:16",
    "text": "so we basically made the change including instead of saying a client is it does not send a signature algorithm extension and we\u0027re serving us aboard the handshake and Sonny hadn\u0027t shake failure alert we changed what to if if a client desert does not send a signature algorithm extension and the server must evolve a handshake and Sonny handshake failure alert except when digital signatures are not used and we\u0027ve included an example for example when using PSK ciphers I believe that it addresses the concern but was made during the previous ITF so there\u0027s that the only outstanding issue on the draft yes that was we\u0027re only as far as we remember correctly yes okay Alessandro get any cloud Clerk yeah I think this was the only comment that we got the last time and the other people were saying well maybe we can\u0027t disable md5 and sha-1 now but we should proceed with the with the drop jacks my very next question is like who\u0027s red I would like to move this to working group last call if you haven\u0027t noticed so I want to show of hands of people who have read this draft I mean 10 so unless there\u0027s any raging objections to what\u0027s in the draft now we would like to proceed with working group last call all right so thank you very much this is just something added extra for yes and I that came up when we were implementing it and needed to publish keys so basically I have some Apache and nginx line 8 that is my enabled web servers keys regularly need to publish them in the DNS I don\u0027t have T DNS but you have a machine that kind of creates his own files and then has a hidden master and all that kind of stuff so I need a way to pull the East my keys from the web server machine into the thing that produces own files and a well-known URI makes that easy so I think it\u0027ll be worth defining somewhere looks like this so you have the in this case the public name is the beside I go to doesn\u0027t happy that could be something else and then on the in the know the well-known your I there\u0027s the name of the hidden site and what I did was just dump a JSON array of the keys that need to be put into their zone file and so could be adopted could be added as an appendix could send it to the IC "
  },
  {
    "startTime": "00:06:17",
    "text": "whatever but I think it\u0027s kind of useful particularly for kind of not necessarily for the main yes and I use cases of big CD ends but for people who have small numbers of websites maybe multiple virtual hosts so I don\u0027t really mind what way we handle it but I think it would be good to define it somewhere and feedback appreciate it I\u0027m great the lines forming because I was gonna ask who\u0027s read it so can we do that at the same time show of hand it\u0027s not much the read I know it\u0027s really short okay great all right well let the line form now remember we have an hour we want to actually talk about the es mi solution so let\u0027s make sure we keep this brief Ben Schwartz I think it\u0027s great to make it easier to deploy I imagine that you have to make a change somewhere in your hidden master to tell it to go fetch this stuff right you at least need to flip one bit somewhere configuration flag to say go check oh I guess this exists what I\u0027ve done for now is just a cron job that those \u0027verily and then what it does is it just triumphs pulls this URL check of its difference check if it works and then publish mostly I\u0027m trying to figure out if you need the dot well-known or whether you could basically tell your hidden master that here\u0027s the URL to fetch the years and I can I guess it doesn\u0027t necessarily need to be done well-known but yeah another h-2b purists I\u0027m not pure static find ready Daniel con Gilmore I like this we should be working on it you\u0027re describing this as something that your your DNS authoritative server would check and I\u0027m wondering whether you\u0027ve contemplated this being something that the client actually might check as well as a way of bootstrapping - yes ma\u0027am yeah I feel like we should we should acknowledge that that is a likely scenario not everyone\u0027s gonna have it sure access to their DNS server this can be able to run a cron job the way you\u0027re talking about yeah I also think this should specify the some sort of mime type can we just get a register of mime type for it just because we know what it is people wanted sure Tony Polly Apple yeah I think this is a interesting thing to do I think you\u0027d be good to explore whether or not we really need the well-known for it or we can do it another way so something to into so when we\u0027re asking the server for the the keys for a given name is there a how do I know which names I can ask in my setup I just know so it\u0027s just configured on to the DNS infrastructure okay it may be good to at least have some considerations around that because you know potentially if this is something that the server isn\u0027t able to give me the keys for I\u0027ve down told the server I\u0027m accessing this names like if I have this mismatch and I\u0027m sending this well known to some random rogue server not a rogue server but someone who\u0027s not really authoritative for it I\u0027ve just sent it a whole bunch of names FairPoint yeah David Skinner\u0027s e Google Chrome I think this is interesting "
  },
  {
    "startTime": "00:09:19",
    "text": "yeah let\u0027s bring it I don\u0027t know yeah here versus HTTP it\u0027s always tricky I like well known cuz this is a server wide policy thing and so preventing like if it\u0027s a blog a random page from changing policy is generally a good thing but that\u0027s work let\u0027s keep this here I like it Eric rajala so what are the semantics this in multi CDN use cases right so that seems perhaps something that should be resolved before we take this too far sure yeah I mean what I did I\u0027m I did this for smaller things my assumption is that Motel I so I\u0027m just see the ends will do something internally that\u0027s god knows what it is but definitely agree that if there\u0027s an issue then we should write so I guess like um well just in terms of we should do perhaps like perhaps um a couple spins the crank before we do much of anything oh yes the idea but I think like I like that be sure I guess Ezra\u0027s cussing later yes and I is a history of like I was doing things in discovering they stink um so um which I am I\u0027m a prime offender but um so so perhaps it\u0027s perhaps that\u0027s what we sure forgot here too yeah I\u0027m really happy to change my codes to do whatever people wanna do so it\u0027s not that big a deal PHP yeah and kind of I think that this might turn out to be problematic because at the level that you\u0027re doing the es ni authentication you\u0027re talking about it you\u0027re really talking about keys that have more to do with the host connection rather than the service and I think that the conflict between the two might well yeah I think it might be problematic okay if there\u0027s cases where it\u0027s problematic could be good to know that yeah dan oconnor you\u0027re more again I think one of the things that maybe this draft ordered explicitly state is whether this is expected to be an exclusive list or an additive list that is yeah if it doesn\u0027t exist what does it mean it that it doesn\u0027t exist if it has one element in it what does that mean if another element is discovered in some other way right that\u0027s I think that the trickiest part for thinking through what this means because now there\u0027s two different ways to get yes my keys and how do you juggle those things okay so thanks for the feedback what do I mean if I got that feedback in mail out happily incorporated another wherever the personal to and then you can think about it why don\u0027t we do that why don\u0027t you go ahead and revise it and then we\u0027ll you know not wait till the next meeting but you know after you prepped it well we\u0027ll go through it and do it so please if you said something then like send me email or send me off the list saying what you said because I won\u0027t remember well we got a minute taker too so you know are "
  },
  {
    "startTime": "00:12:20",
    "text": "excellent me to take her Joe nobody ever reads the minutes yeah well thank you yeah um David we actually agenda bash so you\u0027re you\u0027re gonna be next he doesn\u0027t have slides we\u0027re just gonna talk sorry this was just a quick last minute non presentation I guess no slides so I\u0027m David\u0027s gonna see from Google Chrome we I\u0027m just gonna really quickly talk about the draft Attila\u0027s ticket request so 30 second point of the draft is today the server decides how many tickets it sends to the client some clients need less some clients need more so this is a absolutely trivial extension where the client says I want and tickets we talked about this at previous sessions it is now a working group last call we had a good positive conversation in the last couple days on that working groups last call I chatted personally with Daniel are you in the room I don\u0027t see him with down we go about this and my and this is my kind of personal opinion of what we\u0027ve been seeing is people like this there was some support and but there were a few questions and it got a little bit confusing and we tried to clarify that so it sounds like folks so the the number of tickets you request is not normative as in its assured like you don\u0027t the server it doesn\u0027t have a must some Daniel wanna was interested in having that because he had an IO to use case where if he says I only want two tickets if you send him more it\u0027s actually uses up his resources and that\u0027s kind of bad but server operators chimed in saying like a must is a bad idea because that\u0027s really hard to implement for a bunch of reasons so the sense we got is that the folks that brush debated in this conversation wanted this to be published even with I should and they were okay with it so we\u0027re just I guess asking if anyone disagrees with that statement please come here can we have that conversation here otherwise like chairs let us know how you\u0027re feeling about the working class core is it going or do we go from here so I think if we what we\u0027ve done is we\u0027ve uncovered there was one issue in this draft so what we can do as a second working group last call not just on this particular issue with the actual text changes if any and just knock it out does that sound like it\u0027s reasonable because I\u0027m not seeing anybody run to the microphone to say we think it ought to be a must or we think if somebody wants more people want to pile on to say it so should that\u0027d be great for them it great and helpful too in one thing I forgot to say is after that conversation I have a PR right now which kind of rephrase is it it\u0027s purely like neon the works not any normative changes this really looks just purely an editorial thank you um Tommy tell me "
  },
  {
    "startTime": "00:15:23",
    "text": "Paulie as co-authoring there so Ike yeah I want to also emphasize I I think pointing this out and the confusion it generate it was very good for the document and looking over the text that you reworked and thank you for doing that I read what I was kind of thinking all along there so I think it\u0027s what was intended to be said so I I think you didn\u0027t send that to the whole list yeah and we had a we\u0027ve had a good conversation today right um to answer your question this is already the second working group last call with this all right and I aids another call yeah eyerly if we can just agree on the list that this was the right change okay because Martin Thompson did raise the point at the first one that he supports this but every time we have or he will ask all he\u0027ll come up with something else to say so maybe at some point we need to stop up to you but you know like just maybe let it run for another few days to make sure everyone has had the time because we\u0027re all not necessary check email today but maybe not an entire so you\u0027ve posted the pr already for the mailing list yes all right I\u0027ll I\u0027ll pile on top of that to say like look this is that we talked about it the working group this is what we\u0027re gonna do if you\u0027re gonna scream scream now otherwise yeah and like people were like oh well I would have kind of prevented that way but I\u0027m okay with this and I prefer this moving forward so right so this is rough consensus right this is like can you live with this not you know do I want to fall on the sword so an important thing like all that a lot of the proposed changes were editorial and we\u0027re gonna have an IETF last call where we can change if you make even more editorial changes so let\u0027s say this isn\u0027t the last last call all right time for the main show occur thanks for having me thank you nice yellow slides high contrast very important well there are it\u0027s like color correction these things names some work safety orange and I put it up okay this really should being called encrypted s and I this time for sure so backstory here is we keep taking stabs at this but having some problems in terms of getting this security model right you know I feel like you know we\u0027re at the stage where we were with you know like it took a long time to figure how to like get TLS right and apparently like we\u0027re tight isn\u0027t a compressed time and this is actually more complicated so um there\u0027s been um so one reporting now on I think the result of a pile of work by pile of people um in particular on Chris Wood and Karthik Berger Vaughn didn\u0027t know spent an analysis of like why we didn\u0027t have any problems in the past and then the design team or I\u0027m not sure we have a design team but a team of people got together and like banged out about 97 different options and then we try to figure out what to do so I um there were "
  },
  {
    "startTime": "00:18:23",
    "text": "some talk about like actually kind of walk you through the reasoning and I am I vetoed that because it turnes like you spent about 20 minutes on this morning and like so most that being like wait wait what are we talking about so I\u0027m not gonna do that I\u0027m gonna walk you through it what we propose we do as the outcome of those discussions as opposed to the reasoning for it um we have documentation um as LinkedIn here for like the analysis that we did that kind of walks through the options and we\u0027ll keep that updated so like there\u0027ll be some record you can read about why we think it\u0027s right thing but it\u0027s just too hard to track a meeting like this uh next slide see I\u0027m I\u0027m not used to having this so yeah so we did oh for um had some problems um I\u0027ll walk through a couple of them but basically there was number of ways to extract the the yeah the name of the server you\u0027re talking to which obviously is it kind of obvious the point because we\u0027re trying to have that happen they were all like active attacks some better some worse um they do not in fact threaten TLS itself but like says the point is to suppress the knowledge this and I like obviously that\u0027s not good here\u0027s the first one with a nice little MC s diagram this is basically a ticket Oracle so the idea is that the attacker goes in the hacker connects to the cert - to the server that he thinks you might be connecting to and acquires a ticket of his own so the ticket is bound to you know example.com right and or in this case X and then what the attacker does he captures the client hello and he acts laps on his own PSK PSK and PSK binder we have ticket for X and then he looks to see if I mean looks at the server responds and seizes the server like accepts the ticket and as the server accepts the ticket then it\u0027s probably the right of Sun Alliance or doesn\u0027t it the thing is probably wrong yes tonight it\u0027s not like perfect because I\u0027m multi CNS and like me the tags have one lifetime but it\u0027s a leak especially if he\u0027s like those are really quickly right so um so this is one kind of thing this is like a reaction attack on the server so that\u0027s not great um the second attack um is this HRR attack so basically the idea is there\u0027s nothing connecting like HR 1 HR 2 so the client says the first client hello and does the S and I and the bet and and the server Rick responds they sure are book is like this clients got the wrong key for some reason um there\u0027s no this is like totally that the attacker is not doing anything here this is just like bad luck on the client server um so the so the so the client like Jenners clang hello - and regenerates the whole thing with an aureus and i block and the server like strips at CVS and i block and basically because it\u0027s not just everything right and so um and so now this is sort of an attack on like a kind of scurry server implementation but the idea is that the server has like remembered the S\u0026I from the first connection and it\u0027s actually using that and if that happens which you shouldn\u0027t do but if it does then then basically the server will like proceed were like nor like the the es and i block that the attacker strapped on and like I bolted "
  },
  {
    "startTime": "00:21:24",
    "text": "on or whatever and go ahead and conclude the connection with the the s and I and the certificate was corresponding from like this is also a laser pointer oh well that sucks no it\u0027s not so um with the innocent on with the assign the corresponds to get from the uh um from the initial client hello and this is that since the G the X came from the attacker like he sends this difficulty attacker so how can me if we attack her so again like we could tell like a servers let\u0027s do this but like there\u0027s some concerns man anyway so it seems like we\u0027d want to have a defense that might makes it hard to jump server um so like when you sort of try to um in the mentioned Chris and Karthik kind of sat down for two days in in Paris and like worked out like I attempt to analyze I thought the source of these problems it\u0027s like like what are the things were what are the principles are violating this causing us to have this problem um so the gluten was basically it\u0027s like a lack of things being bound together which is like but a persistent problem with like deal has across the years so basically the ES and I and the client low contents because you\u0027re only binding the key share we weren\u0027t like binding anything else um between the client hello and client hello one inclined hello to and between the es and I and back there a meaning secret and a handshake secrets itself that is the keys used to put the handshake so basically the the fix for this is like aggressive what you do to press that we bind all these things um so the first thing we want to do is like bind the entire client holo and so one thing we could\u0027ve done circuit extended like the aad that we\u0027re already using to bind the key share but a that\u0027s like hard to implement and be it\u0027s like well that\u0027s actually quite inconvenient because that\u0027s less good than you like because we\u0027d like it actually like to cover as much of the clinical as possible not just a crypt the SNI is just one kryptonite Lex Luthor is like like easier to work with not because we didn\u0027t want like hi the LPN so basically the idea here is to tunnel the entire client hello inner encryption and I\u0027ll explain how I did in a second um second to tie the client whole l1 and client hello to so that basically you know that client Allah woman clan interconnected and finally to make the handshake secrets to pin somehow in the yes and I block and um you\u0027ll notice like these last two there\u0027s a little bit of hand waving going on because right time for exactly how to do them still so here is like I I\u0027ve added some disclaimers here um as you can see um I was trying to fear had some more so the that basically the idea is that we have an new extension called the client encrypted client low extension you\u0027re going to love that one and this looks pretty much like the old DSi extension it\u0027s got a cipher suite that tells you like what you\u0027re using to encrypt under it tell it\u0027s got the the diffie-hellman the diffie-hellman key share that\u0027s like your half of the other of the of the HP key ii system it\u0027s like telling the server how to drive the key it\u0027s got the record digest which tells you what yes and i record you\u0027re using and this is all old as this new thing called a ch1 binder you notice a TBD i\u0027m "
  },
  {
    "startTime": "00:24:25",
    "text": "i was handing being a bit but basically what it is it\u0027s what connects ch1 to ch2 so in the case of ch1 that\u0027s probably emptying the kiss - th - it\u0027s got something that derived from ch1 I was saying hash Karthik had some worries about that so maybe it\u0027s like a derived hash but something and then finally there\u0027s what used to be called like yes and I and now it\u0027s called a cryptic client hello which like an entire client which is the entire client hello that you started with so that the idiom here is a client generates like a client hello like encrypts the entire thing there\u0027s a new client hello and stuffs the encrypted client although in Hindi in the original client hello um so now um the relationship between these is a little fuzzy um I think it might my intention was generate them like entirely independently essentially but on particular one opportunity you have would be to have the exterior client elope we do more or less interesting than the Easter in the interior client hello there\u0027s some tension here because on the one hand that makes it easier it makes it harder to grease the existence of S\u0026I but in their hand it makes it makes heard a fingerprint taste your client allows so some tension between those two um so one of media question happens is like what is the transcript here because now previously we have like a transcript which we had what one transcript we had the like thing with encrypted si in it um and now you have to you have if the es ni is accepted meaning if you know the s ni ki then it\u0027s the client hello inter if you are in fallback mode which is to say you\u0027ve forgotten the s ni key and you\u0027re gonna basically complete the handshake with the public name which and then deliver like a newest anti Keys record I\u0027m gonna care what section it is but Adam Langley\u0027s fallback hack um then his client Jolla outer which by the way includes encrypted client hollow in or so how does the client know what happened we went back and forth from this one thing you could do is you can actually have like an extension in the server hello but we concluded trial decryption was fine and would like be like let go like make it harder to fit the FIR attacker to where I was going on that may be something we imagine reversing later um it\u0027s like why does this work so obviously the entire client hello is protected so that prints you from changing any piece so you can\u0027t like replace G to the X for your own G to the X you can\u0027t like add a PS k binder which was when Brock was part of the session ticket attack says that climb hello to contains a hash of client hello one so that provides mix-and-match attacks between them um so um on there was a several attacks here what Elm one by Nick um onyx all of him which I didn\u0027t show and finally the handshake secrets depend on the s and I block I\u0027m actually two ways to think about to have this happen one is that we have the ESI nonce that we already had or you or alternately as David Benjamin suggests ik you have to climb hello random be different between external and internal and so since that affects the handshake keys that means that anyone who doesn\u0027t see um the UM yes or no yes and I block their collateral inner therefore I can\u0027t derive the key material on the second "
  },
  {
    "startTime": "00:27:27",
    "text": "option which is to explicitly take some value off the SMI keys block and shove into the key schedule explicitly rather than simply view the transcript so one option is basically so right now we\u0027re not using HP so you have like is easy this is easy from like G from like the diffie-hellman exchange around yes and I and you could just HK you have some other thing off it and shove it in the key schedule like at the zero or with the extended key schedule stuff Jonathan was talking about on so these are two options we haven\u0027t quite side between them um I\u0027ll talk for a few minutes later about why you might want one of the other um so like objection like one is like wait wait wait wait this is like really big cuz like you have like lanolin ER and you have planned a whole other in the same it\u0027s like now it\u0027s like twice the size like so this is not like a crisis like most the time um these right now because these are schemes will be pretty small and like in quick in fact you\u0027ve got like basically pad the whole thing out 2012 anyway it\u0027s like which is like thing is ghosty padding but um if we\u0027re gonna do post come on key exchange we\u0027re gonna be kind of like sad people because like these these things are really big and now like having be twice as big as that so um we came up with this hack which is basically that you hoist the extensions like out of inner and outer or out of outer and inner however you want to think about it the bottom line is the extension like when the client general is client hello in or anything he\u0027s duplicating which probably be key sheriff in this case he made that he basically takes he basically generates the whole client hello in her including the P escape binders if there aren\u0027t and then as part of the process of encrypted right before encrypting he like moist them out and replaces them with like a pro a stand in that basically says go look at the outer for this thing on then the client so on then the client facing server after the communis and I block restores them so you have a complete client below is it supposed to be um and obviously they have to be authenticated because otherwise your the problem of light makes impact attacks again so this guy is something that Afeni Kate\u0027s them in the PR that I have um basically I had just like some extension that says like this extension was come from the outside and here\u0027s the hash um David Benjamin points out that that means that like you can only use this trick for um for like things which are inherently super large um as opposed to things which are small there\u0027s some tension about how much we want to encourage people to do this so there\u0027s some suggestions out how to spell this but the bottom line is it\u0027s got to be like be able to pull it back out and back in again it has to be authenticated um but the bottom line is at the end of this process you end up with like an ordinary vowel to client hello including if there was a PSK binder that PS cane binder is valid because you put like whatever he took out back in again so um whoever told you you couldn\u0027t compress and curcuit stuff I guess there were other way around um okay so um one of the big open issues here is this handshake keys thing as I said um the handshake keys must depend or be depend on the ESN I block otherwise your Oracle problem um so on it\u0027s clearly a case of something like trivial level that if we have like the nonce or we Garrett require a different client random then it\u0027s part of the "
  },
  {
    "startTime": "00:30:27",
    "text": "transcript and that includes part of the handshake keys so this seems to have the nice property that maybe it allows I can unmodified back-end surfer deserves there\u0027s the big baby there so on there\u0027s like a number of reasons why you might think I\u0027m unmodified back-end server might not work as one example as Nick Sullivan point pointed out to me lately um it may not be padding like the court the certificate in which case like you might be kind of sad so we have to decide how much you value that um the sort of annoying part about this is it requires some more assumptions about the transcripts secrecy and the nature of each KDF so we don\u0027t ordinarily assume that the client hall that was secret at all and so if you had some problem we\u0027re like TLS leave the client hello in some way then this whole thing falls apart um and so like as an example that as an example the court they pointed out imagine that you built your stateless HRR mechanism by like taking the entire client hello and like stuffing it in like a unencrypted but like a chthonic gated block in the cookie right now you\u0027d like obviously how that kind of a problem um so like that maybe seem like a far-fetched but there you go on so option two is to UM throw away the nonce um so you don\u0027t need the nonce anymore at this point I don\u0027t think don\u0027t think and then take somehow take the es and I shared key and generate a new cue off it and shove then the key schedule explicitly um this obviously requires modifying the back-end server and it requires not want to find the back in the server but having a way for the for the front-end server if they\u0027re if they\u0027re split she liked all the back-end server what the key was so we can shove it in the key schedule so that\u0027s like sort of annoying credit and coordination on the other hand it seems to rely on let\u0027s dance some poor assumptions because if you don\u0027t don\u0027t worry about the you know the what you don\u0027t don\u0027t worry about the the transcript secrecy one thing you might worry about however is what happens to the back-end server and server lies about what goes into the key schedule I don\u0027t think that\u0027s a problem with this but Jonathan\u0027s talk really at this morning made me worry about that a little bit so so something we have to think about so um all the pros resolution here is to start by publishing for after 6:00 just to get like most enter brush out of the way use option one because it\u0027s like straight or straight forward but reason about and then do modeling on both involve in the list um I think from for the perspective of of the people my prospective and I think other people looking to play this quickly a lot of the uncertainty here is about like getting the DNS pieces working and getting some experience can anything working at all and if it turns out that we\u0027re like rolling it out and like there\u0027s something sell all this that creates like the creates like a wait a reaction of attack so like extract this and I like that\u0027s obviously not good but if we\u0027re just all we\u0027re doing really is trying to get some deployment experience then it wouldn\u0027t be a disaster as long as it\u0027s an implicit TLS otherwise if someone else thinks and analysis is wrong I\u0027m certainly inclined to hear it but I think that like Alexis can make some progress um and we expect it be the same software another case really three similar software another case so again like I said we\u0027re trying to get that right the plain experience in terms of "
  },
  {
    "startTime": "00:33:27",
    "text": "in terms getting yes and I filled and like because right now the asana that I was leaking all the time like this didn\u0027t if it turns out that like yes tonight does not in fact but if he has neither we\u0027re hoping like I shouldn\u0027t make the situation worse one hopes I\u0027m gonna come to regret that saying that I\u0027m sure we I mean we certainly don\u0027t want to play anything we\u0027re not confident make the situation worse which is one reason to stick with option one where we\u0027re like I think we can go out to be confident does not make the TLS stack tales one three week or otherwise um again one hopes um that\u0027s what nightly is for the so we have a couple of other open issues this is about how the DNS is deployed they said is deployed in DNS so um David Benjamin pointed out that right now on HTTP service we allow one HTTP conveys and I can fake prayers to be service record which obviously means like that whatever light I\u0027ll really we have on thinking like the IP address and they yes and I config is like totally confusing and if you like pick the IP address and then you\u0027re like oh wait I don\u0027t speak the CS and I can fake version maybe have to fall back so it\u0027s like really goofy um his solution it was I agree with is to bundle all this and I can fit options into es mi configs and put that in HTTP service this like seems totally sensible and like you know I think we should do it if anybody objects like this speaking now this is PR 200 okay Pio 201 Oh so you can still have multiple orders for the HTTP SVC though right yes but it\u0027s probably not a very good idea well it\u0027s on you go D if they if they get they\u0027re different yeah you can do it yes sorry is fine idea yes okay next slide it\u0027s like reflex okay so the second thing David Benjamin suggested was to flatten the s9 config itself so right now it\u0027s 9k fake contains like a master list of parameters like the cipher suites and then multiple key shares David\u0027s just it that we flatten this so you have like one key share per config and if you want more than one key then you have more than one can stick um that\u0027s unfortunate that said some unfortunate typesetting there because you have you know multiple yes and I config oh I see where I\u0027m going with this so on that last s on that last line should not be set in whatever font it is that she\u0027d be set in like the in like the main font it\u0027s okay that was here wasn\u0027t it so the upside of this avi is nominally implementation simplicity um I\u0027m actually that\u0027s the case but David seemed to think it was yeah I know I have the same thing um on the down side obviously is duplication which is that like um you know if you have like if you if you have four keys then you end up with four copies of the parameters lacrosse um like I guess I\u0027m "
  },
  {
    "startTime": "00:36:30",
    "text": "I\u0027m I\u0027m motivated to reject this but I\u0027m like nah collide on the ground over this I like your other people think Alessandro cadena CloudFlare this is how we implemented es and I already anyway but it like from our perspective it wouldn\u0027t change anything but I also don\u0027t really care about I don\u0027t see the the simplification in the implementation that much to be honest I mean even if we add like multiple keys so because like if you have multiple keys you would have the same the same negotiation process that you already have for normal quiches oh but that was like whatever I put that question right there as I started thinking about this I seem that was harder for me to implement not easier because I had to dig in because I had to dig into the key shares to find out which one I want to pick there Stephen well I\u0027d be for flattening I think getting rid of the complexity in there is it is it a bit simpler I think for me benkei duck I mean I think it depends on how many key shares you actually expect to have if you\u0027re only gonna have like one or two than flattening sounds like good plan but if you\u0027re actually gonna have four eight you know then it\u0027s not matter Tony Polly to clarify does anything stop you from doing one key share previous and I can figure if you want today um I don\u0027t think so okay so right so exactly so you can get this benefit it\u0027s kind of just an implementation choice you don\u0027t really need to specify it and it can just be like a best practice to do it that way I think that I think the point is that the client did the client negotiation of augmentation iterate over the key shares so I think I think the issue is right as I understand it is um that um I guess David I guess I\u0027m not sure what your implication you have a mind like the one I expected I mean your implementation is you\u0027re gonna parse all these and then pick up a ball with the key sure you want so I should probably mention that originally these two or one PR and then you pointed out that there was two separate things yes so I\u0027m actually like kind of like I don\u0027t care too strongly a first one the the the the motivation was that was basically looking at Steven Pharaohs draft the the the representation for the server configuration is a list of of tuples of es and I config the public part and then a list of keys and so you\u0027ve got this like double list structure and so when we were trying to add an API for it we were like okay well we need to have like add keys and here\u0027s the public thing and we need a list of keys over there and then you call it multiple times and it just got a little it was like this is kind of annoying we already have a layer of things so if you flatten it then the structure becomes a list of pairs of public thing private thing which seemed a little more straightforward but like I said I don\u0027t all that strongly right I mean so again "
  },
  {
    "startTime": "00:39:30",
    "text": "I don\u0027t kill a young either I would made it for our case but from like the way our implementation works is we deceive realize the structure and then we negotiate things in sequence right and so now we have to do is like deserialize all of us you know visualize to start either reduce your odds all structures and stuff them in a list or deer shows a structure let\u0027s find the key share then look at what you\u0027re saying it\u0027s and I pass it like stuff like like store all the other stuff and then come back um maybe if we put the key sure first that problem going Ben Schwartz so since it\u0027s not explicit here I want to point out that I think the the only significant thing that we\u0027re talking about duplicating is the fallback name the the other the only other thing that I think where we duplicate here is the cipher suite yeah identity which is minimal yeah so it\u0027s the it\u0027s duplicating the fallback name that\u0027s of concern here and the other thing I want to point out is that the ES and I configure a bundle I like the es and I bundle name is still only scoped to a single IP pool essentially so if you are in a multi CD in case you will still have about multiple RRS and it\u0027ll be divided so that that may mean that essentially yes my bundles are not going to be very large that is their their scope is still limited okay I\u0027m not sure I believe that\u0027s the chairs gonna make progress here that\u0027s the chair table since since nobody\u0027s talking on the Michael talk get that Schwartzman I do think that it\u0027s a little silly to replicate the fallback name multiple time so you have an RR from a CDN and and in that are are you have multiple copies of that CDN telling you it\u0027s name like this seems weird I mean I feel like maybe we need that more discussion about this okay then just like you know typically like if we have like clear in the room and then we take it I just don\u0027t know that we have that here okay okay so next steps um I think we\u0027re gonna publish uh six um I think we\u0027re gonna want to spend some time doing some modeling um I got something disagrees republished those six with like variant one with the nuts I think the next I want to be persuade ourselves that like actually this is like safe at least as far as like not affecting one three before you ship anything like that would I\u0027m gonna be as if I was saying earlier I\u0027m gonna be pretty blocked into like ship this in like in the product until I have like some sense analysis that shows it doesn\u0027t make one three worse that would be scary um and then "
  },
  {
    "startTime": "00:42:31",
    "text": "simultaneously do modeling on the unnatural options and see which one we think um works and see like a is it possible to avoid modifying the server at all and be his transfer of secrecy ever a property we don\u0027t need and the circumstances the and sounds like we have a resolution for two hundred will discuss 201 in the list and um then I think we need to decide on maybe this that document renamed um because it\u0027s not Lee it\u0027s an eye anymore that\u0027s fun it\u0027s almost editorial and some some respects okay if we decide that we\u0027re gonna switch to being an encrypted client hello then we\u0027re gonna call it something okay yes and I hate with a blip that should be called echo by the way so I guess on to Oh on the point for the working group is that I still think we should be shooting for starting the working last call in early 2020 so that to me means like end of January because it\u0027s holidays and who knows what but it would be nice if people could get their eyes on 201 to see if we can you know really come to closure sooner because of choice yeah I wish I can do less call until we have substantially more analysis at this so I think like that\u0027s gonna be the gating factor run in 201 anything else what\u0027s the question mark after HP k I\u0027m sorry thank you I miss that um so right now we\u0027re using this sort of bespoke quasi HP key thing where we generally like we published a few Hellman key and then we didn\u0027t really new fresh to be on one key and like essentially is HP key but it\u0027s not HP key on so I think I\u0027d suggested several suggested like just wasting an HP key um I I can\u0027t really think I want to share to the last time I camera roll it was was it Martin but Nikki\u0027s um I think I should do that um but I\u0027m also willing to listen to somebody said you shouldn\u0027t so just Forbes worth I think yeah I\u0027d be supportive of making that HP ka changed you know at the same time there\u0027s Richard Barnes on one of the HP ke co-authors I think yeah the HP ke is is a good operational fit with what you need here and it should be ready in about the same time frame okay um so one thing is relevant here is if we do the option to will need a way to take off an exported key out of HP key um is that something that\u0027s being done that is something that Chris would may have suggested to me and has not been implemented yet but should be straightforward yet okay can we can we get you to start we\u0027re getting there PR is welcome no no can we get you to start working on that I have to make PRS okay so I\u0027ll prepare a PR two or one of us aware PR two HP key you can make this AP AP he and we can make sure to like because that\u0027s the list of that see if anybody Ajax tell me Polly Apple um so yeah thank you for all of this work and I think the plan sounds good in all of these "
  },
  {
    "startTime": "00:45:31",
    "text": "options are good things to dig into hopefully we can get this done in that timeframe as a clarification or also like a bike shed type thing when we talk about the encrypted client hello do all of the options require essentially having like the full client hello in there or is it is it really just like an encrypted set of extensions rather than a client hello yeah give you a question um I guess my instinct is to I guess this is a matter of sort of like so we say intuition right like my intuition is get it all in there like every time we tried to like light the snake out with less we\u0027ve been sorry so my intuition is get it all in there I guess when you perspective people have intuitions different I guess my intuition is to make them as I mean does a said earlier my intuition is to generate like a completely fresh clan hello essentially and have them be different because I say that the the actual like the actual like space overhead is remarkably low when you separate the key shows themselves um and um so that\u0027s like where I am but like I think other people may be here it may be different um I think Richards like nodding I told you so since he like was the person who originally suggested like encrypting basically everything um right okay then that\u0027s fine if that\u0027s what we have to do I think some of the concerns that come to my head there are like now you can have more things that could be not just duplicated but conflicting it\u0027s clear how to process them well I shouldn\u0027t be unclear it shouldn\u0027t be unclear to process them the way you process them is that you push the claim hello if you CBS and I you decrypt decrypt it and then you throw in everything else you just only use one of the other yeah okay modular this goofy decompression procedure yes so like that that definitely will make clear in the specification and so like in particular like you know like the randoms may be different so they say this is also a source of tension between greasing and and fingerprint avoidance because the fingerprint avoidance is actually very attractive to have more or less of standardized external client hello is the only purpose the external fine hello is to allow the server to respond with the fallback keys and so like you don\u0027t need like first this post quantum you know he\u0027d like you know whatever but on the other hand the more you the more you sort of simplify internal clock and so like we could imagine you publishing like a standardized one but the more you do that the more it stands out that you\u0027re like actually doing yes and I yes yeah just one last point I think part of the reason probably my intuition is the other way is I come from more like doing Mike and like there\u0027s a lot of precedent there for having you know your main protocol header you\u0027re essentially extensions and then a block of encrypted extensions and so there is a fair amount of precedent for the church in these type of handshakes I don\u0027t I use Nick hello Nick Sullivan cloths are just wanted to clarify one thing specifically about early data that early data is not in the encrypted hello it\u0027s after the handshake just wait so yeah if "
  },
  {
    "startTime": "00:48:35",
    "text": "we do key injection it becomes much easier to reason about whether you can just do in Krypton\u0027s then it could encrypted extensions rather than encrypting a whole client hello why is that because you know exactly what is bound where whereas this we\u0027re just using TLS as a transport layer and so much go decompression I read the fault I don\u0027t follow that but like I\u0027m not saying it\u0027s wrong I\u0027m just eyeball it so I think people want to pick that up when we start doing the modeling sure well I\u0027m looking forward even trip enjoyed that\u0027s my first when I go with that the if you have if you if you want to do an encrypted client hello and you know exactly the and you\u0027ve bound it to if you go step back and say we have no interior clients below and you then just have a key that is used to just encrypt the extensions you can it\u0027s easy to reason about who who has that key at what points on whatever and you can just oh if you know if you don\u0027t want to work through the I give me five minutes well sure think about your time now but like laters Wes Wes verdict or I say so congratulations for actually literally documenting encrypted Turtles all the way down you\u0027re welcome and actually right back up again since you were talking about pointing you know back up to the top of the show the the Telus protocol in general and all protocols in the ATF have had a horrible time when complexity arises that you know implementations get stuff wrong so honestly as to which I would do I\u0027d be very tempted to implement both and figure out which one got me more code reuse and and less prone to error because that\u0027s a that\u0027s a very impressive hack and I can\u0027t believe I followed the whole discussion to be honest sir burns yeah those are true Barnes again and feel free to tell me to sit down if this is a dumb idea but it seems like if we\u0027re encrypting the client hello we could also encrypt the server hello yeah we in which case you it has the benefit of just being encrypted hellos or yeah interesting interesting interesting suggestion um has it has it has the benefit that you can actually as the benefit that actually you can distinguish that then you know in through trial decryption because you can look at the first you can look at the first bite whether record type which will be application data as opposed to handshake so Deb Cooley NSA can I get you to walk through something a little bit so client hello inner and outer you\u0027ve got the inner one which you had "
  },
  {
    "startTime": "00:51:37",
    "text": "originally you\u0027re encrypting it and recreating an hour one are you gonna force a validation between the inner values and the outer values that are the same I\u0027m not gonna let them be different so is it like let\u0027s take a concrete example you yeah in yes the the random values could be totally different oh yeah yeah yeah okay um like yeah essentially essentially unless like like imagine you\u0027re not doing this compression prick they could be there totally independent immersion trick is you know they\u0027re obviously ones have not that are that are that are duplicated like can\u0027t be different but the ones that are not you the ones are not e duplicated yeah they\u0027re like they\u0027re totally independent is the idea you know been connect so like you can imagine a world where you are doing the fingerprinting avoidance where the outer final oh is like literally fixed except for the encrypt a bit yeah and so then you know they\u0027re always gonna be different inner and outer oh I say so you\u0027re not gonna encapsulate anything on the inside that you also carrying on the outside only for convenience yeah the outside is just for the case you have to fall back and do the finish the handshake but you know sort of fail the operation by returning the new yes Nikes so I guess when you started talking about this it sort of threw me back in time to a protocol called sp3 which is an early early early IP protocol where you didn\u0027t kept slate you had an inner header and an outer header basically and you had to be careful that too like you passed it are you translated at earth you had to be careful about how you did it because you had things in both places and you talked about like an IPSec it\u0027s sort of the same idea there too if you had values in both places you need to make sure that this one\u0027s the same as that one yeah I think that we\u0027re taking the opposite posture which is just not having it yeah you know you don\u0027t you don\u0027t check them you just ignore one or the other yeah like invade invest this point because some have it you can\u0027t you can\u0027t have it both places well maybe in this case that means like in their most to your case right you would have II you I mean it\u0027s like you would have a key share in the outer client hello and you have one of the inner client below and there should be two unrelated or at least not for different purposes right um no no what say LPM no I mean they\u0027re not I mean they I mean they\u0027re for different purposes in the case of the other key share is for the server to use for fallback and the inner key sure as a certain is that for the server to use for completing the handshake or yeah yeah so I\u0027m thinking so here\u0027s an analogy and it might be a bad analogy but it\u0027s an analogy right so you\u0027re writing a check I mean maybe some of you\u0027ve never written checks before I haven\u0027t a check so you write a check when you\u0027re ready to check you you put "
  },
  {
    "startTime": "00:54:39",
    "text": "the numbers of the value of the check and then you write out in words the values yes as well those things are supposed to match right and if they don\u0027t you have problems right so in this case right so in this case they\u0027re supposed to be independent so they\u0027re different right yeah well not but they but they don\u0027t you don\u0027t care if it in front of the same so you don\u0027t care if they\u0027re the same as in the check if you have different values you have the problem yes think is different from the check yeah all right I this is interesting this is it\u0027s been a little while since I\u0027ve looked at this please do cuz like obviously this is extraordinary power gated is there gonna be a way to not do this yeah you won\u0027t have to each other at all okay I mean I in fact to be a lot of clion it like many people will not do it I wish more what more would not do it I wish more will do it but I imagine many will not you know would say I said well let you know oh that\u0027s good here I try to make products people like Ben Schwartz so two free ideas one like CTLs you could treat these inside to outside references as as reconstructed that would that would put them into your transcript and put put the imported values into the transcript that\u0027s what supposed to happen I\u0027m sorry for wasn\u0027t clear oh okay thank you and the second is your yes and I bundle could actually provide instructions for fingerprinting resistance for example that\u0027s in 20 nursing session Daniel can go more so one thought in response to Richard Barnes suggestion of just having encrypted server hellos in response once things are encrypted is it that gives a signal to the observer on the outside whether or not they hi hello it\u0027s accepted I\u0027m not sure that we want that signal to be visible yeah we want there\u0027s a comment in the PR but that I think because I was going back for for the same reason um the so like that that doesn\u0027t like an obvious drawback um I think that the the I think that maybe that\u0027s right other drawback than otherwise was is it the Prime the only real the only real and the only real reason why the server board acceptable versus reject is if the yes and I can fake corresponds to a key which it recognizes a person is not recognizing and you can probe that directly anyway you can generate your own perfectly good yes and I client hello isn\u0027t that same key and see if it\u0027s accepted reverse is rejected so obviously passive and active or not the same thing but that\u0027s a reason why we might care less than otherwise would again I I\u0027m going doctor for from this too it\u0027s like I understanding sir I just wanted to observe all systems we "
  },
  {
    "startTime": "00:57:39",
    "text": "were talking about weird analogies that may or may not be appropriate that the the work that\u0027s going on in lamps right now about protected email headers has a remarkably similar smell to this yeah and if smell is about the right way so we got three minutes less than that session so please keep it brief quality Apple just to the point of if we have such a duplicate and checking I\u0027m concerned that if we say oh we\u0027re gonna ignore them but they\u0027re probably gonna be the same that\u0027s not gonna be the case like at some point what everyone\u0027s doing yes and I people will use the fact that there are different values to give different signaling and so I think if we have duplicate values and some outside of some inside people will start using that joint for things and we need to think about the consequences of that yeah I mean one thing is we could simply require that anything that wasn\u0027t duplicate being apparently generated the only not follow that but oh yeah I came up with a really great way of solving this problem and then suddenly realized that it depends upon an IP a web PKI certificate with an IP address in it which of course we have banned that\u0027s not true you can get it you can get a PKI certificate with an IP in it we have one four one one one one so so nix 11 cloth layer I\u0027d like to point so if we go back to the two options I\u0027d like to to point out that these are not necessarily different I think option two can be complementary to option one and I recommend that we go forward with option one and and it went and spend a draft as he said do the analysis and uh and this will protect against passive observation right and option two is something that can be implemented as a separate extension inside the encrypted client hello and I think these are both complementary and doing option one without option two gets you some of the way and two together and together gets you I think all the way so I thinking I think this is a good direction thank you you have 19 seconds okay hopefully this will be clear this time with he with the injected key you know that the back-end server knows the injected key with the tunneling you don\u0027t know that the back-end server knows the key and in split mode it doesn\u0027t agree so the reasoning is simpler because you know that the other side knows the key thank you so the one thing we didn\u0027t get to is Treader discussion thank you thank you for this lively discussion was good we bumped the Charter discussion because this is way more important we were basically when you take the Charter discussion the list if we start adopting all the drafts that we sent out working group adoption calls for today we have to recharter so let\u0027s consider that it\u0027ll be a prerequisite so look forward to having that lively discussion on the list that the chairs have taken a shot "
  },
  {
    "startTime": "01:00:40",
    "text": "at the Charter and we look forward to your edits thank you alright we\u0027re even like marching in time good job guys don\u0027t uh don\u0027t forget your plugs you know yes I\u0027ll send you a trap stuff because I just wanna like we\u0027ll see "
  }
]