[
  {
    "startTime": "00:00:15",
    "text": "all the objects goodnight we\u0027re citizens are not taking jabber someone would volunteer you know taking ups my mother very much first breath is enough Americans it\u0027s absolutely worthless "
  },
  {
    "startTime": "00:03:15",
    "text": "oops guys and enough takers Sunday would you take notes would you take notes thank you so good morning everybody welcome to Prague and we\u0027re about to start RIF meeting they give one up for well so please read not well if you haven\u0027t before and we\u0027re about to start okay so very quick update on the working group status and plan we have the base protocol settled Toni will provide detail update so in this session we also have two interoperating implementations except that security envelope in the post implementations and except some teachers in the open source implementation again a detailed actually what we provide later so our plan and ongoing activities are that by now for the best protocol basically into a soaking time mode we plan to issue the last organ group last call at the next idea we\u0027re already a requested security idea early review and we are looking for reviewers for the protocol and specification itself the core team has been working diligently on this all the time we do want to get reviewers from outside the core team so that we have actual scrutinize ation on this particles discussions are ongoing we will have a presentation on that as well today young mother working is ongoing we are still looking for volunteers working on the applicability statement and threat analysis documents those other the milestones already set for this group when he was shattered there are other work that like a party together prefixes and SI extensions we have drats that\u0027s got splitted out of the base spec we have not really had not "
  },
  {
    "startTime": "00:06:16",
    "text": "started serious work on those yet those working on get started once we settle the the base protocol so the protocol spec itself has been promising really nicely young model hasn\u0027t really need to catch up on the latest development in the protocol spec to have young model matching it so I\u0027m looking at authors please make sure datum Ellison sync with the protocol itself yes now as the cause of rift you know we have tried to keep the consistence with the protocol draft and we need a more implementation and the verifying for it yes absolutely thank you I\u0027m going I\u0027ll order if I\u0027m not just being a pain about the process the threat analysis we had agreed that it would go from relegation with the protocol aspect sorry we had agreement of the charter of the threat analysis would go for publication with the burgle spec so just to reinforce what you said please you know let\u0027s work on that if we\u0027re going to last call the spec by the next night yeah if we need to really get working on the other stuff certain we also requested the early review from security to get first set of inputs blue sheets please sign them so we have a slight update on the agenda Gregg muskies PFT presentation it was already scheduled at the very end by we\u0027re going to put forward after Tony\u0027s provides update on the base protocol specification Tony young you should work sure okay morning Oh starts to look like the only OSPF worker of meetings just act like the crowd I\u0027m slightly under the weather so don\u0027t expect my usual you know witness chairs are closed as well I downloaded earlier but I some I\u0027m having trouble find it "
  },
  {
    "startTime": "00:09:18",
    "text": "now haha sorry so Bruno is hanging out somewhere in Argentina having fun refused to come and give you no show his struts just test very good all right so we published Oh for like a clock what happened in very rough terms yeah three bump to for pretty much the whole spec is done lots of open-source code has been written we interrupt the staff on a regular basis Bruno\u0027s framework allows basically to plug any kind of implementation there was talk of some 30 implementation but you know talk is cheap code this heart and we had this once or sometimes twice a week these meetings and zoom it works like a charm it just push record and for like an hour hour and a half it just share stuff and toss stuff extremely productive normally three four maybe five people some providers come in just to listen and like three people are cranking the stuff the whole aspect is on get so you know all the people can go and modify the stuff basically action items are taken at the end of the meeting and then people too can work on the gate election verge it\u0027s extremely productive model I mean if you can go and tackle a problem like that in ITF I think all right so see all green very good so last time about the third was still yellow there\u0027s this little outlier little tail hanging off which is orange on purpose because there are some excellent multicast ideas being taught around we went through a couple of iterations it looked a bit like a pimp idea but we realized that to build pimp ideas kind of beside the point if I\u0027d you can run pimp ideas as overlay but the ideas that are being tossed around now actually quite novel revolutionary I think Pascal has a press all and we\u0027ll walk you through some of the thinking I one hard problem remains unresolved by my gut feeling will resolve that and then we see whether the multik has become part of rift but it will not be part of the base back I think even the timelines until something changes and I talk very quickly about why that is not a problem alright so rough statistic just to give you an idea again you know how much work is being done so we have this core contributor list somehow it evolved that way I don\u0027t know why we don\u0027t do it on the rift list but you know that\u0027s the chairs so we have hundreds of threats right flying around we have on the open source version about three hundred eighty commits so if anything is really accelerated we have two hundred five no between the last eight years and one oh I\u0027m sorry we\u0027re just real quick why don\u0027t you do this on the idea of mailing list I don\u0027t know "
  },
  {
    "startTime": "00:12:18",
    "text": "just a loud way can you please do that look my monkeys I\u0027m happy stuffs progressing you don\u0027t have a problem right you don\u0027t have a problem with the discussions about the protocol happening on the mailing list for the working group the the decor design team basically they it\u0027s a they have their they have but their daily weekly discussions just happened is on the own that it\u0027s actually not a not a mini list it\u0027s just the people just use the nothing nefarious about that memberships okay because people pick me at them and they mostly fall off don\u0027t ask me but you saw I mean on the weekly basis recording the synopsis so that\u0027s where everything happens anyway I don\u0027t know I mean perfectly happy I\u0027m just saying already it would be nice the ATF process is open there is etc you know if I look at the list there\u0027s nothing right yeah there\u0027s very little because everything is going on this you know this and it\u0027s not even a list it\u0027s justice everybody copies everybody that\u0027s pretty much you know I I don\u0027t have a problem in the future I want to avoid problems when you go to the ASG and we look at the list and there\u0027s nothing and you know be nice if there was some discussion there that\u0027s all you know I can copy/paste this stuff well I have some kind of a folder and I post this couple hundred things on the email and we can always do that that\u0027s a big deal so like I said we had about twice the volume of you know of commits on the open-source bunch you know if people started to contribute lots of stuff started to get poured pulled in if you also see the size of the patch which is you know a very rough indicative when you run just did from last ITF to this you know what is the diff coming out it\u0027s you know like 25k lines of code the last time was about 16 K I expect this stuff to trail off significantly now yeah I mean most of the spec has been done also in open source but what you see is that the spec slowed down significantly right so we have like 5 K diff lines compared to like 7 K deep lines and last time we had seven Mobile\u0027s change on the protocol you know encoding at the models and now we have three is it\u0027s really like drilling off of course no millions of ideas laughter dynamics right extremely open stuff is being tossed lots of stuff is being scrapped the very good dynamics be kind of a pity when it starts to wind down but that\u0027s the weapon no way of the world so what changed now what did we do to actually make everything green so there was a lot of discussion on the security envelope and it led all the way to secure it the models and you know "
  },
  {
    "startTime": "00:15:18",
    "text": "talking to a bunch of people actually running fabrics what security models looked what would you what do you desire not what can you have today if like what would you desire so we have kind of a security model for the fabrics and you can basically go up down and scale and trade-off out of that the security envelope went through a couple of iterations because we had to accommodate those security models and my ambition was actually to address all the threats that the ITP so they cannot address for historical reasons I think we did a decent job on that we move this we shorten a lot of types include sequence number arithmetic in that\u0027s kind of you know minor but still you know something that needs to be done and has to be done carefully to not to break things some link up abilities moved in we someone probably just run no bias update over the internet on the microphone or something so the flooding so we did a lot of flooding scaling a lot of we talked about the hackathon monkey testing and one corner casey marched on i don\u0027t remember so we actually i think we have to flooding now completely in place and we highly confident that this stuff works which is like in autumn the main engine right clarification or flood reduction because bruno implemented frog reduction zone here of course asked a lot of stuff and when this stuff was going on more discussions happened and pascal i think started to talk more in depth about the in caste problem which explains a falling in caste which already had a solution but in explain why this in the spec so when they asked the question we started to tear the problem apart alright so the security came over nicely misaligned so i think this is this is quite quintessential and down brought most of the staff and there was some point all right I can oh yeah cool all right so yeah I can\u0027t like really a pointer so so we what we realize that there is like the convenience of zero touch provisioning it\u0027s actually a counter force to security right so if you really want to run a zero configuration fabric you really don\u0027t get much of a security at all because anything can plug in and just work with it and when you move up the scale you you know you can start to start to fix things to make sure that it doesn\u0027t show up in funky places so you can say ok this is your land or don\u0027t show up in any other place but then you can go to something that you call the fabric association model which is a funky word "
  },
  {
    "startTime": "00:18:18",
    "text": "for everybody has the same key right shared key and even if you have the share key on the fabric you cannot you out the fabric so well that\u0027s kind of intuitive then we move to something which we called north association model which is basically in our everybody has to verify the guy he\u0027s talking to and you thought that state of it but actually it\u0027s not date of it there\u0027s a far more interesting case which we call the port Association Marvel so if I bring up a node and I have a lot of neighbors north or south I could just take any of my ports and just plug it on the correct structure and it would work but certain people are very concerned that a correct port is plugged into the correct port on the other node so that kind of corresponds to a keep error on each interface all right so that of course becomes more and more provisioning intensive and integrity of the fabric goes up all right whereas if you go down it becomes more more convenient and zero configuration you know there\u0027s literally no rift configuration everything just comes up when you plug it in or you know when it\u0027s miss Moorea it doesn\u0027t come up all right so when we looked at so there is actually already a section which is kind of a threat analysis in Reverse we basically describe all the attacks and how they are mitigated so maybe that can be just ripped out and didn\u0027t a new clothes of the necessary and no threat and now it is draft and what we do more above the traditional routing protocols is that we protect a lifetime and I talked about the stuff which was kind of the last threat which is open and iGPS I think you know we published something Ania sighs but those are more like band-aids you know making it harder to attack but not really preventing the attack we have nonce exchanges adjacencies which basically prevents any kind of replay attacks all right when you read the spec we have been very pragmatic how we go about the nonsense so we live open a window otherwise you have basically to sign every single packet it\u0027s just you know the load is is excessive we do not encrypt so we see what a tease come back from we do not consider that contingency allottee is a desirable you know property of a routing solution and the cost is you know very high we provide origin integrity which means that if people inject something the network they can only do it if they have the correct private key and we do provide the integrity of the adjacency but that does not mean that we\u0027ll be able to trust of chain of trust those are subtle differences I\u0027m sure the security areas will have discussions "
  },
  {
    "startTime": "00:21:18",
    "text": "with that so you could pass something which is origin integrity through adjacency which is not protected and then put it into protected adjacency which means that you did don\u0027t have a chain of trust right that we cannot guarantee and we can talk why this is not necessarily desirable because operational it\u0027s basically on deploying all right so we do not provide contingent of confidentiality and we don\u0027t provide a chain of trust all right so now of course we do the you know the usual hasta packet all right so what a couple of things now went into this envelope I was kind of bent against the envelope thing I wanted everything that just being tomorrow but that does not work for other practical purposes and the envelope kind of takes stuff out that cannot really be modelled that is the kernel of how protocols worked is not very amenable to modeling and I walked it quickly through it\u0027s kind of interesting so we stuck with magic just because we have some bytes left it\u0027s kind of cool because then the silicon can look into it right because right now we run on UDP any kind of torque if you you know want to build silicon that knows this is rift give it priority whatever snoop the stuff there\u0027s no way you can do that so what we stuck in is basically a rift magic behind the UDP and that gives you a good chance that your intention gratest right we didn\u0027t have a better idea behind that we have something which is kind of novel for adding protocols we put in a packet number which is an optional thing you rev up on every packet art that you\u0027re sending and that allows for very nice debug ability because you know when you\u0027re losing or when you miss ordering and you can actu\u0027ly that in different ways all right so that is not protected but there are no really we couldn\u0027t imagine any meaningful attack it\u0027s optional and if someone gives you this indication it\u0027s kind of nice to have makes for a nice debug ability you know a lot of stuff that came out from talking to operators like for example we sent on adjacencies all the names of all the ports and everything people laughter because today when they miss block that they have a hard time to figure out who is on the other side right whereas this thing worth to automatically you see who is on the other side right deploy it in the name and then we have an outer key envelope and Iraq al key key envelope carries the major version which is very important because that tells you can I even decode the model when you bump up the major version you\u0027re not running to your EIN 3 which means if you - you cannot decode the model that is very important otherwise basically you try to decode you this you realize just breaks down you have no idea what\u0027s happening corrupt packet something we have an outer key ID which is basically a local key on the interface so that way I can I can do the interface integrity right we can both agree and roll over the keys on the interface then you have a finger print length which is basically the fingerprint and from there everything is "
  },
  {
    "startTime": "00:24:19",
    "text": "fingerprinted below the fingerprint you have two things that you need to protect and and the remote nonce the border nonsense if people are not security aware does such as random numbers that people bump up regularly every couple of seconds on both sides and that prevents replay attacks how because this fingerprint protects the whole thing so if you give me a nonce which is too far from my local nonce or I saw your remote nonce and I now I see the package where you send a remote nonce which is too far from what you gave us or remote knowns I know that someone\u0027s trying to play to do a replay attack and those noises don\u0027t have to be particularly big because it\u0027s always the combination of both sides so that\u0027s for all practical purposes closes any attack window down to like few seconds and if you try to record those things you have to wait for the right combination record it and then you have a very short window because someone will bump up the knowns right which you cannot replay that has been done before in things like secure pnni and so on but it\u0027s not that well-known United especial and the routing protocol so that\u0027s you know we put the whole thing and then we also have to remain in lifetime which is protected so that\u0027s kind of the new stuff but it\u0027s taken out the mobile the model sits all the way in the back and there is a reason for that so when you push it over an adjacency you can change the lifetime of the tie very very quickly very easily without mucking around with this you realize model object actually you should note mock with the object and I\u0027ll tell you why in a sec and then what we have is an inner key idea which is really origin validation why it is bigger because this has to be agreed on the fabric right I have to know that this guy send it but I have to know which key is it uniquely on the whole fabric actually from the inner key ID I know who sent it who originated it sorry right so that\u0027s the originator ID innocence and fingerprint land and that fingerprints the model object which means when I\u0027m originating I\u0027m taking this key that everybody knows on the ID and I fingerprint the serialize object now thus you realized object is now being carried around as a binary blob so why because we did also some work to understand how we extend this protocol right so how do you extend these models this these schemas and we found that if you run an object through a third deesser you may very well this you realize something\u0027s reach you realize the day in after changing and you may may end up with semantically the same thing but a complete different binary object because your serialize err just encodes things differently which means that you would lose the origin validation right so if I receive that stuff this you realize it\u0027s change the lifetime Rhys you realize I lost origin "
  },
  {
    "startTime": "00:27:20",
    "text": "validation because I cannot fingerprint it I don\u0027t have to originate or key that also is very very good for so it gives us backwards compatibility people can stick optional elements and if i DC realize and I cannot DC realize it you I\u0027m still running that through basically equivalent to ISI is unknown TLD model plus it\u0027s very good for speed right because I don\u0027t have to reseal realize every time sending out lifetime changes and so on all right Ling capabilities basically what we realize you have to announcer that the other side supports PFD because you have to know whether it be of these suppose I should to come up or not we kind of missed that we were exchanging discriminators then we realize like what does it mean should we send an unknown discriminators or we just put the link capability saying I run the FTO I don\u0027t and you know with the assumption then there will be thing added in the future to it all right so flooding rules yeah open-source implementers ask a lot of questions the one thing that was not very well specified is when you flirt and you have lifetimes you don\u0027t look precisely at the lifetimes right because there\u0027s a transmission time there\u0027s some queuing delay so if you become too hung up on the life times you will always say oh those are not the two different the ties always different because the lifetime is mention is match so there\u0027s always this Fajr factor you say like if these lifetimes are pretty close to each other it\u0027s the same time that\u0027s his usual IGP stuff though he had to spec out a constant I think there was another constant or Bruna\u0027s questions we hit the last case of flooding inconsistency which was kind of interesting in the sense that you needed to have three levels on top of each other and you needed the right sequence of reboots though you have to reboot those notes in certain sequences and you also need that a specific property of the initial sequence number that was originated because sequence numbers return start from zero one we actually fetched them for a lot of reasons so we start from something from the range and it had to start from a lower range than the last range and so long you can read that up it\u0027s explained but it was kind of cute and it\u0027s a in a sense it\u0027s a property of rift because we only flood north right another protocol could flood south but we don\u0027t flood South down so if something flooded north is newer that the stuff that comes up there is no way to flat down again the fix is actually not very hard but you know it was it was interesting it behaves very very differently from this traditional protocol there was a cosmetic change which already come from kind of like playing people playing doing weird stuff with it is that if you have z TP z TP the strange stuff before it really settles and looks like the thing that is supposed to move because people it\u0027s completely unsynchronized protocol right so you may end up having server thinking there are roots or whatever or you know "
  },
  {
    "startTime": "00:30:20",
    "text": "tours coming under the servers because they didn\u0027t see the root yet and so on and when the flocking kicks in it\u0027s misdirected because people were actually ultimately know things ourselves or they\u0027re being flooded the information where they\u0027re not supposed to have so when everything settles you know it\u0027s hard to cause it of course I mean know this stuff was like monkey testing interrupt stuff doing weird things jumping up and down on the bed but we saw cases where there\u0027s useless information right because the SPF and so on were disregarded but you still stuck up with some stuff that looks why is it here so the fix was also relatively simple we basically that that when you change your level on gtp you just have to flush out all the other ties and works like a charm but it\u0027s also no unusual all right so that\u0027s kind of flowing I think it\u0027s all right now ah not that will definitely not work can you give me the PowerPoint because I need those pictures I only have the PDF I sent you a PowerPoint yesterday so we need to pull that up because that\u0027s kind of no interesting and meaningful discussion how we doing on time we good I already over round yeah yeah I only like five minutes plus yeah I\u0027m kind of know slowly winding down well I don\u0027t have to next slide yeah okay what did I write the stuff down I still had something to say no I talked about extensibility and we actually wrote code with a Bruno over a couple of languages couple of utilizing this realized to make sure that we can actually move in practical sense we can move the protocol forward with optional schema elements and everything will work and also can flooded through people who don\u0027t understand it the decoders will not hang up you know this kind of stuff but I think I talk to other stuff all right all right so that will be interesting discussions once they managed to pull up the PowerPoint and there\u0027s a slower stuff so packet numbering I talked about that stuff so we actually have this and we also have throttling from the other side so I can for example see that if the guy throws to start with me and I see a lot of Miss ordering and losses I can squelch on the "
  },
  {
    "startTime": "00:33:22",
    "text": "guy on the lie saying like you\u0027re sending too fast throttle and that allows pretty much the flooding rates to be adaptive and basically always run with the maximum you know flooding rate so the flooding rates are on rift or you know like orders an orders of magnitudes better than any other protocol right now pipe tightening so we may types much smaller like sequence number peckin affected numbers like no loans is where 64-bit was used last and we also had to fit them in a security envelope and also that\u0027s where we did to work with the sequence number all overstaffed arithmetic I put there Atlantic in the draft and so on and we also advertise unsolicited optional downstream label on the lies so it\u0027s basically you get in a sense you get to LDP for free okay because people asked for it I know how they use it and that\u0027s it they\u0027re only there in cast discussion is still open and that was already in a draft but again you know I just cryptically roll down do this don\u0027t ask but then of course Bruno and Pascal asked so I explained and I put explanation the draft why it is you know cool and necessary especially cool so this thing doesn\u0027t work on me so you have to stroke you have to score me forward please yeah just I just need these two pictures one thing yeah [Music] fantastic all the tools we have and everything is broken [Music] for yet an eligible picture now you have no picture you pick otherwise I pull up my laptop and we hook it up you want to do that oh no you have only this thing ok the times of the overhead projectors weren\u0027t all that bad after all no all right so I try to give you like you know a story which of course won\u0027t work is "
  },
  {
    "startTime": "00:36:23",
    "text": "too complex so I had one picture to explain again how flood reduction in rift works which is kind of a pass cause idea which is you know an interesting bastardization of the way Manette was working so every note from below is basically picking enough notes above it to make sure that you get you know double coverage of people even one layer higher and that\u0027s all recursive and it\u0027s also load balances because each of the southbound nodes can pick up a different set of what we call for our repeaters right I think you can follow that I just take all these people above me and I look for enough random people to make sure that people above them everybody gets two copies but not more because that\u0027s where all the flat overhead starts so that both reduces and balances and for actually five level fault it\u0027s close it\u0027s arguably also optimal when you go higher it you get you do a little bit too much but it\u0027s still I mean ridiculous we\u0027re talking extremely good numbers but now an interesting problem starts when you reboot the node because you start to advertise that you have nothing so everybody tries to give you everything because don\u0027t forget know if everybody still holds everything it is just they don\u0027t repeat to a level ah but if the level up reboots then everybody will try to give them the stuff right and you could say oh yeah okay so if you have flood reducer if you know the flood leader for this type of information don\u0027t propagate it but it\u0027s kind of fragile when start reboots so the Incas reduction works like that the first time I see a description and it would force me to send the information but I\u0027m not flood leader I suppress it the second time I send it so it has a lot of positive stabilization properties right which means that on the coming up you get an Incas reduction you have all these people spread and the information is only repeated twice each type of information from different nodes but if you\u0027re in any kind of transients and you re request the stuff the whole thing will stabilize because then people have no choice but send you a copy which means like this the flood leaders somehow didn\u0027t do their job the whole protocol would possibly positively self stabilized then it\u0027s pretty much the trick I don\u0027t even dare to ask who followed that okay well you know there I\u0027m sure the picture problem will get solved and you can look it up in material on my two beautiful cryptic sketches and then the stuff will make sense all right otherwise you see me after the session and we chatted on paper the PowerPoint you see on indirect where where the slides are not uploaded "
  },
  {
    "startTime": "00:39:24",
    "text": "if you open it from your PC and you should be able to see the picture it\u0027s just somehow that\u0027s on this Chromebook [Music] yeah not this no sniper at companies and tools all right that\u0027s it so Mike\u0027s empty any questions we good there\u0027s none confused all right [Music] no questions means it went either extremely well or extremely bad or all the questions or comments people implement it all ends too late Rex T okay and thank you I appreciate their consideration disability letting me present it today so it\u0027s called extended BFD often VFD working group we refer to it as d 2.0 no I\u0027m not that ambitious but we\u0027ll see where it leads so what a motivation in discussions be the working group and many ideas being proposed and appear some of them were accepted some deemed to be well yeah we would like to do it but that\u0027s probably not the way to do it it became clear that BFD it was designed does great job as was it was intended to do to monitor and continuity between to be of these systems and over many different network layer encapsulations that we would like to do something more and what to do it what we would like probably to piggyback some quality performance monitoring path MTU discovery and quality I\u0027ll give this session itself how stable it is because the only thing that we know is when B of "
  },
  {
    "startTime": "00:42:26",
    "text": "this session fails so misses and packets in a row and n is a parameter of detect multiplier but we don\u0027t know if if the technology poorer usually by default its value 3 if we lose every other BD packet so we\u0027re very close we\u0027re there a bad situation on the edge and we don\u0027t know about it so to extend the beyond what it can does now is to ensure backward compatibility and extensibility for whatever features possible that offers of this proposal haven\u0027t thought about and okay you want now or you want to hold it just we didn\u0027t sink you know didn\u0027t get to sing so just one question or it actually I mean does that not overlap overlap with warm very quickly okay first of all clarification don\u0027t want to pump does require control plane so this if anything I can compare I will compare probably to stamp which is only data plane test packet format and procedure enough yeah thanks that was what I look for mmm-hmm so you have here the format in a you know 64k view we have the same original BFD control message as defined by 58 eighty we have a guard work which kind of you know our fraud off maybe extra caution to detect whether it\u0027s really extended BFD or something weird and then followed by t of ease until these can be contained sub chillies so to me until they even probably might be for some other reason another to be inside the whole thing starts with the capability negotiation and that\u0027s insurance backward compatibility so how the idea is that the if the control message does have length field and length field stays as defined by 58 eighty so it reflects the length of BFD control message in IP encapsulation total length field reflects their length of extended be of the tacit okay Tony has an opinion so that\u0027s again in a discussion there are some implementations that do look at IP total length and expect it to be "
  },
  {
    "startTime": "00:45:27",
    "text": "reflective to only be FD control message length plus header but some implementations don\u0027t so for implementations that don\u0027t make this check that will work normally or you basically get their implementation that supports it so if there\u0027s a classical 58 a b b of the implementation it will not send final back because this negotiation uses post sequence post sequence is you send a control message with a tor bit set and you expect that acknowledgment if it\u0027s acceptable to you appear that he sends the message with the final bit set so if you receive with the final bit set and you receive extended packet with a ability agreed-upon then you\u0027re set you can do proceed with extended B of this session if you don\u0027t receive final bit set after your timer expires or you receive PFD packet 58 a B without extension then well you have to fall back to the classical BFD that\u0027s it question no aspirations to do jitter jitter what jitter measurement or yeah jitter quality just like you do delay loss we\u0027ll get to that because that\u0027s in following us the first the first step we need to determine capability okay we need to determine whether we can use BFD extended or we have to use B of D let\u0027s call it classical but jitter you have to do double marking so you also have to negotiate it okay I\u0027ll get it so basically I\u0027m Sarah Tory in capability negotiation so this capability is a little bit ambiguous because I didn\u0027t want to go into it we\u0027ll get to that what how to measure loss and delay and everything next slide so let\u0027s assume we are conforming to extended B of these implementations they agreed upon and we want to do a performance measurement so the performance measurement can be realized in two ways one it could be that extended packets will include okay that\u0027s an old slides and it\u0027s a typo it\u0027s not 6470 363 74 so my apologies it\u0027s MPLS packet loss and delay measurement so the idea is we we take these messages that are already being defined and implemented by many and we "
  },
  {
    "startTime": "00:48:28",
    "text": "insert them in the Tobs in a VFD packet so that allows us to do direct or infirm synthetic loss measurement and it allows us to do delay measurement and use the timestamp formats whether it\u0027s p TP or ntp by sender and reflector independently because there is explicit indication of the timestamp format by the side that feels it so yes we can measure jitter and it can be measured either one way putting extending B of D with a performance measurement T of ease in control messages send in a synchronous mode periodically or it can be used in pro sequence as a echo request reply because pro sequence will be followed by the packet with a final bit sent by the far end and again 63 74 supports collection of four timers for counters or combinations so basically you can do either was measurement either delay measurement or combined was delay measurement so that\u0027s basically capture of control message from 63 74 4 was measurement this is for delay measurement and this is when they combine the only what we introduced is just one word of type and length to be included in extended BFD packet format again there was an it there is interest in doing path MTU monitoring might be plan a path MTU discovery if you wish so again use extra padding TLV and you can operate it the way you want it and again it\u0027s nice because you can do it either as a false sequence echo request reply right or you can use it one way too far end and if you wish if MTU changes for some reason or you like over a multi hop BFD using so you have a convergence underneath then if you\u0027re using in conjunction with the s antonius mode then your session will fail because empty you change so your packet is too big then the far-end would not receive it three messages in a row you have federal "
  },
  {
    "startTime": "00:51:29",
    "text": "detection again it could be used either way as monitoring or as detection of the failure next steps will be continuing adding details because for direct mode this extended BFD can be used to fetch results from the far end because in one way our measurements other measurement results and calculated performance metrics are still sitting at the far end and there might be interest on fetching them at the same time it will definitely be interesting to do their yang model because then this performance metrics can be just exported for the yang well discuss discuss discuss welcome comment suggestion in cooperation and if you want some entertainment then I will be presenting this just 15 minutes from now I\u0027d be of the working group and I hope there will be more discussion so right now a specifically on the rift which is extending discriminator exchanging discriminator sorry nothing else right musics and BFD kicks in I mean there\u0027s no far information you know yeah this excellent yeah especially like this and cue things and so on which have been piggybacked into the wrong protocols for historic reasons if we do that yeah you\u0027re absolutely right so basically it doesn\u0027t need anything more than discriminator yeah and means it\u0027s very interesting interesting for this IP fabric Fox because know the jitter the delay the stuff is this is very relevant for them you know is discussion of that stuff on the periodic pay you know before the bring up the links on the periodic pays is no monitoring the link quality and so it\u0027s very important for them yeah okay thank you and if you have any questions comments please include BFD working group mailing list much appreciated thank you "
  },
  {
    "startTime": "00:54:29",
    "text": "see he wondered about open source up a force field hackathon is good token is good all right so we had a hackathon on rift this is not a participant and Brunel\u0027s ensured me that when he took the photograph of the gentleman the gentleman signed away all his rights so he has the waiver I don\u0027t know if it was taken somewhere in South America the brewery is some interesting places I have the fun job to take his material and present it I don\u0027t even know what is on the neat thingy we thought maybe a record a presentation or something but you know experience has been poor with remote presentation so we just go with the standard deck okay we did cows monkey testing on the protocol first iterations I think that will be the future of this august body if we want to stay relevant we have to learn how to do modeling and we have to learn how to count monkey test modeling just to ensure the quality of what we deliver it on extremely short time scales right I mean it\u0027s well known methodology invented on 360s long forgotten and now pretty common while we didn\u0027t catch on yet all right so so was there that was about four people and like three or four hanger-ons who didn\u0027t write code so they don\u0027t get to be mentioned so all these guys were hacking code and what we were doing we took the open-source implementation that largely chucked out we generated some configuration for what bruno consider large I consider North Valley smallish data center topology and then we\u0027re end raised if you bought a bunch of AWS instances and we just started to bring the stuff up I explained you know actually maybe the other presentation explains how this stuff is multi instantiated we basically started with containers there okay but so Bruno went to namespaces which have lower scalability but it\u0027s very very easy to break in on the Linux kernel topologies up stripped together and then when we brought the stuff up which is jumping down a little bit on it using random scripts and then we basically started to look east the protocol converged which actually on the protocol of that complexity is not a trivial thing to assure so no we ended up in hackathon writing a lot of code actually figuring out whether we got what we expect there\u0027s a heck of an instruction document any chance I can install the staff there is like an instruction video if you put out on YouTube and so on so it\u0027s very very accessible it\u0027s you know exceedingly well documented so that comes all hard from the scripts topologies generated and what we do is each is router is "
  },
  {
    "startTime": "00:57:32",
    "text": "basically Python processors it runs its own network namespace and we just brought the points of ve th which like virtual ethers and just wrap the stuff together and no particular magic and that\u0027s like one of those graphs is the things generates the way we generate those topologies is that there\u0027s a meta configuration describing a fabric it\u0027s the same so it doesn\u0027t allow you more than like you know five fivefold its claws or parts with uneven height it will evolve that staff generates a configuration for every router scripts to start and stop because you have to be able to log into different namespaces and then generate scales monkey scripts which shake stuff up and down and generates also the check script right to check actually to go out all these things gather all this information reconcile it and figure out yeah you have that apology actually works right and it does pinging back and forth and these kind of things all right so like I said we generate these Carroll script that generates perturbation you know like brings things up and down jumps up and down we\u0027ll talk about all the way the next things also right now link failure is node failures so what we observe you need direct link failures will be interesting packet drops reordering delays and of course corrupting packets about the problems just corrupting peckers randomly shooting bytes doesn\u0027t buy you anything much because the Peugeot will not convert right it does the expect that so you have to understand what the variables mean a boundary condition which you know like when you do the Google chaos monkey testing and software that is like oh methodology then you repair all the breakage ease and you see whether you know the protocol is an expected state all right so that\u0027s one of the sequences you start from the state break clean kill something break another lane bring something restored like bah bah bah bah right green red green red green at the end you have a sequence of greens that fix everything and you go ok did this thing survive are we in a full colored state some example kills wrong again documents videos all exceedingly well documented in our stuff breaks breaks breaks whatever fixes at the end so the check script is actually topology aware and it knows where to look and I show what it looks at it pings from every leaf to a relief with interesting discussion people start of course to play with it and they start to ask question you recognize that riff does doesn\u0027t do certain things or expect certain deployment mode right there\u0027s nothing like running code and in an environment like that which you start to understand what the hell\u0027s going on right so we think from out leaves whether all the notes data apologizes you stayed up whether the northbound default routes were in the rip and the FIP and the kernel all right because there is a local rip then you get I broken on the fifth based on the route preferences and then you push it into the Linux kernel so you have to verify the whole chain same "
  },
  {
    "startTime": "01:00:33",
    "text": "thing for the southbound there\u0027s always more things in the future so that\u0027s a some convergence around where the check is being done right checks all kind of consistencies and does some pings and so on what helps enormously with Bruno\u0027s code is that you can generate this kind of SVG protocol runs so you can basically slice out any kind of protocol interaction put them on SVG and you see all the packets timed how to flying through the network and you can flip things on/off and reorder and whatever not so this is actually if you truly want to understand how the whole thing works this is a fantastic educational tool alright so we had we generated us topologies of the Randalls topologies and local machines and we did the curls monkey testing we wrote code to know more and more consistency checking because we were looking manually for things what we learned so a the open source implementation had a couple of issues with this thing shook out for example ipv6 flooding issue where it is absolutely valid for if to come up and one side flats on the ipv4 lots an ipv6 if you\u0027re running both address family and they had timing issues depending how he was coming up they ended up on the wrong socket or missing stuff of course always the shutdown scenario and exceptions when you break things stuff starts you know to shake added multiple show commands because you start to inspect state if things doesn\u0027t go well especially it doesn\u0027t go well with very weird ways the protocol spec we found nothing right so they in in this sense that looks very solid and that\u0027s the heck of them yeah I don\u0027t think we want it but I wasn\u0027t even there it was a zoo 350 people 30 minutes presentation for two hours what you expect you give people food and you don\u0027t charge for it that\u0027s what will happen right questions observations nothing general apathy all right I take the uppity resistance is futile anyway right so that\u0027s not a beautiful picture Bruna took summer at the end of the world I think it\u0027s Patagonia or something so that\u0027s basically what happened on the open source that\u0027s his update so let me write all that down so usually it\u0027s only github stuck around 102 hackathon so which is within basically or at six months we had stayed where we "
  },
  {
    "startTime": "01:03:36",
    "text": "have you see how much is implemented it\u0027s chucking along to become a complete rift implementation issues I felt originally with just a small subset maybe just a server site it was very successful in improving the specification no discussion there right and I could I give him that I would consider that a reference rest implementation absolutely I mean the code is extremely good quality it is completely geared toward someone to understand and learn the protocol not for high performance but for that as a reference implementation beautiful and again the emphasis is emphasis in being user-friendly educational very transparent very debuggable you can look at the stuff very easily and not all performance are understandable extensive documentation and two completely unencumbered but any kind of you know roadblocks like IPR or any kind of vendor you know nefarious influences it always is good so how to get started just one thing to get you bootstrapped when you get into the github torus installation start up everything just nicely rattled up good so what was added so Bruno added quite a significant amount of stuff since last time ipv6 adjacency so it supports fully the ipv6 which he didn\u0027t believe and then have a lot of fun learning how bizarre ipv6 multicast works actually until you get to stop working because needed for the lies right especially if you have leaned locals and they overlap and whatever not so you send both IP v4 and v6 back that\u0027s taking a while to understand how the spec is written right and the order does not matter and how the AFS come up does not matter and the implication that if you support v6 you can also throw it before I don\u0027t know precisely what he means but the lie FSM must be and is item 210 which means like if you receive the same packet yeah you don\u0027t do it state transition was somehow important all right so here he missed actually appoint the v6 rise imply that the to notice V interlinked as v6 forwarding and if he for detour but you can also forward v4 our v6 only and we didn\u0027t go through all the complications of trying to tear down address families once you opt you up even if you stop sending he\u0027ll also if you want to remove an address family from a link you just have to bounce it if people are highly concerned which I cannot imagine in the fabrics about that and you know we go an extent aspect but this kind of things are exceedingly complicated and then "
  },
  {
    "startTime": "01:06:36",
    "text": "what took him awhile was all of a sudden to understand how the flooding well you know just bounce into the stuff started to read the spec and ask the questions that you can either float on before or v6 so you have to open sockets for both and listens and when do you open the socket you know like detailed implementation stuff and you may end up sending v4 flooding one way and e6 longing the other way and is perfectly valid and that was what the counts monkey caught him because no the stop was coming random sequences breaking coming up and we ended up in this a symmetric configuration which respect is perfectly valid so yeah so here it is ITV salt all these sixes where is dependent on the OS or assertion distribution right magic options to make the stuff work reformat occurs is much easy respect so he has everything right now and this kind of cute things you start to understand how or if two works right so this is show interface circuits you understand how many circuits you actually have open an interface to support all the stuff it could be less we could receive and send on the same circuits but he\u0027d split it we had discussions about this now it makes for much easier logic on the protocol implemented a flag reduction so the example algorithm in the draft is complex it\u0027s kind of like really cute doing all kind of stuff the beauty of the flower reduction rift is that everybody can run a different algorithm it\u0027s completely you know a synchronous distributed algorithm that what makes it so blazingly fast and stable so we talked about the implications of he really implemented the stuff that Pascal put in with the fishy AIDS and a lot of clarification questions you actually know fix they are great notation couple of prices it wasn\u0027t simply clear what that means right and here\u0027s for example to show flooding reduction and then is way too small to read it it shows you like the flood leaders and I don\u0027t know what it\u0027s all showing I I think front liters last election and what yeah I I forgot it is too small to read he implemented the whole SPF so all that things in once you start to write code right so he was asking questions there as well so that shows you the SPF and which destination fell out through which system IDs next ups south and north split and some stats actually this former expenses that expensive stats laters are way around you know SPF see both directions and it\u0027s not really SPF you can actually cover all the paths on the fabric because loop free so he did that then he implements the whole right right because he didn\u0027t have a local read because when you have the solder "
  },
  {
    "startTime": "01:09:36",
    "text": "out slope and routes external routes coming in local a lot of prefixes are all over the place then you have to tiebreak for preferences which specify their local rep was implemented including dcmp and then you have to show that things which shows you an hour all the next starts and where to stuff comes from from the north and six routes which are here in C and Pete over know multiple interfaces and Flint locals so that\u0027s all working and then of course so sorry so the rip holds of course all their routes right for the same prefix even you come from north south external it holds it and then it\u0027s tie tie breaks it into the local fit which is just the best just the BET\u0027s best right so you can go ahead look at the show forwarding which is all the typos and stuff ready to be pushed into the kernel and then of course the kernel rots so those you can also look at the kernel routes that he pushed down and this is raise it to the local fit being pushed or being pushed down I don\u0027t know so I didn\u0027t play with that stuff extensively except you know like collate it to make sure that the convergence is correct and you also see the waitstaff so the bandwidth balancing is not implemented yet extensive statistics work you to bring to face note and gene you know because when you start to implement SPF load balancing you know a flood reduction all of a sudden you\u0027re not just even understanding what\u0027s going wrong without stats is hard there\u0027s so much stuff lying around so the stats give you you know at this interface all over side and you you retransmitted all the time your packet right when to enter circ or your packet right collapsed so you see four different packet types you see all kind of you know rates and when was the last change that\u0027s all constants in framework which I\u0027ve already shown you okay so those years a plugin there\u0027s a proposal to implement the rift in FL hi Alice woman net deaf yes we\u0027re looking for folks who are interested in collaborating with the FRR community on a c implementation of this so anybody wants to talk about this can contact me directly after this meeting I\u0027ll be hanging around or you can come along at 2 o\u0027clock this afternoon to the FRR meetup yeah yes I assume it\u0027s well known water ferrari\u0027s like a the quagga for that lots of people are running Bruno is interesting fermented stuff in seeds or "
  },
  {
    "startTime": "01:12:36",
    "text": "there\u0027s you know they want to build the community with the rift Python he pretty much you know explored all the red holes so it\u0027s kind of a straight port for high performance stuff and of course then that would allow to add the yang morals and you know they look alike get people engaged alright so the current status summary the adjacencies are pretty much done I don\u0027t know what\u0027s missing I have to quickly look as ATP\u0027s done since a while and that has proven extremely some points they buggers were no surprises what CDP accept is stale information and there were no large fabrics heavy load flooding I don\u0027t know what\u0027s missing there route calculation is half done because of probably of the bandwidth balancing management interface to chain I don\u0027t even know what it is but it\u0027s basically there is what has been done between the last and this one so adjacencies I are clear all right so v6 adjacency I talked about the starboard is not completely security envelope so we still have to implement the security envelope and so Kate that\u0027s why we are kind of holding back on the last hole and then you know I didn\u0027t consider the documents that are requests that are a greeting to charcoal need to be delivered we don\u0027t expect any surprises much that has been discussed very extensively and we worked a couple of times zero touches done flooding all right so the v6 running has been added and the flood reduction is done so what is not complete so the efficient type propagation without the code optimization positive desegregation so that\u0027s the status as of two days ago three days ago Bruno Motta has shown me yesterday night and told me to say that he is like freak water down with the positivity segregation beauty of symmetric wellspect protocols once you crank code you can go really fast so he already has all the positivity segregation implies it isn\u0027t here of course an interesting question where the spec is has language of an Oracle so if you implement you understand wine has to be written that way but there\u0027s no surprises negative disaggregation which of course is a little bit of harder not to choose I didn\u0027t say that we also on the spec we have to update Pascal wrote quite an extensive example session section of the negativity segregation I mean all seems to compute but still needs to be implemented that\u0027s of course only of interest for multiplying fabric so you know either very low radix fabrics or very large fabrics the key value store external ties which of course very helpful right if you redistribute in the protocol policy "
  },
  {
    "startTime": "01:15:36",
    "text": "guarded prefixes are jobs optional yeah a little bit did indeed overload bit which is important and the clock comparisons of as mobility a rat calculation what\u0027s not done yet east-west for worrying east-west links positive he largely has done the fabric bandwidth balance which is of course interesting label binding is to roll and the multicast is something that the sky will talk about the optional extension outside of the base back most likely managed no interest in implementing sshd li client unless somebody really deploys the started start to run production comment completion yang data morals and granule debugging in tracing i think here so i\u0027m just selling himself this stuff trace is quite well and is very easy to debunk especially like I say hackathon for me and someone else who wrote you know a good amount of code like show commands and status statistic have lots of stats have been added and there that also the comment history to the CLI I didn\u0027t even know there and development chain so likes other person code coverage she\u0027s like at eighty something that bugs him and yeah there is a there\u0027s a demand and this correction quite interesting from people already you know like blabbing and playing with the staff together Wireshark plugin which does not seem like an excessively difficult project to do except that somebody has so that is interesting in the sense that you have to put into Wireshark the model compiled the model now they include the model but beside that it looks like it adjuster by a shark clogging and it\u0027s also one of the reasons why the unit people to magic it\u0027s kind of simpler to like what the stuff you don\u0027t have to say a that\u0027s the portal running where stop yeah I think it\u0027s it I mentioned everything yeah questions observations just to clarify the other implementation does have everything by the security alright so the security envelop was just gelling it went through a couple iterations all we have two security envelope on in a different version so that\u0027s pretty much it yeah the poaching implementation experience the way there to virtually just to say that the proto developments and design was accompanied by the implementation stop answer yeah right so it\u0027s old-style ago SPF you don\u0027t have two independent limitation and the cannot hook them up and they work flawlessly don\u0027t even show up orthogonal to to standardize the stuff yes it was very successful in this respect and we\u0027re talking six months pretty much from I expect publishing to shaking out "
  },
  {
    "startTime": "01:18:37",
    "text": "the spec wild implementation we\u0027re progressing basically being interrupted all the time so the monkey testing will be not the interesting thing I would say you know to understand how can you tell your protocol spec which is modeled and then somehow from the model understand what you were supposed to shake to actually maybe we need to analyze annotate the models and maybe needs like a meta model description like you shall shake that and expect this I don\u0027t know we were breaking ground in a certain sense all exciting you do not share my sense of elation it\u0027s okay all right why should either you are Alistair do you have any timelines for another open-source implementation nor it since landing sorry for our implementation do you have any timelines our stored Minette def responded to the chairs question no we don\u0027t have any time nines at the moment that\u0027s why we\u0027re asking for folks to get involved see how many people turned up what happens so thanks [Music] so next one is about the multicast me and Pascal world between this presentation I\u0027ll get it started and now I\u0027ll hand it over to Pascal so the the core design team while they were working on the flooding reduction they realized that a byproduct of the flooding reduction is actually a Marcus Marcus or even better a broadcast tree that you can use to send traffic anywhere from anywhere and so that and that does not require any additional cygnus already built in and so the one thought was that that could be used for multicast Merkers then we had more discussions and turns out that well this is actually very similar to the team by their concept in that the track the traffic travels north all the way and then along the way they\u0027ve worked them to the south to reach the receivers so but further considerations and discussions that was thinking that we probably should still use separate signaling for Marcus after all so that we can have better load balancing for elephant rolls and nice flows because if you just used as a few "
  },
  {
    "startTime": "01:21:39",
    "text": "tree to send traffic anywhere everywhere then it that works well for for for low volume flow rate flows but if you have we call elephant flows then it\u0027s not good so the kind of thinking nothing has been decided it\u0027s just a kind of thinking is that some we would just enhance an extent in bi-directional concept and and use the native great signaling to set up multicast trees so a little bit of background up in bi-directional in pimp either if you need you want to receive a group market traffic yoo-hoo send started joins towards a rendezvous point address that that address were called our PA is either on a particular router or it\u0027s just an address on a land that is not bound to any router it could be it\u0027s just a virtual address out there and the link that hosts that our PA is we call it called our P link or RPL it could be a loopback interface a router or could be a lying interface so the started joins what is that British sub trees that are routed on the routers on the RPL and the RPL the RP link will connect the sub trees into a tree so when you when you need to send traffic you the the first hop router was send the traffic upstream towards the RP a following in that sub tree and eventually it will arrive at RPI routers and along the way the traffic ORS so fork to downstream routers where you have received the starchy joins one and then for the traffic that arrived at RPI routers they just flood travel to each other if you if the dis language on the line step on loopback interface if you are a pizza on loopback interface then you\u0027re the only are PR router there so in LAN case they just fly to each other that\u0027s fine it\u0027s a it\u0027s a lamb and and then eaten at the IP router when they receive the traffic on the land that are PR you will just send the traffic back down to two receivers on the saw on the downstream side so if we were adopted at that base for rate there is actually no need for that said RP a RP address anymore you just "
  },
  {
    "startTime": "01:24:41",
    "text": "because of the nice south-north topology just simply send your joints upstream to your north neighbors well you just - Wow there your North\u0027s neighbors you can do a hash to decide which neighbor you should send to there is one problem that there is no up here in this case you could have several top of the fabric or call talk table routers at the top and they are not connected to each other mrs. cook another way of saying exactly what you\u0027re saying is that the LPL is a non broadcast not access network as opposed to a broadcast network so you have to undo those always think what you\u0027re saying okay the RPL is done broadcast 30 access right so the the so how do we solve that is that that Pascal we\u0027ll talk about that and then instead of a starchy trees we actually star is debby established by their channel star she prefix trees that G protects can be either a Qi host or a star to the tweak streams so in a star star case it\u0027s a it\u0027s a tree that can be useful for any group if you if you don\u0027t care that the traffic goes where there is actually no receiver those can be used for mice floats and then you can have starchy host trees you can use that for elephant floats then the traffic is sent on only where there are actual receivers and in the middle you have the starchy prefix trees it can be useful because your outflows or whatever flows basically the flows that you can allow you to go somewhere where there is no receiver but it\u0027s not going anywhere so this gives us very good flexibility because you can start with a single star star tree and if you know your your traffic pattern is that you don\u0027t have much you don\u0027t have any elephant close you then you don\u0027t have need much stayed you don\u0027t need much signaling you just use a single star start a course in traffic everywhere traffic and first you can establish a few more starchy prefixes for your uploads and eventually if you realize that oh I have one group or a hundred group or a thousand group that where I have high rates floats then what I will establish those trees accordingly only when you when you need it so the joins in the p.m. butter here "
  },
  {
    "startTime": "01:27:43",
    "text": "will be down by the northbound pgps parts the guided prefix pies is consumed and merged and we originate every hop so an instant but the PGP is normally sent to all your neighbors down north neighbors or South neighbors but here when it\u0027s used for I established the tree we were send it to just one of the North\u0027s neighbors and that is chosen by the Hessian down by the dancer a result neighbor the hashing should have this kept characteristics that you different nodes should choose the same a stream nodes but you do not cause the upstream node 2 to have to replicate to many many downstream notes so let\u0027s say you have at one layer you have say you have an EU a node that what\u0027s the word okay so because the the in the factory you have many many years impe paths though it could be that some or 128 knows at one layer could be connected to the same or another 100 in da nose in the next up layer so you want to avoid that situation where the upstream a North neighbor is central taking 128 times to other downstream neighbors so ideally you will be like that some of the neighboring there\u0027s a hatch to one upstream some other downstream neighbors - yet another upstream and and but eventually they were converge at the top so that way the replication is more efficient and yet it\u0027s not too demanding for for any node so that\u0027s with that those joins with those we establish the sub trees and we also established a corresponding protein state and that holding state include the interface list that in the interface lists including the northbound interface that is produced by the Hessian and also southbound interface on which a joint has been received from and then traffic arriving on any of the interfaces are forwarded out of a other interface in the list the traffic received on any other interfaces will be will be dropped that\u0027s the way your provenza looking so coming back to the "
  },
  {
    "startTime": "01:30:43",
    "text": "RPL problems we need to join that the CSUN subtree rooted at the sub top note and I will handle that - Pascal he is the better person to explain this thank you okay side first yet we are here I just asked the chairs how much time they gave me for this and they said plenty plenty is good so I\u0027m gonna use plenty first thing is I will I will paraphrase you somehow because doesn\u0027t hurt saying things twice I assume now we have illustration to just say what you just said Jeffrey so so we started with something we thought very simple as Jeffrey said in his first slide what we wanted to do is basically reuse the topology that we built for the optimized flooding and as you know this this topology that we built for the optimized flooding as the property that there are pretty much redundant paths between any leaf and then it off so you forget whatever is in the middle but between any particular leaf and any particular type of fabric node there is a redundant way to get there so we thought a what if we just send the multicast packets north whatever there are to any type of spy the top of fabric node and that particular top of fabric node would reflect the the packet over the redundant path that reaches any leaf that was the initial thought without changing anything else as Jeffrey said we thought we could achieve an efficient multicast just using the fabric and the state that exists in the fabric if you wanted to filter by star G you would just flood the star G information north only through the flood repeaters which would make it so that only the the traffic to to to that particular group would would flood through the repeaters only if there is a leaf which is actually listening for it I mean with this simple assumption we were already there we had a redundant way to distribute the multicast traffic to groups or to everybody if we wanted to as a broadcast there were two issues with that the first issue was we had to make a different routing decision for a packet going north and a packet going south and that three what probably killed work not killed because everything is still on the table we have not written the text yet but but the reason why we are opting out of using the optimized flooding topology is to avoid having to make this different "
  },
  {
    "startTime": "01:33:43",
    "text": "decision if the packets coming from south of the packet is going from north right with this this pretty much is fast mode like model that we had if you get a packet from from south then you propagate it north to any of the parents north to enrich any of the turf which will reflect itself so that that was one behavior now if you get the packet from the north then you would have to to pass it down to everybody we elected you as flood repeater so that\u0027s a different behavior you would have to basically do two different operations and depending on the silicon etc to try that that could hurt so we kind of did not prefer this way the other problem you could have with this design was the Fallen Leaf prom if you have a particular leaf which is not reachable by a particular type of fabric node to fallen leaf by definition then if the multi-cat packet as it flows a randomly north reaches that particular type of fabric and there is a listener on the particular felony for that type of a right note that listener would not get the multicast packet right it\u0027s the prime of the felony so how to under that that was that was also something which which made the proposal which looked initially very simple and efficient having to under this kind of corner case would we disaggregate or whatever else that kind of looks painful and then on the side there is this Miss optimization versus by dear but as you know if you have by dear then when you propagate north you can at each level you can start sending the pack itself which means that you get more efficient use of your fabric so we kind of moved from that model on to another model whereby we as Jeffrey said again we be able to sub trees and the sub trees are very dynamic that has the nice property of the of the optimized flooding which is any node at a certain level say level zero in this slide say not al for to pick an example can pick any of the nodes above as his parent as we build this tree that can amaze many reasons why we rebuild a tree but you can pick any of your parent and change that over time doesn\u0027t mean you have to reshuffle and deliver but in a network it\u0027s an individual decision by every node and four can pick them to at some point of time it\u0027s basically beyond the orange tree but five minutes later if he decides to it can join em for and you don\u0027t have to tell anybody above or do anything so fancy at least as long as you don\u0027t advertise subgroups but just to be on trees it\u0027s a local an efficient decision so we can offset a let\u0027s be do "
  },
  {
    "startTime": "01:36:43",
    "text": "sub trees which are rooted at the set up at the subt of being what we define as the level right below the top so we have to define us that we are beasts which is the sub tough and we build those trees and we might decide to build different trees that we would access for different groups etc but I\u0027m just describing what we do for just one the first multi big multi Kasturi so let\u0027s let\u0027s have any node select one parent and that ends up building a collection of non congruent trees which are rooted at the cept off just by individual decision of every node of finding one on strictly one part so the big prime with we have this that now is to to interconnect those trees into a bigger tree and now we are back to the pin by their question of all this big thing here now this level I have illustrated with this kind of circle becomes virtually the FPL that\u0027s the link on which all the small trees we discussed a whole rooted but the interesting problem we have with rift here is that this LPL is non broadcast multi-access it\u0027s not a token ring it\u0027s not an Ethernet it\u0027s not the air you can\u0027t push a packet there from you no packet coming from the south swim one say the packet comes from there if it was an Ethernet you would just broadcast it and then every other n1 into it\u0027s rare for would get the packet and be able to flood itself but that\u0027s not the case it\u0027s non broadcast so we have to under this network and again make it so that if a packet comes from any one is injected in this area it can go out of and two and three and four and five so what kind of structure do we put in place to enable this NDMA air PL and that\u0027s again a point that Geoffrey made and I will paraphrase how can we make it so that the tree is well balanced if the tree is too fat like we pick the same guy here to reflect to everybody then if there are 100 nodes your this guy will have to make 100 copies that that\u0027s a very fat tree that\u0027s kind of efficient in terms of how many hops a packet will take but that\u0027s a lot of load for that packet on that particular node on the other hand if we make a very lean tree like we could say Oh connect this guy in a Z then a particular packet going it being injected here would be echoed all the way before I can reach this guy in go down this tree so there is this this prime of building a spanning structure that that would enable the RPL operation in a way that\u0027s balanced enough fat enough but not too fat kind of so that "
  },
  {
    "startTime": "01:39:45",
    "text": "that\u0027s what we\u0027ve we\u0027ve been looking at so I have represented I have to slice to explain this the final solution we are not there yet but kind of the thinking where we are and that\u0027s when you know inputs are so so great so the thinking we have is so let\u0027s be let\u0027s build this non-broadcast multi-access RPL and there is how we could do it because we want like I said to balance the level of fatness of the tree that we are building between the sub turf at the top the idea is basically to fold even tree we\u0027re building elect a subset of those guys as the the the level of the tree that will be building to do this FBI thing and for instance we could be again using a rush and the rush would elect like the five for the 10 best those nodes to be the reflectors in that and VMA appear so in my slide sure the rush has pretty much determined that those two guys are the best candidates s3 and s4 as the best you know the best hash for whatever we are doing so everybody will pick one of those two as the reflector for them so in this case and three and then five parent 2 s 3 and n 4 4 instead as 4 and so what we\u0027ve done is we\u0027ve extended the sub trees all the way to the top now ok so we still have non congruent trees but instead of being rooted at the sub tough they are rooted at the top and we have kind of convert them in a way that it\u0027s not distributed over all the tough it was kind of distributed over all of a set of but now we have kind of constrained the number of tough nodes which participate to this game and now what we have to do is basically complete the tree so that s3 can talk to as 4 so that\u0027s kind of the second step that we illustrate here and that\u0027s the piece that requires an additional signaling we have not found a way to do that without a mini more additional signaling and the additional signaling that we need is to make sure that all those sub trees converge onto a same tree as opposed to making islands of for instance if there was s3 s4 s5 s6 s7 s9 which could all be roots of the subtree if we try to join them blindly maybe we that we could build to two islands as three s5 s6 and as for s7 s9 I don\u0027t know how do you make it sure that that if they can they all merge into a single structure which is what we want to build and the way to do that is to to expose like a token to expose something which will they all will want to reach and so what we said so far is that we could use the system ID of we "
  },
  {
    "startTime": "01:42:48",
    "text": "could expose the system ID of the highest of those roots right so far we had s3 and s4 so they both are system IDs and actually represent the nodes left or right to the smallest most to our system ID and so as we expose if if all the nodes and 3 and 4 and 5 exposed the system ID of the parent so and 4 here would expose that it\u0027s it\u0027s root kind of is s 4 and 3 and then 5 would expose that downward is s 3 now through through through this information s we can realize there is a root with the IR system ID themself so what it would try to do is establish a link this link here between it and the child of this higher system ID right it might be that because of this jointness and partition stuff and 3 doesn\u0027t see a child of s 4 right but it might see a child of another node with with AA system ready themself and that node would see the the main road so that\u0027s in order to be able to make this single tree you need to expose the not only yourself but also the tree you belong to you need to say as SS 3 joints you know s 4 s 4 3 it needs now to expose a I\u0027m a link to the tree risk super routed by s 4 so that\u0027s the thing which is not in Akron signaling is how to expose I actually the main street i belong to is is s4 and now we could talk so that\u0027s why we are in the thinking we would have to expose s4 as part of the signaling and to relay it that\u0027s the name of the tree that i\u0027m building to be on this area and well is it agreeable to do that and we can at the next step start seeking a now what what if there is a chance challenge etc and that\u0027s one we probably would need to introduce a distance so basically it\u0027s all about building a tree of those roots which was selected by the sub tough so now we have joined them together and the result of what we build with this is a spanning structure that spans all the leafs pretty much all the sub tough all those which was selected as a parent and some of the tough know delimited set and we can decide the size of this limited set because that\u0027s what decides how fat the the the tree that we build for the FPL is and that\u0027s pretty much where we are this is for the particular example that i designed here so you see i just put some of the tough and some tough nodes i establish those links what you can see now is the resulting spanning structure and like we said earlier we can build a number of them and the operation of this pending structure is as Jeffrey said if "
  },
  {
    "startTime": "01:45:50",
    "text": "you inject the packet anywhere say m1 injects a packet anyone will copy the packet along the structure just like a spanning tree thing on all the other interface on the structure and the result of this operation is a basic flooding of the structure which will make it so that the packet is distributed everywhere along the structure now we can do the exact same thing if we want to install a route like stodgy right if this guy installs wants to say I have a listener for stodgy we can send the advertisement I ever listener for stodgy but then one will advertise that and it will be flooded through the structure and that can also be a listener here which will be flooded through the structure now not in the middle we\u0027ll know through which interfaces it got the flooding fall is now too stodgy and is now able to sound the packet too starchy only on those interfaces as a filter so you see you don\u0027t that\u0027s what Geoffrey said again earlier you don\u0027t need to have the concept of of a super route up there like we usually do in the idea we just have this this flooding structure and we can install you know other the filters if you want to send a starchy or me to some destinations or we can use it as a broadcast and for half-assing you against I\u0027m sure or the message is fast we built one tree I can build 100 trees right as many as I like and then we can decide which multicast flows go into which tree the thinking what we wanted to achieve is build those trees proactively so we don\u0027t make them dependent on the star geez we may make them dependent on the giraffe floes I mean that you introduced your flows but your juries don\u0027t dynamically try to build a structure like this is to each time you have a new group coming in just build a number of the structures and then decide for our newest algae of our flow do you use one of the structures broadcast form ice floes or what or do you just affect a particular strategy on one of those particular pre-existing spending structures and that\u0027s pretty much where we are I don\u0027t think we have another slide so was it clear two approaches on the table one is like space modes and everything love which is any any leaf an illness or any tough and that tough we use the reverse flooding or addition or a reduction path to reach the leaves that\u0027s option what Prime with option one we have to have different routing between things coming from South and things coming from north option to build the number of the spanning structures use the tough to set off network as a non broadcast multi-access RPL build something into it which is not too fast not too lean not too long and that completes the whole sub trees into a bigger spend instruction these are kind of the "
  },
  {
    "startTime": "01:48:52",
    "text": "two options we have on the table right now any question what did you say about no question Daniel yeah when there\u0027s no question it means what hi Bill Fenner Arista networks I just have a question that I think it\u0027s just an oversight on this slide but the purple tree is actually isolated there should be a link to the oh yes and so sorry okay it was either really confusing or just a little mistake so that\u0027s I think this slide was completed like yesterday and because all the other explanation I had to take out some notes and when I completed this slide with the other ones I forgot to draw this line yes sorry it will fix it so you see the origin I mean some of those end nodes set off our parents you know for free is going to Leeds and then you have to join them the another question which is an option here is whether you Johanna interested is if the tree after CC for instance and one anyone has leaves down this tree so so is an interesting guy iconic code if if all the listeners are on leaves then if you have somebody like M 3 and n 2 are you interested in those guys because they don\u0027t which leaves so the idea the point was oh let\u0027s be on the trees even for guys like I\u0027m free which don\u0027t have leaves behind them because it might be that later on because of a breakage or anything else free might decide to repair on two M\u0027s free and if it\u0027s the only time when we start to build the whole thing all the way north then we will incur delay finishing the formation of the tree so we decided to form the tree even from nodes like m3 which don\u0027t have leaves so probably will not have listeners because maybe someday as real for whether we\u0027re a parent to them and want the tree to be ready to operate so that\u0027s pretty much why you see this end to towards reading here even if there is a leaf behind it so putting those sub tops into the tree you may if they don\u0027t have children that\u0027s basically simulating a leg up here here right so yeah we always get traffic even if you don\u0027t have it at downstream receivers it\u0027s just exactly like the pin batter case where the RPO is aligned we are doing enough yeah it\u0027s just it\u0027s an nvme network so it\u0027s a bit more complex than doing broadcast um I think it was a couple of subtleties that you missed so we also thought through the problem if some of the more notes on Antarctica\u0027s "
  },
  {
    "startTime": "01:51:52",
    "text": "capable right we talked about it stuff yeah you could parent would only be selective or if he expresses the capability right so it will work also if you have a mix of multicast kept on non capable this solution does not reach all the toughs right that\u0027s what we concluded so if you have receivers on the tops that won\u0027t work if if the TUF wants to be including in the tree they will operates just like the subbed off they will select and then to you so we could if we want it to have not represented it right now it\u0027s kind of built with the South thought that the listeners on the Leafs but if it\u0027s easy for any first one for instance if s1 is not part of the games here to see that the trees building and to join any just like we did s3 so you see at some point s3 decided to join the tree this one could have decided to join the tree fights on purples so if we want it to have listeners on the on this one then we could we could take the same step as we did and this one okay so that\u0027s a new signaling so I actually didn\u0027t see the signaling stuff that you guys converging I don\u0027t see much of a problem there that\u0027s just with the add things to the note ties and that\u0027s it well the only signaling we really want is the route idea of the main routes that we are joining we might want to avoid you know weird case of loops so this notion of distance if you have to go through a number of those routes to reaches yeah let\u0027s not get too cute but I think you know that the basic signaling is not a problem so we don\u0027t showing in PGP at all to build this kind of structure so the star comma star would just fall out for free right yeah it\u0027s only the star Comanche when we have to start to push PGP and store state if we want to prove right if the structures like I said we can build a hundred of these trees if you like and there will be we can also control our concurrent er we looked at all these options but right now I just I just represented out to be able to up just for the sake of understanding how we do that yeah and I think the idea is not to put it in the base back because all the stuff we can you know put on optionally on the existing schema without breaking the major right including the capability whether you\u0027re multicast cable alright so I mean maybe one question to the group is check if we work wise to kind of forget about the north well the the sparse mode way of doing things which like I said takes everything to want off and then uses the reverse flooding prediction path to reach the reefs we cannot remove that I just put it on on the side because of the difference of writing north south to Sue\u0027s north if there is any hint on that we were right to do that then it\u0027s good time to tell us chain because this is my "
  },
  {
    "startTime": "01:55:00",
    "text": "first time to see the solution the first question is is there any star G on and the SG stating the topology okay so we said that for mice flows we could actually be a little G which would be like a broadcast and would send to every leaf through that broadcast apology and then there would not be nostalgie or SG Eskimo G state to the network then we said a if we have what we call elephant flows you can come back to to Jefferies slicer if you have very fat flows we don\u0027t want to flood them through the whole network and that\u0027s when we would like to install star G or whatever state in the tree the key thing is that we want to be on the tree first and not wait for having a new group show up so we build to spending structures and if we want to use one of the structures for a particular star G say what we\u0027re going to do is it\u0027s populate state for instance if there is a G listener here it would flood I have a listener for starchy and this guy will learn oh there is a listener on that interface and then he will flood it so this guy would learn oh I have actually this guy would learn I have a listener on that interface etc so you know on which side you\u0027ve got listeners and yes you would need to install that and then when there is a packet you would only instead of flooding it through all the other interface but the one you got it from you would add as an additional filter only if there is a starchy listener so we have not yet please explain written text about exactly how that works but you may figure that this structure is a logical topology like a virtual topology overlaid over the whole fabric and that\u0027s inside that you apology you flood just to add that you can you could just have simple a few star star or star C cryptic state in the network and then if you start sending traffic then the the traffic or match of those foreign state whether it\u0027s a star star or star C critics or it could be a US exist starchy states and then before it basically you it\u0027s like the the longest match for unicast case you will measure out the existing state yeah okay thank you then a cellphone said we need to use the list so don\u0027t hesitate posting questions "
  },
  {
    "startTime": "01:58:02",
    "text": "on the list and and let\u0027s discuss that bill Fenner one more question about the star star versus star G etc do you imagine dynamically deciding whether a given group is going to have be an elephant or use the star right now we don\u0027t know how to make those two leaves together on the same structure because it we would need the negative G kind of right sure it\u0027s more like the other band determination okay if you know that a star 100 group is the elephant flow than you and you can figure that on all the nodes not not configure oh all right yeah he somehow didn\u0027t know they need to receive chapter they they work and notify so that they can begin join that establish a separate tree for that yeah right it\u0027s just everybody needs to know when they\u0027re establishing the tree whether they\u0027re establishing a star G or they can use the star surgery yes right we talked about that the various various possible means it could be that you use the existing star star tree to plot a notification sure that\u0027s one way or another auto band way to to somehow and a controller kind of thing if you will in the initial approach to the one that goes north and then south we basically could have just flooded G as if it was a unique esta try so at any cast address yet so the packets would had gone off and then they would have been flooded because recognized iced multicast and flooded along the flooding or addition path so the signaling was pretty much the one we already have if you want to do if you want to have s in the picture obviously you don\u0027t so we were not taking a well so far we have not been asked to go all the way to us yeah I wasn\u0027t thinking about us I was just thinking about the distinction between the mice and the elephants and the giraffes yeah the problem with the mice is you don\u0027t have any stage for it right so if there is a packet is it a g4 which I have no listener or is it is it a mice and so that\u0027s why I say just elliptically said we would need to be able to signal negative G there is this G but I don\u0027t want it great okay great as long as you\u0027re thinking about that problem Thanks so there is none observation and I know you guys didn\u0027t think about the stuff yet but the star star without the singling could also build a beer structure that would also work fine it would be the beer forwarding that way so we have finished "
  },
  {
    "startTime": "02:01:04",
    "text": "our agenda any further question comments on any more things yeah blue sheets "
  }
]